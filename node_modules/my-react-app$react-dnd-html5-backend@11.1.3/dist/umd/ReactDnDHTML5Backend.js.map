{"version":3,"sources":["ReactDnDHTML5Backend.js"],"names":["global","factory","exports","module","define","amd","self","ReactDnDHTML5Backend","memoize","fn","result","memoized","without","items","item","filter","i","union","itemsA","itemsB","set","Set","insertItem","add","forEach","key","push","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","protoProps","staticProps","prototype","EnterLeaveCounter","isNodeInDocument","entered","value","enter","enteringNode","_this","previousLength","isNodeEntered","node","contains","leave","leavingNode","reset","isFirefox","test","navigator","userAgent","isSafari","Boolean","window","safari","_classCallCheck$1","_defineProperties$1","_createClass$1","MonotonicInterpolant","xs","ys","indexes","sort","a","b","dxs","ms","dx","dy","_i","c1s","_i2","m2","mNext","dxNext","common","c2s","c3s","m","_i3","c1","invDx","_common","interpolate","x","low","high","mid","Math","floor","xHere","max","diff","diffSq","getNodeClientOffset","el","nodeType","parentElement","_el$getBoundingClient","getBoundingClientRect","top","left","y","getEventClientOffset","e","clientX","clientY","isImageNode","_document$documentEle","nodeName","document","documentElement","getDragPreviewSize","isImage","dragPreview","sourceWidth","sourceHeight","dragPreviewWidth","width","dragPreviewHeight","height","devicePixelRatio","getDragPreviewOffset","sourceNode","clientOffset","anchorPoint","offsetPoint","dragPreviewNode","dragPreviewNodeOffsetFromClient","offsetFromDragPreview","offsetWidth","offsetHeight","anchorX","anchorY","_getDragPreviewSize","offsetX","offsetY","calculateXOffset","interpolantX","calculateYOffset","interpolantY","FILE","URL","TEXT","NativeTypes","freeze","__proto__","getDataFromDataTransfer","dataTransfer","typesToTry","defaultValue","reduce","resultSoFar","typeToTry","getData","_nativeTypesConfig","_defineProperty","obj","nativeTypesConfig","exposeProperties","files","Array","slice","call","matchesTypes","urls","split","text","_classCallCheck$2","_defineProperties$2","_createClass$2","NativeDragSource","config","initializeExposedProperties","keys","property","get","console","warn","concat","loadDataTransfer","_this2","newProperties","defineProperties","canDrag","beginDrag","isDragging","monitor","handle","getSourceId","endDrag","createNativeDragSource","type","matchNativeItemType","dataTransferTypes","types","nativeItemType","some","t","indexOf","_classCallCheck$3","_defineProperties$3","_createClass$3","OptionsReader","globalContext","undefined","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","apply","_objectSpread","arguments","source","_defineProperty$1","getOwnPropertyDescriptors","_classCallCheck$4","_defineProperties$4","_createClass$4","HTML5BackendImpl","manager","sourcePreviewNodes","Map","sourcePreviewNodeOptions","sourceNodes","sourceNodeOptions","dragStartSourceIds","dropTargetIds","dragEnterTargetIds","currentNativeSource","currentNativeHandle","currentDragSourceNode","altKeyPressed","mouseMoveTimeoutTimer","asyncEndDragFrameId","dragOverTargetIds","getSourceClientOffset","sourceId","endDragNativeItem","isDraggingNativeItem","actions","registry","removeSource","body","endDragIfSourceWasRemovedFromDOM","clearCurrentDragSourceNode","handleTopDragStartCapture","handleTopDragStart","defaultPrevented","publishSource","nativeType","setDragImage","_this$getCurrentSourc","getCurrentSourcePreviewNodeOptions","dragPreviewOffset","setData","err","setCurrentDragSourceNode","_this$getCurrentSourc2","captureDraggingState","setTimeout","publishDragSource","beginDragNativeItem","hasAttribute","preventDefault","handleTopDragEndCapture","handleTopDragEnterCapture","isFirstEnter","enterLeaveCounter","handleTopDragEnter","altKey","hover","canDrop","targetId","canDropOnTarget","dropEffect","getCurrentDropEffect","handleTopDragOverCapture","handleTopDragOver","handleTopDragLeaveCapture","isLastLeave","handleTopDropCapture","_this$currentNativeSo","handleTopDrop","drop","handleSelectStart","dragDrop","tagName","isContentEditable","options","getActions","getMonitor","getRegistry","profile","_this$dragStartSource","_this$dragOverTargetI","size","setup","__isReactDndBackendSetUp","Error","addEventListeners","teardown","removeEventListeners","cancelAnimationFrame","connectDragPreview","delete","connectDragSource","_this3","handleDragStart","setAttribute","addEventListener","removeEventListener","connectDropTarget","_this4","handleDragEnter","handleDragOver","handleDrop","getCurrentSourceNodeOptions","itemType","getItemType","addSource","_this5","clearTimeout","unshift","emptyImage","getEmptyImage","Image","src","HTML5Backend","createBackend","context"],"mappings":"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","file":"ReactDnDHTML5Backend.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = global || self, factory(global.ReactDnDHTML5Backend = {}));\n}(this, (function (exports) { 'use strict';\n\n  // cheap lodash replacements\n  function memoize(fn) {\n    var result = null;\n\n    var memoized = function memoized() {\n      if (result == null) {\n        result = fn();\n      }\n\n      return result;\n    };\n\n    return memoized;\n  }\n  /**\n   * drop-in replacement for _.without\n   */\n\n  function without(items, item) {\n    return items.filter(function (i) {\n      return i !== item;\n    });\n  }\n  function union(itemsA, itemsB) {\n    var set = new Set();\n\n    var insertItem = function insertItem(item) {\n      return set.add(item);\n    };\n\n    itemsA.forEach(insertItem);\n    itemsB.forEach(insertItem);\n    var result = [];\n    set.forEach(function (key) {\n      return result.push(key);\n    });\n    return result;\n  }\n\n  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n  var EnterLeaveCounter = /*#__PURE__*/function () {\n    function EnterLeaveCounter(isNodeInDocument) {\n      _classCallCheck(this, EnterLeaveCounter);\n\n      this.entered = [];\n      this.isNodeInDocument = isNodeInDocument;\n    }\n\n    _createClass(EnterLeaveCounter, [{\n      key: \"enter\",\n      value: function enter(enteringNode) {\n        var _this = this;\n\n        var previousLength = this.entered.length;\n\n        var isNodeEntered = function isNodeEntered(node) {\n          return _this.isNodeInDocument(node) && (!node.contains || node.contains(enteringNode));\n        };\n\n        this.entered = union(this.entered.filter(isNodeEntered), [enteringNode]);\n        return previousLength === 0 && this.entered.length > 0;\n      }\n    }, {\n      key: \"leave\",\n      value: function leave(leavingNode) {\n        var previousLength = this.entered.length;\n        this.entered = without(this.entered.filter(this.isNodeInDocument), leavingNode);\n        return previousLength > 0 && this.entered.length === 0;\n      }\n    }, {\n      key: \"reset\",\n      value: function reset() {\n        this.entered = [];\n      }\n    }]);\n\n    return EnterLeaveCounter;\n  }();\n\n  var isFirefox = memoize(function () {\n    return /firefox/i.test(navigator.userAgent);\n  });\n  var isSafari = memoize(function () {\n    return Boolean(window.safari);\n  });\n\n  function _classCallCheck$1(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties$1(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass$1(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties$1(Constructor.prototype, protoProps); if (staticProps) _defineProperties$1(Constructor, staticProps); return Constructor; }\n\n  var MonotonicInterpolant = /*#__PURE__*/function () {\n    function MonotonicInterpolant(xs, ys) {\n      _classCallCheck$1(this, MonotonicInterpolant);\n\n      var length = xs.length; // Rearrange xs and ys so that xs is sorted\n\n      var indexes = [];\n\n      for (var i = 0; i < length; i++) {\n        indexes.push(i);\n      }\n\n      indexes.sort(function (a, b) {\n        return xs[a] < xs[b] ? -1 : 1;\n      }); // Get consecutive differences and slopes\n      var dxs = [];\n      var ms = [];\n      var dx;\n      var dy;\n\n      for (var _i = 0; _i < length - 1; _i++) {\n        dx = xs[_i + 1] - xs[_i];\n        dy = ys[_i + 1] - ys[_i];\n        dxs.push(dx);\n        ms.push(dy / dx);\n      } // Get degree-1 coefficients\n\n\n      var c1s = [ms[0]];\n\n      for (var _i2 = 0; _i2 < dxs.length - 1; _i2++) {\n        var m2 = ms[_i2];\n        var mNext = ms[_i2 + 1];\n\n        if (m2 * mNext <= 0) {\n          c1s.push(0);\n        } else {\n          dx = dxs[_i2];\n          var dxNext = dxs[_i2 + 1];\n          var common = dx + dxNext;\n          c1s.push(3 * common / ((common + dxNext) / m2 + (common + dx) / mNext));\n        }\n      }\n\n      c1s.push(ms[ms.length - 1]); // Get degree-2 and degree-3 coefficients\n\n      var c2s = [];\n      var c3s = [];\n      var m;\n\n      for (var _i3 = 0; _i3 < c1s.length - 1; _i3++) {\n        m = ms[_i3];\n        var c1 = c1s[_i3];\n        var invDx = 1 / dxs[_i3];\n\n        var _common = c1 + c1s[_i3 + 1] - m - m;\n\n        c2s.push((m - c1 - _common) * invDx);\n        c3s.push(_common * invDx * invDx);\n      }\n\n      this.xs = xs;\n      this.ys = ys;\n      this.c1s = c1s;\n      this.c2s = c2s;\n      this.c3s = c3s;\n    }\n\n    _createClass$1(MonotonicInterpolant, [{\n      key: \"interpolate\",\n      value: function interpolate(x) {\n        var xs = this.xs,\n            ys = this.ys,\n            c1s = this.c1s,\n            c2s = this.c2s,\n            c3s = this.c3s; // The rightmost point in the dataset should give an exact result\n\n        var i = xs.length - 1;\n\n        if (x === xs[i]) {\n          return ys[i];\n        } // Search for the interval x is in, returning the corresponding y if x is one of the original xs\n\n\n        var low = 0;\n        var high = c3s.length - 1;\n        var mid;\n\n        while (low <= high) {\n          mid = Math.floor(0.5 * (low + high));\n          var xHere = xs[mid];\n\n          if (xHere < x) {\n            low = mid + 1;\n          } else if (xHere > x) {\n            high = mid - 1;\n          } else {\n            return ys[mid];\n          }\n        }\n\n        i = Math.max(0, high); // Interpolate\n\n        var diff = x - xs[i];\n        var diffSq = diff * diff;\n        return ys[i] + c1s[i] * diff + c2s[i] * diffSq + c3s[i] * diff * diffSq;\n      }\n    }]);\n\n    return MonotonicInterpolant;\n  }();\n\n  var ELEMENT_NODE = 1;\n  function getNodeClientOffset(node) {\n    var el = node.nodeType === ELEMENT_NODE ? node : node.parentElement;\n\n    if (!el) {\n      return null;\n    }\n\n    var _el$getBoundingClient = el.getBoundingClientRect(),\n        top = _el$getBoundingClient.top,\n        left = _el$getBoundingClient.left;\n\n    return {\n      x: left,\n      y: top\n    };\n  }\n  function getEventClientOffset(e) {\n    return {\n      x: e.clientX,\n      y: e.clientY\n    };\n  }\n\n  function isImageNode(node) {\n    var _document$documentEle;\n\n    return node.nodeName === 'IMG' && (isFirefox() || !((_document$documentEle = document.documentElement) === null || _document$documentEle === void 0 ? void 0 : _document$documentEle.contains(node)));\n  }\n\n  function getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight) {\n    var dragPreviewWidth = isImage ? dragPreview.width : sourceWidth;\n    var dragPreviewHeight = isImage ? dragPreview.height : sourceHeight; // Work around @2x coordinate discrepancies in browsers\n\n    if (isSafari() && isImage) {\n      dragPreviewHeight /= window.devicePixelRatio;\n      dragPreviewWidth /= window.devicePixelRatio;\n    }\n\n    return {\n      dragPreviewWidth: dragPreviewWidth,\n      dragPreviewHeight: dragPreviewHeight\n    };\n  }\n\n  function getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint) {\n    // The browsers will use the image intrinsic size under different conditions.\n    // Firefox only cares if it's an image, but WebKit also wants it to be detached.\n    var isImage = isImageNode(dragPreview);\n    var dragPreviewNode = isImage ? sourceNode : dragPreview;\n    var dragPreviewNodeOffsetFromClient = getNodeClientOffset(dragPreviewNode);\n    var offsetFromDragPreview = {\n      x: clientOffset.x - dragPreviewNodeOffsetFromClient.x,\n      y: clientOffset.y - dragPreviewNodeOffsetFromClient.y\n    };\n    var sourceWidth = sourceNode.offsetWidth,\n        sourceHeight = sourceNode.offsetHeight;\n    var anchorX = anchorPoint.anchorX,\n        anchorY = anchorPoint.anchorY;\n\n    var _getDragPreviewSize = getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight),\n        dragPreviewWidth = _getDragPreviewSize.dragPreviewWidth,\n        dragPreviewHeight = _getDragPreviewSize.dragPreviewHeight;\n\n    var calculateYOffset = function calculateYOffset() {\n      var interpolantY = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the top\n      offsetFromDragPreview.y, // Align at the center\n      offsetFromDragPreview.y / sourceHeight * dragPreviewHeight, // Dock to the bottom\n      offsetFromDragPreview.y + dragPreviewHeight - sourceHeight]);\n      var y = interpolantY.interpolate(anchorY); // Work around Safari 8 positioning bug\n\n      if (isSafari() && isImage) {\n        // We'll have to wait for @3x to see if this is entirely correct\n        y += (window.devicePixelRatio - 1) * dragPreviewHeight;\n      }\n\n      return y;\n    };\n\n    var calculateXOffset = function calculateXOffset() {\n      // Interpolate coordinates depending on anchor point\n      // If you know a simpler way to do this, let me know\n      var interpolantX = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the left\n      offsetFromDragPreview.x, // Align at the center\n      offsetFromDragPreview.x / sourceWidth * dragPreviewWidth, // Dock to the right\n      offsetFromDragPreview.x + dragPreviewWidth - sourceWidth]);\n      return interpolantX.interpolate(anchorX);\n    }; // Force offsets if specified in the options.\n\n\n    var offsetX = offsetPoint.offsetX,\n        offsetY = offsetPoint.offsetY;\n    var isManualOffsetX = offsetX === 0 || offsetX;\n    var isManualOffsetY = offsetY === 0 || offsetY;\n    return {\n      x: isManualOffsetX ? offsetX : calculateXOffset(),\n      y: isManualOffsetY ? offsetY : calculateYOffset()\n    };\n  }\n\n  var FILE = '__NATIVE_FILE__';\n  var URL = '__NATIVE_URL__';\n  var TEXT = '__NATIVE_TEXT__';\n\n  var NativeTypes = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    FILE: FILE,\n    URL: URL,\n    TEXT: TEXT\n  });\n\n  function getDataFromDataTransfer(dataTransfer, typesToTry, defaultValue) {\n    var result = typesToTry.reduce(function (resultSoFar, typeToTry) {\n      return resultSoFar || dataTransfer.getData(typeToTry);\n    }, '');\n    return result != null ? result : defaultValue;\n  }\n\n  var _nativeTypesConfig;\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n  var nativeTypesConfig = (_nativeTypesConfig = {}, _defineProperty(_nativeTypesConfig, FILE, {\n    exposeProperties: {\n      files: function files(dataTransfer) {\n        return Array.prototype.slice.call(dataTransfer.files);\n      },\n      items: function items(dataTransfer) {\n        return dataTransfer.items;\n      }\n    },\n    matchesTypes: ['Files']\n  }), _defineProperty(_nativeTypesConfig, URL, {\n    exposeProperties: {\n      urls: function urls(dataTransfer, matchesTypes) {\n        return getDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n');\n      }\n    },\n    matchesTypes: ['Url', 'text/uri-list']\n  }), _defineProperty(_nativeTypesConfig, TEXT, {\n    exposeProperties: {\n      text: function text(dataTransfer, matchesTypes) {\n        return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n      }\n    },\n    matchesTypes: ['Text', 'text/plain']\n  }), _nativeTypesConfig);\n\n  function _classCallCheck$2(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties$2(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass$2(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties$2(Constructor.prototype, protoProps); if (staticProps) _defineProperties$2(Constructor, staticProps); return Constructor; }\n\n  var NativeDragSource = /*#__PURE__*/function () {\n    function NativeDragSource(config) {\n      _classCallCheck$2(this, NativeDragSource);\n\n      this.config = config;\n      this.item = {};\n      this.initializeExposedProperties();\n    }\n\n    _createClass$2(NativeDragSource, [{\n      key: \"initializeExposedProperties\",\n      value: function initializeExposedProperties() {\n        var _this = this;\n\n        Object.keys(this.config.exposeProperties).forEach(function (property) {\n          Object.defineProperty(_this.item, property, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n              // eslint-disable-next-line no-console\n              console.warn(\"Browser doesn't allow reading \\\"\".concat(property, \"\\\" until the drop event.\"));\n              return null;\n            }\n          });\n        });\n      }\n    }, {\n      key: \"loadDataTransfer\",\n      value: function loadDataTransfer(dataTransfer) {\n        var _this2 = this;\n\n        if (dataTransfer) {\n          var newProperties = {};\n          Object.keys(this.config.exposeProperties).forEach(function (property) {\n            newProperties[property] = {\n              value: _this2.config.exposeProperties[property](dataTransfer, _this2.config.matchesTypes),\n              configurable: true,\n              enumerable: true\n            };\n          });\n          Object.defineProperties(this.item, newProperties);\n        }\n      }\n    }, {\n      key: \"canDrag\",\n      value: function canDrag() {\n        return true;\n      }\n    }, {\n      key: \"beginDrag\",\n      value: function beginDrag() {\n        return this.item;\n      }\n    }, {\n      key: \"isDragging\",\n      value: function isDragging(monitor, handle) {\n        return handle === monitor.getSourceId();\n      }\n    }, {\n      key: \"endDrag\",\n      value: function endDrag() {// empty\n      }\n    }]);\n\n    return NativeDragSource;\n  }();\n\n  function createNativeDragSource(type, dataTransfer) {\n    var result = new NativeDragSource(nativeTypesConfig[type]);\n    result.loadDataTransfer(dataTransfer);\n    return result;\n  }\n  function matchNativeItemType(dataTransfer) {\n    if (!dataTransfer) {\n      return null;\n    }\n\n    var dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || []);\n    return Object.keys(nativeTypesConfig).filter(function (nativeItemType) {\n      var matchesTypes = nativeTypesConfig[nativeItemType].matchesTypes;\n      return matchesTypes.some(function (t) {\n        return dataTransferTypes.indexOf(t) > -1;\n      });\n    })[0] || null;\n  }\n\n  function _classCallCheck$3(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties$3(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass$3(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties$3(Constructor.prototype, protoProps); if (staticProps) _defineProperties$3(Constructor, staticProps); return Constructor; }\n\n  var OptionsReader = /*#__PURE__*/function () {\n    function OptionsReader(globalContext) {\n      _classCallCheck$3(this, OptionsReader);\n\n      this.globalContext = globalContext;\n    }\n\n    _createClass$3(OptionsReader, [{\n      key: \"window\",\n      get: function get() {\n        if (this.globalContext) {\n          return this.globalContext;\n        } else if (typeof window !== 'undefined') {\n          return window;\n        }\n\n        return undefined;\n      }\n    }, {\n      key: \"document\",\n      get: function get() {\n        if (this.window) {\n          return this.window.document;\n        }\n\n        return undefined;\n      }\n    }]);\n\n    return OptionsReader;\n  }();\n\n  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty$1(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n  function _defineProperty$1(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  function _classCallCheck$4(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties$4(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass$4(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties$4(Constructor.prototype, protoProps); if (staticProps) _defineProperties$4(Constructor, staticProps); return Constructor; }\n  var HTML5BackendImpl = /*#__PURE__*/function () {\n    function HTML5BackendImpl(manager, globalContext) {\n      var _this = this;\n\n      _classCallCheck$4(this, HTML5BackendImpl);\n\n      this.sourcePreviewNodes = new Map();\n      this.sourcePreviewNodeOptions = new Map();\n      this.sourceNodes = new Map();\n      this.sourceNodeOptions = new Map();\n      this.dragStartSourceIds = null;\n      this.dropTargetIds = [];\n      this.dragEnterTargetIds = [];\n      this.currentNativeSource = null;\n      this.currentNativeHandle = null;\n      this.currentDragSourceNode = null;\n      this.altKeyPressed = false;\n      this.mouseMoveTimeoutTimer = null;\n      this.asyncEndDragFrameId = null;\n      this.dragOverTargetIds = null;\n\n      this.getSourceClientOffset = function (sourceId) {\n        var source = _this.sourceNodes.get(sourceId);\n\n        return source && getNodeClientOffset(source) || null;\n      };\n\n      this.endDragNativeItem = function () {\n        if (!_this.isDraggingNativeItem()) {\n          return;\n        }\n\n        _this.actions.endDrag();\n\n        if (_this.currentNativeHandle) {\n          _this.registry.removeSource(_this.currentNativeHandle);\n        }\n\n        _this.currentNativeHandle = null;\n        _this.currentNativeSource = null;\n      };\n\n      this.isNodeInDocument = function (node) {\n        // Check the node either in the main document or in the current context\n        return Boolean(node && _this.document && _this.document.body && document.body.contains(node));\n      };\n\n      this.endDragIfSourceWasRemovedFromDOM = function () {\n        var node = _this.currentDragSourceNode;\n\n        if (_this.isNodeInDocument(node)) {\n          return;\n        }\n\n        if (_this.clearCurrentDragSourceNode()) {\n          _this.actions.endDrag();\n        }\n      };\n\n      this.handleTopDragStartCapture = function () {\n        _this.clearCurrentDragSourceNode();\n\n        _this.dragStartSourceIds = [];\n      };\n\n      this.handleTopDragStart = function (e) {\n        if (e.defaultPrevented) {\n          return;\n        }\n\n        var dragStartSourceIds = _this.dragStartSourceIds;\n        _this.dragStartSourceIds = null;\n        var clientOffset = getEventClientOffset(e); // Avoid crashing if we missed a drop event or our previous drag died\n\n        if (_this.monitor.isDragging()) {\n          _this.actions.endDrag();\n        } // Don't publish the source just yet (see why below)\n\n\n        _this.actions.beginDrag(dragStartSourceIds || [], {\n          publishSource: false,\n          getSourceClientOffset: _this.getSourceClientOffset,\n          clientOffset: clientOffset\n        });\n\n        var dataTransfer = e.dataTransfer;\n        var nativeType = matchNativeItemType(dataTransfer);\n\n        if (_this.monitor.isDragging()) {\n          if (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n            // Use custom drag image if user specifies it.\n            // If child drag source refuses drag but parent agrees,\n            // use parent's node as drag image. Neither works in IE though.\n            var sourceId = _this.monitor.getSourceId();\n\n            var sourceNode = _this.sourceNodes.get(sourceId);\n\n            var dragPreview = _this.sourcePreviewNodes.get(sourceId) || sourceNode;\n\n            if (dragPreview) {\n              var _this$getCurrentSourc = _this.getCurrentSourcePreviewNodeOptions(),\n                  anchorX = _this$getCurrentSourc.anchorX,\n                  anchorY = _this$getCurrentSourc.anchorY,\n                  offsetX = _this$getCurrentSourc.offsetX,\n                  offsetY = _this$getCurrentSourc.offsetY;\n\n              var anchorPoint = {\n                anchorX: anchorX,\n                anchorY: anchorY\n              };\n              var offsetPoint = {\n                offsetX: offsetX,\n                offsetY: offsetY\n              };\n              var dragPreviewOffset = getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint);\n              dataTransfer.setDragImage(dragPreview, dragPreviewOffset.x, dragPreviewOffset.y);\n            }\n          }\n\n          try {\n            // Firefox won't drag without setting data\n            dataTransfer === null || dataTransfer === void 0 ? void 0 : dataTransfer.setData('application/json', {});\n          } catch (err) {} // IE doesn't support MIME types in setData\n          // Store drag source node so we can check whether\n          // it is removed from DOM and trigger endDrag manually.\n\n\n          _this.setCurrentDragSourceNode(e.target); // Now we are ready to publish the drag source.. or are we not?\n\n\n          var _this$getCurrentSourc2 = _this.getCurrentSourcePreviewNodeOptions(),\n              captureDraggingState = _this$getCurrentSourc2.captureDraggingState;\n\n          if (!captureDraggingState) {\n            // Usually we want to publish it in the next tick so that browser\n            // is able to screenshot the current (not yet dragging) state.\n            //\n            // It also neatly avoids a situation where render() returns null\n            // in the same tick for the source element, and browser freaks out.\n            setTimeout(function () {\n              return _this.actions.publishDragSource();\n            }, 0);\n          } else {\n            // In some cases the user may want to override this behavior, e.g.\n            // to work around IE not supporting custom drag previews.\n            //\n            // When using a custom drag layer, the only way to prevent\n            // the default drag preview from drawing in IE is to screenshot\n            // the dragging state in which the node itself has zero opacity\n            // and height. In this case, though, returning null from render()\n            // will abruptly end the dragging, which is not obvious.\n            //\n            // This is the reason such behavior is strictly opt-in.\n            _this.actions.publishDragSource();\n          }\n        } else if (nativeType) {\n          // A native item (such as URL) dragged from inside the document\n          _this.beginDragNativeItem(nativeType);\n        } else if (dataTransfer && !dataTransfer.types && (e.target && !e.target.hasAttribute || !e.target.hasAttribute('draggable'))) {\n          // Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n          // Just let it drag. It's a native type (URL or text) and will be picked up in\n          // dragenter handler.\n          return;\n        } else {\n          // If by this time no drag source reacted, tell browser not to drag.\n          e.preventDefault();\n        }\n      };\n\n      this.handleTopDragEndCapture = function () {\n        if (_this.clearCurrentDragSourceNode()) {\n          // Firefox can dispatch this event in an infinite loop\n          // if dragend handler does something like showing an alert.\n          // Only proceed if we have not handled it already.\n          _this.actions.endDrag();\n        }\n      };\n\n      this.handleTopDragEnterCapture = function (e) {\n        _this.dragEnterTargetIds = [];\n\n        var isFirstEnter = _this.enterLeaveCounter.enter(e.target);\n\n        if (!isFirstEnter || _this.monitor.isDragging()) {\n          return;\n        }\n\n        var dataTransfer = e.dataTransfer;\n        var nativeType = matchNativeItemType(dataTransfer);\n\n        if (nativeType) {\n          // A native item (such as file or URL) dragged from outside the document\n          _this.beginDragNativeItem(nativeType, dataTransfer);\n        }\n      };\n\n      this.handleTopDragEnter = function (e) {\n        var dragEnterTargetIds = _this.dragEnterTargetIds;\n        _this.dragEnterTargetIds = [];\n\n        if (!_this.monitor.isDragging()) {\n          // This is probably a native item type we don't understand.\n          return;\n        }\n\n        _this.altKeyPressed = e.altKey;\n\n        if (!isFirefox()) {\n          // Don't emit hover in `dragenter` on Firefox due to an edge case.\n          // If the target changes position as the result of `dragenter`, Firefox\n          // will still happily dispatch `dragover` despite target being no longer\n          // there. The easy solution is to only fire `hover` in `dragover` on FF.\n          _this.actions.hover(dragEnterTargetIds, {\n            clientOffset: getEventClientOffset(e)\n          });\n        }\n\n        var canDrop = dragEnterTargetIds.some(function (targetId) {\n          return _this.monitor.canDropOnTarget(targetId);\n        });\n\n        if (canDrop) {\n          // IE requires this to fire dragover events\n          e.preventDefault();\n\n          if (e.dataTransfer) {\n            e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n          }\n        }\n      };\n\n      this.handleTopDragOverCapture = function () {\n        _this.dragOverTargetIds = [];\n      };\n\n      this.handleTopDragOver = function (e) {\n        var dragOverTargetIds = _this.dragOverTargetIds;\n        _this.dragOverTargetIds = [];\n\n        if (!_this.monitor.isDragging()) {\n          // This is probably a native item type we don't understand.\n          // Prevent default \"drop and blow away the whole document\" action.\n          e.preventDefault();\n\n          if (e.dataTransfer) {\n            e.dataTransfer.dropEffect = 'none';\n          }\n\n          return;\n        }\n\n        _this.altKeyPressed = e.altKey;\n\n        _this.actions.hover(dragOverTargetIds || [], {\n          clientOffset: getEventClientOffset(e)\n        });\n\n        var canDrop = (dragOverTargetIds || []).some(function (targetId) {\n          return _this.monitor.canDropOnTarget(targetId);\n        });\n\n        if (canDrop) {\n          // Show user-specified drop effect.\n          e.preventDefault();\n\n          if (e.dataTransfer) {\n            e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n          }\n        } else if (_this.isDraggingNativeItem()) {\n          // Don't show a nice cursor but still prevent default\n          // \"drop and blow away the whole document\" action.\n          e.preventDefault();\n        } else {\n          e.preventDefault();\n\n          if (e.dataTransfer) {\n            e.dataTransfer.dropEffect = 'none';\n          }\n        }\n      };\n\n      this.handleTopDragLeaveCapture = function (e) {\n        if (_this.isDraggingNativeItem()) {\n          e.preventDefault();\n        }\n\n        var isLastLeave = _this.enterLeaveCounter.leave(e.target);\n\n        if (!isLastLeave) {\n          return;\n        }\n\n        if (_this.isDraggingNativeItem()) {\n          _this.endDragNativeItem();\n        }\n      };\n\n      this.handleTopDropCapture = function (e) {\n        _this.dropTargetIds = [];\n        e.preventDefault();\n\n        if (_this.isDraggingNativeItem()) {\n          var _this$currentNativeSo;\n\n          (_this$currentNativeSo = _this.currentNativeSource) === null || _this$currentNativeSo === void 0 ? void 0 : _this$currentNativeSo.loadDataTransfer(e.dataTransfer);\n        }\n\n        _this.enterLeaveCounter.reset();\n      };\n\n      this.handleTopDrop = function (e) {\n        var dropTargetIds = _this.dropTargetIds;\n        _this.dropTargetIds = [];\n\n        _this.actions.hover(dropTargetIds, {\n          clientOffset: getEventClientOffset(e)\n        });\n\n        _this.actions.drop({\n          dropEffect: _this.getCurrentDropEffect()\n        });\n\n        if (_this.isDraggingNativeItem()) {\n          _this.endDragNativeItem();\n        } else {\n          _this.endDragIfSourceWasRemovedFromDOM();\n        }\n      };\n\n      this.handleSelectStart = function (e) {\n        var target = e.target; // Only IE requires us to explicitly say\n        // we want drag drop operation to start\n\n        if (typeof target.dragDrop !== 'function') {\n          return;\n        } // Inputs and textareas should be selectable\n\n\n        if (target.tagName === 'INPUT' || target.tagName === 'SELECT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n          return;\n        } // For other targets, ask IE\n        // to enable drag and drop\n\n\n        e.preventDefault();\n        target.dragDrop();\n      };\n\n      this.options = new OptionsReader(globalContext);\n      this.actions = manager.getActions();\n      this.monitor = manager.getMonitor();\n      this.registry = manager.getRegistry();\n      this.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument);\n    }\n    /**\n     * Generate profiling statistics for the HTML5Backend.\n     */\n\n\n    _createClass$4(HTML5BackendImpl, [{\n      key: \"profile\",\n      value: function profile() {\n        var _this$dragStartSource, _this$dragOverTargetI;\n\n        return {\n          sourcePreviewNodes: this.sourcePreviewNodes.size,\n          sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n          sourceNodeOptions: this.sourceNodeOptions.size,\n          sourceNodes: this.sourceNodes.size,\n          dragStartSourceIds: ((_this$dragStartSource = this.dragStartSourceIds) === null || _this$dragStartSource === void 0 ? void 0 : _this$dragStartSource.length) || 0,\n          dropTargetIds: this.dropTargetIds.length,\n          dragEnterTargetIds: this.dragEnterTargetIds.length,\n          dragOverTargetIds: ((_this$dragOverTargetI = this.dragOverTargetIds) === null || _this$dragOverTargetI === void 0 ? void 0 : _this$dragOverTargetI.length) || 0\n        };\n      } // public for test\n\n    }, {\n      key: \"setup\",\n      value: function setup() {\n        if (this.window === undefined) {\n          return;\n        }\n\n        if (this.window.__isReactDndBackendSetUp) {\n          throw new Error('Cannot have two HTML5 backends at the same time.');\n        }\n\n        this.window.__isReactDndBackendSetUp = true;\n        this.addEventListeners(this.window);\n      }\n    }, {\n      key: \"teardown\",\n      value: function teardown() {\n        if (this.window === undefined) {\n          return;\n        }\n\n        this.window.__isReactDndBackendSetUp = false;\n        this.removeEventListeners(this.window);\n        this.clearCurrentDragSourceNode();\n\n        if (this.asyncEndDragFrameId) {\n          this.window.cancelAnimationFrame(this.asyncEndDragFrameId);\n        }\n      }\n    }, {\n      key: \"connectDragPreview\",\n      value: function connectDragPreview(sourceId, node, options) {\n        var _this2 = this;\n\n        this.sourcePreviewNodeOptions.set(sourceId, options);\n        this.sourcePreviewNodes.set(sourceId, node);\n        return function () {\n          _this2.sourcePreviewNodes.delete(sourceId);\n\n          _this2.sourcePreviewNodeOptions.delete(sourceId);\n        };\n      }\n    }, {\n      key: \"connectDragSource\",\n      value: function connectDragSource(sourceId, node, options) {\n        var _this3 = this;\n\n        this.sourceNodes.set(sourceId, node);\n        this.sourceNodeOptions.set(sourceId, options);\n\n        var handleDragStart = function handleDragStart(e) {\n          return _this3.handleDragStart(e, sourceId);\n        };\n\n        var handleSelectStart = function handleSelectStart(e) {\n          return _this3.handleSelectStart(e);\n        };\n\n        node.setAttribute('draggable', 'true');\n        node.addEventListener('dragstart', handleDragStart);\n        node.addEventListener('selectstart', handleSelectStart);\n        return function () {\n          _this3.sourceNodes.delete(sourceId);\n\n          _this3.sourceNodeOptions.delete(sourceId);\n\n          node.removeEventListener('dragstart', handleDragStart);\n          node.removeEventListener('selectstart', handleSelectStart);\n          node.setAttribute('draggable', 'false');\n        };\n      }\n    }, {\n      key: \"connectDropTarget\",\n      value: function connectDropTarget(targetId, node) {\n        var _this4 = this;\n\n        var handleDragEnter = function handleDragEnter(e) {\n          return _this4.handleDragEnter(e, targetId);\n        };\n\n        var handleDragOver = function handleDragOver(e) {\n          return _this4.handleDragOver(e, targetId);\n        };\n\n        var handleDrop = function handleDrop(e) {\n          return _this4.handleDrop(e, targetId);\n        };\n\n        node.addEventListener('dragenter', handleDragEnter);\n        node.addEventListener('dragover', handleDragOver);\n        node.addEventListener('drop', handleDrop);\n        return function () {\n          node.removeEventListener('dragenter', handleDragEnter);\n          node.removeEventListener('dragover', handleDragOver);\n          node.removeEventListener('drop', handleDrop);\n        };\n      }\n    }, {\n      key: \"addEventListeners\",\n      value: function addEventListeners(target) {\n        // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n        if (!target.addEventListener) {\n          return;\n        }\n\n        target.addEventListener('dragstart', this.handleTopDragStart);\n        target.addEventListener('dragstart', this.handleTopDragStartCapture, true);\n        target.addEventListener('dragend', this.handleTopDragEndCapture, true);\n        target.addEventListener('dragenter', this.handleTopDragEnter);\n        target.addEventListener('dragenter', this.handleTopDragEnterCapture, true);\n        target.addEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n        target.addEventListener('dragover', this.handleTopDragOver);\n        target.addEventListener('dragover', this.handleTopDragOverCapture, true);\n        target.addEventListener('drop', this.handleTopDrop);\n        target.addEventListener('drop', this.handleTopDropCapture, true);\n      }\n    }, {\n      key: \"removeEventListeners\",\n      value: function removeEventListeners(target) {\n        // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n        if (!target.removeEventListener) {\n          return;\n        }\n\n        target.removeEventListener('dragstart', this.handleTopDragStart);\n        target.removeEventListener('dragstart', this.handleTopDragStartCapture, true);\n        target.removeEventListener('dragend', this.handleTopDragEndCapture, true);\n        target.removeEventListener('dragenter', this.handleTopDragEnter);\n        target.removeEventListener('dragenter', this.handleTopDragEnterCapture, true);\n        target.removeEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n        target.removeEventListener('dragover', this.handleTopDragOver);\n        target.removeEventListener('dragover', this.handleTopDragOverCapture, true);\n        target.removeEventListener('drop', this.handleTopDrop);\n        target.removeEventListener('drop', this.handleTopDropCapture, true);\n      }\n    }, {\n      key: \"getCurrentSourceNodeOptions\",\n      value: function getCurrentSourceNodeOptions() {\n        var sourceId = this.monitor.getSourceId();\n        var sourceNodeOptions = this.sourceNodeOptions.get(sourceId);\n        return _objectSpread({\n          dropEffect: this.altKeyPressed ? 'copy' : 'move'\n        }, sourceNodeOptions || {});\n      }\n    }, {\n      key: \"getCurrentDropEffect\",\n      value: function getCurrentDropEffect() {\n        if (this.isDraggingNativeItem()) {\n          // It makes more sense to default to 'copy' for native resources\n          return 'copy';\n        }\n\n        return this.getCurrentSourceNodeOptions().dropEffect;\n      }\n    }, {\n      key: \"getCurrentSourcePreviewNodeOptions\",\n      value: function getCurrentSourcePreviewNodeOptions() {\n        var sourceId = this.monitor.getSourceId();\n        var sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId);\n        return _objectSpread({\n          anchorX: 0.5,\n          anchorY: 0.5,\n          captureDraggingState: false\n        }, sourcePreviewNodeOptions || {});\n      }\n    }, {\n      key: \"isDraggingNativeItem\",\n      value: function isDraggingNativeItem() {\n        var itemType = this.monitor.getItemType();\n        return Object.keys(NativeTypes).some(function (key) {\n          return NativeTypes[key] === itemType;\n        });\n      }\n    }, {\n      key: \"beginDragNativeItem\",\n      value: function beginDragNativeItem(type, dataTransfer) {\n        this.clearCurrentDragSourceNode();\n        this.currentNativeSource = createNativeDragSource(type, dataTransfer);\n        this.currentNativeHandle = this.registry.addSource(type, this.currentNativeSource);\n        this.actions.beginDrag([this.currentNativeHandle]);\n      }\n    }, {\n      key: \"setCurrentDragSourceNode\",\n      value: function setCurrentDragSourceNode(node) {\n        var _this5 = this;\n\n        this.clearCurrentDragSourceNode();\n        this.currentDragSourceNode = node; // A timeout of > 0 is necessary to resolve Firefox issue referenced\n        // See:\n        //   * https://github.com/react-dnd/react-dnd/pull/928\n        //   * https://github.com/react-dnd/react-dnd/issues/869\n\n        var MOUSE_MOVE_TIMEOUT = 1000; // Receiving a mouse event in the middle of a dragging operation\n        // means it has ended and the drag source node disappeared from DOM,\n        // so the browser didn't dispatch the dragend event.\n        //\n        // We need to wait before we start listening for mousemove events.\n        // This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n        // immediately in some browsers.\n        //\n        // See:\n        //   * https://github.com/react-dnd/react-dnd/pull/928\n        //   * https://github.com/react-dnd/react-dnd/issues/869\n        //\n\n        this.mouseMoveTimeoutTimer = setTimeout(function () {\n          return _this5.window && _this5.window.addEventListener('mousemove', _this5.endDragIfSourceWasRemovedFromDOM, true);\n        }, MOUSE_MOVE_TIMEOUT);\n      }\n    }, {\n      key: \"clearCurrentDragSourceNode\",\n      value: function clearCurrentDragSourceNode() {\n        if (this.currentDragSourceNode) {\n          this.currentDragSourceNode = null;\n\n          if (this.window) {\n            this.window.clearTimeout(this.mouseMoveTimeoutTimer || undefined);\n            this.window.removeEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n          }\n\n          this.mouseMoveTimeoutTimer = null;\n          return true;\n        }\n\n        return false;\n      }\n    }, {\n      key: \"handleDragStart\",\n      value: function handleDragStart(e, sourceId) {\n        if (e.defaultPrevented) {\n          return;\n        }\n\n        if (!this.dragStartSourceIds) {\n          this.dragStartSourceIds = [];\n        }\n\n        this.dragStartSourceIds.unshift(sourceId);\n      }\n    }, {\n      key: \"handleDragEnter\",\n      value: function handleDragEnter(e, targetId) {\n        this.dragEnterTargetIds.unshift(targetId);\n      }\n    }, {\n      key: \"handleDragOver\",\n      value: function handleDragOver(e, targetId) {\n        if (this.dragOverTargetIds === null) {\n          this.dragOverTargetIds = [];\n        }\n\n        this.dragOverTargetIds.unshift(targetId);\n      }\n    }, {\n      key: \"handleDrop\",\n      value: function handleDrop(e, targetId) {\n        this.dropTargetIds.unshift(targetId);\n      }\n    }, {\n      key: \"window\",\n      get: function get() {\n        return this.options.window;\n      }\n    }, {\n      key: \"document\",\n      get: function get() {\n        return this.options.document;\n      }\n    }]);\n\n    return HTML5BackendImpl;\n  }();\n\n  var emptyImage;\n  function getEmptyImage() {\n    if (!emptyImage) {\n      emptyImage = new Image();\n      emptyImage.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n    }\n\n    return emptyImage;\n  }\n\n  var HTML5Backend = function createBackend(manager, context) {\n    return new HTML5BackendImpl(manager, context);\n  };\n\n  exports.HTML5Backend = HTML5Backend;\n  exports.NativeTypes = NativeTypes;\n  exports.getEmptyImage = getEmptyImage;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n"]}