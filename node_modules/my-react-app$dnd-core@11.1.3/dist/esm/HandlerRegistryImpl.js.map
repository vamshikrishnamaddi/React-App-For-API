{"version":3,"sources":["HandlerRegistryImpl.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","o","minLen","_arrayLikeToArray","n","toString","call","slice","constructor","name","Array","from","test","len","arr2","Symbol","iterator","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","err","isArray","invariant","addSource","_addSource","addTarget","_addTarget","removeSource","_removeSource","removeTarget","_removeTarget","getNextUniqueId","HandlerRole","validateSourceContract","validateTargetContract","validateType","asap","getNextHandlerId","role","id","SOURCE","concat","TARGET","Error","parseRoleFromHandlerId","handlerId","mapContainsValue","map","searchValue","entries","isDone","_entries$next","_entries$next$value","HandlerRegistryImpl","store","types","Map","dragSources","dropTargets","pinnedSourceId","pinnedSource","type","source","sourceId","addHandler","dispatch","targetId","containsHandler","handler","getSource","includePinned","arguments","isSourceId","isPinned","get","getTarget","isTargetId","getSourceType","getTargetType","_this","delete","pinSource","unpinSource","set"],"mappings":"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","file":"HandlerRegistryImpl.js","sourcesContent":["function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { addSource as _addSource, addTarget as _addTarget, removeSource as _removeSource, removeTarget as _removeTarget } from './actions/registry';\nimport { getNextUniqueId } from './utils/getNextUniqueId';\nimport { HandlerRole } from './interfaces';\nimport { validateSourceContract, validateTargetContract, validateType } from './contracts';\nimport { asap } from '@react-dnd/asap';\n\nfunction getNextHandlerId(role) {\n  var id = getNextUniqueId().toString();\n\n  switch (role) {\n    case HandlerRole.SOURCE:\n      return \"S\".concat(id);\n\n    case HandlerRole.TARGET:\n      return \"T\".concat(id);\n\n    default:\n      throw new Error(\"Unknown Handler Role: \".concat(role));\n  }\n}\n\nfunction parseRoleFromHandlerId(handlerId) {\n  switch (handlerId[0]) {\n    case 'S':\n      return HandlerRole.SOURCE;\n\n    case 'T':\n      return HandlerRole.TARGET;\n\n    default:\n      invariant(false, \"Cannot parse handler ID: \".concat(handlerId));\n  }\n}\n\nfunction mapContainsValue(map, searchValue) {\n  var entries = map.entries();\n  var isDone = false;\n\n  do {\n    var _entries$next = entries.next(),\n        done = _entries$next.done,\n        _entries$next$value = _slicedToArray(_entries$next.value, 2),\n        value = _entries$next$value[1];\n\n    if (value === searchValue) {\n      return true;\n    }\n\n    isDone = !!done;\n  } while (!isDone);\n\n  return false;\n}\n\nexport var HandlerRegistryImpl = /*#__PURE__*/function () {\n  function HandlerRegistryImpl(store) {\n    _classCallCheck(this, HandlerRegistryImpl);\n\n    this.types = new Map();\n    this.dragSources = new Map();\n    this.dropTargets = new Map();\n    this.pinnedSourceId = null;\n    this.pinnedSource = null;\n    this.store = store;\n  }\n\n  _createClass(HandlerRegistryImpl, [{\n    key: \"addSource\",\n    value: function addSource(type, source) {\n      validateType(type);\n      validateSourceContract(source);\n      var sourceId = this.addHandler(HandlerRole.SOURCE, type, source);\n      this.store.dispatch(_addSource(sourceId));\n      return sourceId;\n    }\n  }, {\n    key: \"addTarget\",\n    value: function addTarget(type, target) {\n      validateType(type, true);\n      validateTargetContract(target);\n      var targetId = this.addHandler(HandlerRole.TARGET, type, target);\n      this.store.dispatch(_addTarget(targetId));\n      return targetId;\n    }\n  }, {\n    key: \"containsHandler\",\n    value: function containsHandler(handler) {\n      return mapContainsValue(this.dragSources, handler) || mapContainsValue(this.dropTargets, handler);\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource(sourceId) {\n      var includePinned = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      var isPinned = includePinned && sourceId === this.pinnedSourceId;\n      var source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId);\n      return source;\n    }\n  }, {\n    key: \"getTarget\",\n    value: function getTarget(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.dropTargets.get(targetId);\n    }\n  }, {\n    key: \"getSourceType\",\n    value: function getSourceType(sourceId) {\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      return this.types.get(sourceId);\n    }\n  }, {\n    key: \"getTargetType\",\n    value: function getTargetType(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.types.get(targetId);\n    }\n  }, {\n    key: \"isSourceId\",\n    value: function isSourceId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.SOURCE;\n    }\n  }, {\n    key: \"isTargetId\",\n    value: function isTargetId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.TARGET;\n    }\n  }, {\n    key: \"removeSource\",\n    value: function removeSource(sourceId) {\n      var _this = this;\n\n      invariant(this.getSource(sourceId), 'Expected an existing source.');\n      this.store.dispatch(_removeSource(sourceId));\n      asap(function () {\n        _this.dragSources.delete(sourceId);\n\n        _this.types.delete(sourceId);\n      });\n    }\n  }, {\n    key: \"removeTarget\",\n    value: function removeTarget(targetId) {\n      invariant(this.getTarget(targetId), 'Expected an existing target.');\n      this.store.dispatch(_removeTarget(targetId));\n      this.dropTargets.delete(targetId);\n      this.types.delete(targetId);\n    }\n  }, {\n    key: \"pinSource\",\n    value: function pinSource(sourceId) {\n      var source = this.getSource(sourceId);\n      invariant(source, 'Expected an existing source.');\n      this.pinnedSourceId = sourceId;\n      this.pinnedSource = source;\n    }\n  }, {\n    key: \"unpinSource\",\n    value: function unpinSource() {\n      invariant(this.pinnedSource, 'No source is pinned at the time.');\n      this.pinnedSourceId = null;\n      this.pinnedSource = null;\n    }\n  }, {\n    key: \"addHandler\",\n    value: function addHandler(role, type, handler) {\n      var id = getNextHandlerId(role);\n      this.types.set(id, type);\n\n      if (role === HandlerRole.SOURCE) {\n        this.dragSources.set(id, handler);\n      } else if (role === HandlerRole.TARGET) {\n        this.dropTargets.set(id, handler);\n      }\n\n      return id;\n    }\n  }]);\n\n  return HandlerRegistryImpl;\n}();"]}