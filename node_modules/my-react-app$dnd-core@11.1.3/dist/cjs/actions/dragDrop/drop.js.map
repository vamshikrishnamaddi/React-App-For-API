{"version":3,"sources":["drop.js"],"names":["Object","defineProperty","exports","value","createDrop","_invariant","require","_types","_js_utils","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","obj","configurable","writable","manager","drop","options","undefined","monitor","getMonitor","registry","getRegistry","verifyInvariants","targetIds","getDroppableTargets","targetId","index","dropResult","determineDropResult","action","type","DROP","payload","dispatch","invariant","isDragging","didDrop","getTarget","verifyDropResultType","getDropResult","isObject","getTargetIds","canDropOnTarget","reverse"],"mappings":"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","file":"drop.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createDrop = createDrop;\n\nvar _invariant = require(\"@react-dnd/invariant\");\n\nvar _types = require(\"./types\");\n\nvar _js_utils = require(\"../../utils/js_utils\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction createDrop(manager) {\n  return function drop() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyInvariants(monitor);\n    var targetIds = getDroppableTargets(monitor); // Multiple actions are dispatched here, which is why this doesn't return an action\n\n    targetIds.forEach(function (targetId, index) {\n      var dropResult = determineDropResult(targetId, index, registry, monitor);\n      var action = {\n        type: _types.DROP,\n        payload: {\n          dropResult: _objectSpread(_objectSpread({}, options), dropResult)\n        }\n      };\n      manager.dispatch(action);\n    });\n  };\n}\n\nfunction verifyInvariants(monitor) {\n  (0, _invariant.invariant)(monitor.isDragging(), 'Cannot call drop while not dragging.');\n  (0, _invariant.invariant)(!monitor.didDrop(), 'Cannot call drop twice during one drag operation.');\n}\n\nfunction determineDropResult(targetId, index, registry, monitor) {\n  var target = registry.getTarget(targetId);\n  var dropResult = target ? target.drop(monitor, targetId) : undefined;\n  verifyDropResultType(dropResult);\n\n  if (typeof dropResult === 'undefined') {\n    dropResult = index === 0 ? {} : monitor.getDropResult();\n  }\n\n  return dropResult;\n}\n\nfunction verifyDropResultType(dropResult) {\n  (0, _invariant.invariant)(typeof dropResult === 'undefined' || (0, _js_utils.isObject)(dropResult), 'Drop result must either be an object or undefined.');\n}\n\nfunction getDroppableTargets(monitor) {\n  var targetIds = monitor.getTargetIds().filter(monitor.canDropOnTarget, monitor);\n  targetIds.reverse();\n  return targetIds;\n}"]}