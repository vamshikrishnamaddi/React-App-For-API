{"version":3,"sources":["dirtyHandlerIds.js"],"names":["Object","defineProperty","exports","value","reduce","_dragDrop","require","_registry","_equality","_dirtiness","_js_utils","arguments","length","undefined","NONE","action","type","HOVER","ADD_SOURCE","ADD_TARGET","REMOVE_TARGET","REMOVE_SOURCE","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","END_DRAG","DROP","ALL","_action$payload","payload","_action$payload$targe","targetIds","_action$payload$prevT","prevTargetIds","result","xor","didChange","areArraysEqual","prevInnermostTargetId","innermostTargetId","push"],"mappings":"AAAA;;;;;;AAEAA,WAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,aAAO;AADoC,KAA7C;AAGAD,YAAQE,MAAR,GAAiBA,MAAjB;;AAEA,QAAIC,YAAYC,QAAQ,qBAAR,CAAhB;;AAEA,QAAIC,YAAYD,QAAQ,qBAAR,CAAhB;;AAEA,QAAIE,YAAYF,QAAQ,mBAAR,CAAhB;;AAEA,QAAIG,aAAaH,QAAQ,oBAAR,CAAjB;;AAEA,QAAII,YAAYJ,QAAQ,mBAAR,CAAhB;;AAEA,aAASF,MAAT,GAAkB;AACHO,gBAAUC,MAAV,GAAmB,CAAnB,IAAwBD,UAAU,CAAV,MAAiBE,SAAzC,GAAqDF,UAAU,CAAV,CAArD,GAAoEF,WAAWK,IAD5E;;;AAGhB,UAAIC,SAASJ,UAAUC,MAAV,GAAmB,CAAnB,GAAuBD,UAAU,CAAV,CAAvB,GAAsCE,SAAnD;;AAEA,cAAQE,OAAOC,IAAf;AACE,aAAKX,UAAUY,KAAf;AACE;;AAEF,aAAKV,UAAUW,UAAf;AACA,aAAKX,UAAUY,UAAf;AACA,aAAKZ,UAAUa,aAAf;AACA,aAAKb,UAAUc,aAAf;AACE,iBAAOZ,WAAWK,IAAlB;;AAEF,aAAKT,UAAUiB,UAAf;AACA,aAAKjB,UAAUkB,mBAAf;AACA,aAAKlB,UAAUmB,QAAf;AACA,aAAKnB,UAAUoB,IAAf;AACA;AACE,iBAAOhB,WAAWiB,GAAlB;AAfJ;;AAkBA,UAAIC,kBAAkBZ,OAAOa,OAA7B;AAAA,UACIC,wBAAwBF,gBAAgBG,SAD5C;AAAA,UAEIA,YAAYD,0BAA0B,KAAK,CAA/B,GAAmC,EAAnC,GAAwCA,qBAFxD;AAAA,UAGIE,wBAAwBJ,gBAAgBK,aAH5C;AAAA,UAIIA,gBAAgBD,0BAA0B,KAAK,CAA/B,GAAmC,EAAnC,GAAwCA,qBAJ5D;AAKA,UAAIE,SAAS,CAAC,GAAGvB,UAAUwB,GAAd,EAAmBJ,SAAnB,EAA8BE,aAA9B,CAAb;AACA,UAAIG,YAAYF,OAAOrB,MAAP,GAAgB,CAAhB,IAAqB,CAAC,CAAC,GAAGJ,UAAU4B,cAAd,EAA8BN,SAA9B,EAAyCE,aAAzC,CAAtC;;AAEA,UAAI,CAACG,SAAL,EAAgB;AACd,eAAO1B,WAAWK,IAAlB;AACD,OAjCe,CAiCd;AACF;;;AAGA,UAAIuB,wBAAwBL,cAAcA,cAAcpB,MAAd,GAAuB,CAArC,CAA5B;AACA,UAAI0B,oBAAoBR,UAAUA,UAAUlB,MAAV,GAAmB,CAA7B,CAAxB;;AAEA,UAAIyB,0BAA0BC,iBAA9B,EAAiD;AAC/C,YAAID,qBAAJ,EAA2B;AACzBJ,iBAAOM,IAAP,CAAYF,qBAAZ;AACD;;AAED,YAAIC,iBAAJ,EAAuB;AACrBL,iBAAOM,IAAP,CAAYD,iBAAZ;AACD;AACF;;AAED,aAAOL,MAAP;AACD","file":"dirtyHandlerIds.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.reduce = reduce;\n\nvar _dragDrop = require(\"../actions/dragDrop\");\n\nvar _registry = require(\"../actions/registry\");\n\nvar _equality = require(\"../utils/equality\");\n\nvar _dirtiness = require(\"../utils/dirtiness\");\n\nvar _js_utils = require(\"../utils/js_utils\");\n\nfunction reduce() {\n  var _state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _dirtiness.NONE;\n\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case _dragDrop.HOVER:\n      break;\n\n    case _registry.ADD_SOURCE:\n    case _registry.ADD_TARGET:\n    case _registry.REMOVE_TARGET:\n    case _registry.REMOVE_SOURCE:\n      return _dirtiness.NONE;\n\n    case _dragDrop.BEGIN_DRAG:\n    case _dragDrop.PUBLISH_DRAG_SOURCE:\n    case _dragDrop.END_DRAG:\n    case _dragDrop.DROP:\n    default:\n      return _dirtiness.ALL;\n  }\n\n  var _action$payload = action.payload,\n      _action$payload$targe = _action$payload.targetIds,\n      targetIds = _action$payload$targe === void 0 ? [] : _action$payload$targe,\n      _action$payload$prevT = _action$payload.prevTargetIds,\n      prevTargetIds = _action$payload$prevT === void 0 ? [] : _action$payload$prevT;\n  var result = (0, _js_utils.xor)(targetIds, prevTargetIds);\n  var didChange = result.length > 0 || !(0, _equality.areArraysEqual)(targetIds, prevTargetIds);\n\n  if (!didChange) {\n    return _dirtiness.NONE;\n  } // Check the target ids at the innermost position. If they are valid, add them\n  // to the result\n\n\n  var prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1];\n  var innermostTargetId = targetIds[targetIds.length - 1];\n\n  if (prevInnermostTargetId !== innermostTargetId) {\n    if (prevInnermostTargetId) {\n      result.push(prevInnermostTargetId);\n    }\n\n    if (innermostTargetId) {\n      result.push(innermostTargetId);\n    }\n  }\n\n  return result;\n}"]}