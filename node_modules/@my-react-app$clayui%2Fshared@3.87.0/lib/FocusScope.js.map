{"version":3,"sources":["FocusScope.js"],"names":["Object","defineProperty","exports","value","FocusScope","_react","_interopRequireWildcard","require","_Keys","_useFocusManagement","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","default","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Symbol","iterator","constructor","FocusConflictContext","createContext","_ref","_ref$arrowKeysLeftRig","arrowKeysLeftRight","_ref$arrowKeysUpDown","arrowKeysUpDown","children","onFocus","elRef","useRef","focusManager","useFocusManagement","hasParentFocus","useContext","_onKeyDown","onKeyDown","event","shiftKey","Keys","Down","Right","Tab","next","focusNext","preventDefault","Up","Left","previous","focusPrevious","child","createElement","Provider","cloneElement","stopPropagation","props","ref","r","current","_ref2"],"mappings":"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","file":"FocusScope.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FocusScope = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _Keys = require(\"./Keys\");\n\nvar _useFocusManagement = require(\"./useFocusManagement\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\n/**\n * The context helps to identify if the FocusScope is being declared nested, to\n * avoid focus being controlled by more than one focus manager, we stop event\n * propagation to prevent the parent focus generator from doing anything.\n */\nvar FocusConflictContext = /*#__PURE__*/_react.default.createContext(false);\n/**\n * FocusScope is a component only for controlling focus and listening\n * for children's key down events, since the component handles the `onKeyDown`\n * event.\n */\n\n\nvar FocusScope = function FocusScope(_ref) {\n  var _ref$arrowKeysLeftRig = _ref.arrowKeysLeftRight,\n      arrowKeysLeftRight = _ref$arrowKeysLeftRig === void 0 ? false : _ref$arrowKeysLeftRig,\n      _ref$arrowKeysUpDown = _ref.arrowKeysUpDown,\n      arrowKeysUpDown = _ref$arrowKeysUpDown === void 0 ? true : _ref$arrowKeysUpDown,\n      children = _ref.children,\n      onFocus = _ref.onFocus;\n\n  var elRef = _react.default.useRef(null);\n\n  var focusManager = (0, _useFocusManagement.useFocusManagement)(elRef);\n  var hasParentFocus = (0, _react.useContext)(FocusConflictContext);\n\n  var _onKeyDown = function onKeyDown(event) {\n    var key = event.key,\n        shiftKey = event.shiftKey;\n\n    if (arrowKeysUpDown && key === _Keys.Keys.Down || arrowKeysLeftRight && key === _Keys.Keys.Right || key === _Keys.Keys.Tab && !shiftKey) {\n      var next = focusManager.focusNext();\n\n      if (next) {\n        event.preventDefault();\n\n        if (onFocus) {\n          onFocus(next);\n        }\n      }\n    } else if (arrowKeysUpDown && key === _Keys.Keys.Up || arrowKeysLeftRight && key === _Keys.Keys.Left || key === _Keys.Keys.Tab && shiftKey) {\n      var previous = focusManager.focusPrevious();\n\n      if (previous) {\n        event.preventDefault();\n\n        if (onFocus) {\n          onFocus(previous);\n        }\n      }\n    }\n  };\n\n  var child = typeof children === 'function' ? children(focusManager) : children;\n  return /*#__PURE__*/_react.default.createElement(FocusConflictContext.Provider, {\n    value: true\n  }, /*#__PURE__*/_react.default.cloneElement(child, {\n    onKeyDown: function onKeyDown(event) {\n      if (hasParentFocus) {\n        event.stopPropagation();\n      } // If the element already exists a `onKeyDown` event should\n      // invoke it as well.\n\n\n      if (child.props.onKeyDown) {\n        child.props.onKeyDown(event);\n      }\n\n      _onKeyDown(event);\n    },\n    ref: function ref(r) {\n      if (r) {\n        elRef.current = r;\n        var _ref2 = child.ref;\n\n        if (_ref2) {\n          if (_typeof(_ref2) === 'object') {\n            _ref2.current = r;\n          } else if (typeof _ref2 === 'function') {\n            _ref2(r);\n          }\n        }\n      }\n    }\n  }));\n};\n\nexports.FocusScope = FocusScope;"]}