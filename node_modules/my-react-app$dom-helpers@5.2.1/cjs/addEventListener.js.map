{"version":3,"sources":["addEventListener.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","onceSupported","optionsSupported","_canUseDOM","options","passive","once","window","addEventListener","removeEventListener","e","node","eventName","handler","capture","wrappedHandler","__once","onceHandler","event","call","_default"],"mappings":"AAAA;;;;;;AAEA,QAAIA,yBAAyBC,QAAQ,2DAAR,CAA7B;;AAEAC,YAAQC,UAAR,GAAqB,IAArB;AACAD,YAAQE,OAAR,GAAkBF,QAAQG,aAAR,GAAwBH,QAAQI,gBAAR,GAA2B,KAAK,CAA1E;;AAEA,QAAIC,aAAaP,uBAAuBC,QAAQ,aAAR,CAAvB,CAAjB;;AAEA;AACA,QAAIK,mBAAmB,KAAvB;AACAJ,YAAQI,gBAAR,GAA2BA,gBAA3B;AACA,QAAID,gBAAgB,KAApB;AACAH,YAAQG,aAAR,GAAwBA,aAAxB;;AAEA,QAAI;AACF,UAAIG,UAAU;AACZ,YAAIC,OAAJ,GAAc;AACZ,iBAAOP,QAAQI,gBAAR,GAA2BA,mBAAmB,IAArD;AACD,SAHW;;AAKZ,YAAII,IAAJ,GAAW;AACT;AACA,iBAAOR,QAAQG,aAAR,GAAwBA,gBAAgBH,QAAQI,gBAAR,GAA2BA,mBAAmB,IAA7F;AACD;;AARW,OAAd;;AAYA,UAAIC,WAAWH,OAAf,EAAwB;AACtBO,eAAOC,gBAAP,CAAwB,MAAxB,EAAgCJ,OAAhC,EAAyCA,OAAzC;AACAG,eAAOE,mBAAP,CAA2B,MAA3B,EAAmCL,OAAnC,EAA4C,IAA5C;AACD;AACF,KAjBD,CAiBE,OAAOM,CAAP,EAAU,CAEX;AADC;;;AAGF;;;;;;;;AAQA,aAASF,gBAAT,CAA0BG,IAA1B,EAAgCC,SAAhC,EAA2CC,OAA3C,EAAoDT,OAApD,EAA6D;AAC3D,UAAIA,WAAW,OAAOA,OAAP,KAAmB,SAA9B,IAA2C,CAACH,aAAhD,EAA+D;AAC7D,YAAIK,OAAOF,QAAQE,IAAnB;AAAA,YACIQ,UAAUV,QAAQU,OADtB;AAEA,YAAIC,iBAAiBF,OAArB;;AAEA,YAAI,CAACZ,aAAD,IAAkBK,IAAtB,EAA4B;AAC1BS,2BAAiBF,QAAQG,MAAR,IAAkB,SAASC,WAAT,CAAqBC,KAArB,EAA4B;AAC7D,iBAAKT,mBAAL,CAAyBG,SAAzB,EAAoCK,WAApC,EAAiDH,OAAjD;AACAD,oBAAQM,IAAR,CAAa,IAAb,EAAmBD,KAAnB;AACD,WAHD;;AAKAL,kBAAQG,MAAR,GAAiBD,cAAjB;AACD;;AAEDJ,aAAKH,gBAAL,CAAsBI,SAAtB,EAAiCG,cAAjC,EAAiDb,mBAAmBE,OAAnB,GAA6BU,OAA9E;AACD;;AAEDH,WAAKH,gBAAL,CAAsBI,SAAtB,EAAiCC,OAAjC,EAA0CT,OAA1C;AACD;;AAED,QAAIgB,WAAWZ,gBAAf;AACAV,YAAQE,OAAR,GAAkBoB,QAAlB","file":"addEventListener.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = exports.onceSupported = exports.optionsSupported = void 0;\n\nvar _canUseDOM = _interopRequireDefault(require(\"./canUseDOM\"));\n\n/* eslint-disable no-return-assign */\nvar optionsSupported = false;\nexports.optionsSupported = optionsSupported;\nvar onceSupported = false;\nexports.onceSupported = onceSupported;\n\ntry {\n  var options = {\n    get passive() {\n      return exports.optionsSupported = optionsSupported = true;\n    },\n\n    get once() {\n      // eslint-disable-next-line no-multi-assign\n      return exports.onceSupported = onceSupported = exports.optionsSupported = optionsSupported = true;\n    }\n\n  };\n\n  if (_canUseDOM.default) {\n    window.addEventListener('test', options, options);\n    window.removeEventListener('test', options, true);\n  }\n} catch (e) {\n  /* */\n}\n\n/**\n * An `addEventListener` ponyfill, supports the `once` option\n * \n * @param node the element\n * @param eventName the event name\n * @param handle the handler\n * @param options event options\n */\nfunction addEventListener(node, eventName, handler, options) {\n  if (options && typeof options !== 'boolean' && !onceSupported) {\n    var once = options.once,\n        capture = options.capture;\n    var wrappedHandler = handler;\n\n    if (!onceSupported && once) {\n      wrappedHandler = handler.__once || function onceHandler(event) {\n        this.removeEventListener(eventName, onceHandler, capture);\n        handler.call(this, event);\n      };\n\n      handler.__once = wrappedHandler;\n    }\n\n    node.addEventListener(eventName, wrappedHandler, optionsSupported ? options : capture);\n  }\n\n  node.addEventListener(eventName, handler, options);\n}\n\nvar _default = addEventListener;\nexports.default = _default;"]}