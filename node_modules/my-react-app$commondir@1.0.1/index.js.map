{"version":3,"sources":["index.js"],"names":["path","require","module","exports","basedir","relfiles","files","map","r","resolve","res","slice","reduce","ps","file","match","Error","xs","split","i","Math","min","length","join"],"mappings":";;;;AAAA,YAAIA,OAAOC,QAAQ,mBAAR,CAAX;;AAEAC,eAAOC,OAAP,GAAiB,UAAUC,OAAV,EAAmBC,QAAnB,EAA6B;AAC1C,gBAAIA,QAAJ,EAAc;AACV,oBAAIC,QAAQD,SAASE,GAAT,CAAa,UAAUC,CAAV,EAAa;AAClC,2BAAOR,KAAKS,OAAL,CAAaL,OAAb,EAAsBI,CAAtB,CAAP;AACH,iBAFW,CAAZ;AAGH,aAJD,MAKK;AACD,oBAAIF,QAAQF,OAAZ;AACH;;AAED,gBAAIM,MAAMJ,MAAMK,KAAN,CAAY,CAAZ,EAAeC,MAAf,CAAsB,UAAUC,EAAV,EAAcC,IAAd,EAAoB;AAChD,oBAAI,CAACA,KAAKC,KAAL,CAAW,oBAAX,CAAL,EAAuC;AACnC,0BAAM,IAAIC,KAAJ,CAAU,iCAAV,CAAN;AACH;;AAED,oBAAIC,KAAKH,KAAKI,KAAL,CAAW,SAAX,CAAT;AACA,qBACI,IAAIC,IAAI,CADZ,EAEIN,GAAGM,CAAH,MAAUF,GAAGE,CAAH,CAAV,IAAmBA,IAAIC,KAAKC,GAAL,CAASR,GAAGS,MAAZ,EAAoBL,GAAGK,MAAvB,CAF3B,EAGIH,GAHJ,CAIC;AACD,uBAAON,GAAGF,KAAH,CAAS,CAAT,EAAYQ,CAAZ,CAAP;AACH,aAZS,EAYPb,MAAM,CAAN,EAASY,KAAT,CAAe,SAAf,CAZO,CAAV;;AAcA;AACA,mBAAOR,IAAIY,MAAJ,GAAa,CAAb,GAAiBZ,IAAIa,IAAJ,CAAS,GAAT,CAAjB,GAAiC,GAAxC;AACH,SA1BD","file":"index.js","sourcesContent":["var path = require('path');\n\nmodule.exports = function (basedir, relfiles) {\n    if (relfiles) {\n        var files = relfiles.map(function (r) {\n            return path.resolve(basedir, r);\n        });\n    }\n    else {\n        var files = basedir;\n    }\n    \n    var res = files.slice(1).reduce(function (ps, file) {\n        if (!file.match(/^([A-Za-z]:)?\\/|\\\\/)) {\n            throw new Error('relative path without a basedir');\n        }\n        \n        var xs = file.split(/\\/+|\\\\+/);\n        for (\n            var i = 0;\n            ps[i] === xs[i] && i < Math.min(ps.length, xs.length);\n            i++\n        );\n        return ps.slice(0, i);\n    }, files[0].split(/\\/+|\\\\+/));\n    \n    // Windows correctly handles paths with forward-slashes\n    return res.length > 1 ? res.join('/') : '/'\n};\n"]}