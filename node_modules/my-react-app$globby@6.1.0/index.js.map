{"version":3,"sources":["index.js"],"names":["Promise","require","arrayUnion","objectAssign","glob","pify","globP","bind","isNegative","pattern","isString","value","assertPatternsInput","patterns","every","TypeError","generateGlobTasks","opts","concat","globTasks","cache","Object","create","statCache","realpathCache","symlinks","ignore","forEach","i","slice","filter","map","push","module","exports","err","reject","all","task","then","paths","apply","sync","reduce","matches","hasMagic","some"],"mappings":"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","file":"index.js","sourcesContent":["'use strict';\nvar Promise = require('pinkie-promise');\nvar arrayUnion = require('array-union');\nvar objectAssign = require('object-assign');\nvar glob = require('glob');\nvar pify = require('pify');\n\nvar globP = pify(glob, Promise).bind(glob);\n\nfunction isNegative(pattern) {\n\treturn pattern[0] === '!';\n}\n\nfunction isString(value) {\n\treturn typeof value === 'string';\n}\n\nfunction assertPatternsInput(patterns) {\n\tif (!patterns.every(isString)) {\n\t\tthrow new TypeError('patterns must be a string or an array of strings');\n\t}\n}\n\nfunction generateGlobTasks(patterns, opts) {\n\tpatterns = [].concat(patterns);\n\tassertPatternsInput(patterns);\n\n\tvar globTasks = [];\n\n\topts = objectAssign({\n\t\tcache: Object.create(null),\n\t\tstatCache: Object.create(null),\n\t\trealpathCache: Object.create(null),\n\t\tsymlinks: Object.create(null),\n\t\tignore: []\n\t}, opts);\n\n\tpatterns.forEach(function (pattern, i) {\n\t\tif (isNegative(pattern)) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar ignore = patterns.slice(i).filter(isNegative).map(function (pattern) {\n\t\t\treturn pattern.slice(1);\n\t\t});\n\n\t\tglobTasks.push({\n\t\t\tpattern: pattern,\n\t\t\topts: objectAssign({}, opts, {\n\t\t\t\tignore: opts.ignore.concat(ignore)\n\t\t\t})\n\t\t});\n\t});\n\n\treturn globTasks;\n}\n\nmodule.exports = function (patterns, opts) {\n\tvar globTasks;\n\n\ttry {\n\t\tglobTasks = generateGlobTasks(patterns, opts);\n\t} catch (err) {\n\t\treturn Promise.reject(err);\n\t}\n\n\treturn Promise.all(globTasks.map(function (task) {\n\t\treturn globP(task.pattern, task.opts);\n\t})).then(function (paths) {\n\t\treturn arrayUnion.apply(null, paths);\n\t});\n};\n\nmodule.exports.sync = function (patterns, opts) {\n\tvar globTasks = generateGlobTasks(patterns, opts);\n\n\treturn globTasks.reduce(function (matches, task) {\n\t\treturn arrayUnion(matches, glob.sync(task.pattern, task.opts));\n\t}, []);\n};\n\nmodule.exports.generateGlobTasks = generateGlobTasks;\n\nmodule.exports.hasMagic = function (patterns, opts) {\n\treturn [].concat(patterns).some(function (pattern) {\n\t\treturn glob.hasMagic(pattern, opts);\n\t});\n};\n"]}