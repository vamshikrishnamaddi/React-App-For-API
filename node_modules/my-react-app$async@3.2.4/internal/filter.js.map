{"version":3,"sources":["filter.js"],"names":["Object","defineProperty","exports","value","default","_filter","_isArrayLike","require","_isArrayLike2","_interopRequireDefault","_wrapAsync","_wrapAsync2","obj","__esModule","filterArray","eachfn","arr","iteratee","callback","truthValues","Array","length","x","index","iterCb","err","v","results","i","push","filterGeneric","coll","sort","a","b","map","filter","module"],"mappings":"AAAA;;;;;;AAEAA,eAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AACzCC,mBAAO;AADkC,SAA7C;AAGAD,gBAAQE,OAAR,GAAkBC,OAAlB;;AAEA,YAAIC,eAAeC,QAAQ,eAAR,CAAnB;;AAEA,YAAIC,gBAAgBC,uBAAuBH,YAAvB,CAApB;;AAEA,YAAII,aAAaH,QAAQ,aAAR,CAAjB;;AAEA,YAAII,cAAcF,uBAAuBC,UAAvB,CAAlB;;AAEA,iBAASD,sBAAT,CAAgCG,GAAhC,EAAqC;AAAE,mBAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAER,SAASQ,GAAX,EAArC;AAAwD;;AAE/F,iBAASE,WAAT,CAAqBC,MAArB,EAA6BC,GAA7B,EAAkCC,QAAlC,EAA4CC,QAA5C,EAAsD;AAClD,gBAAIC,cAAc,IAAIC,KAAJ,CAAUJ,IAAIK,MAAd,CAAlB;AACAN,mBAAOC,GAAP,EAAY,CAACM,CAAD,EAAIC,KAAJ,EAAWC,MAAX,KAAsB;AAC9BP,yBAASK,CAAT,EAAY,CAACG,GAAD,EAAMC,CAAN,KAAY;AACpBP,gCAAYI,KAAZ,IAAqB,CAAC,CAACG,CAAvB;AACAF,2BAAOC,GAAP;AACH,iBAHD;AAIH,aALD,EAKGA,OAAO;AACN,oBAAIA,GAAJ,EAAS,OAAOP,SAASO,GAAT,CAAP;AACT,oBAAIE,UAAU,EAAd;AACA,qBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIZ,IAAIK,MAAxB,EAAgCO,GAAhC,EAAqC;AACjC,wBAAIT,YAAYS,CAAZ,CAAJ,EAAoBD,QAAQE,IAAR,CAAab,IAAIY,CAAJ,CAAb;AACvB;AACDV,yBAAS,IAAT,EAAeS,OAAf;AACH,aAZD;AAaH;;AAED,iBAASG,aAAT,CAAuBf,MAAvB,EAA+BgB,IAA/B,EAAqCd,QAArC,EAA+CC,QAA/C,EAAyD;AACrD,gBAAIS,UAAU,EAAd;AACAZ,mBAAOgB,IAAP,EAAa,CAACT,CAAD,EAAIC,KAAJ,EAAWC,MAAX,KAAsB;AAC/BP,yBAASK,CAAT,EAAY,CAACG,GAAD,EAAMC,CAAN,KAAY;AACpB,wBAAID,GAAJ,EAAS,OAAOD,OAAOC,GAAP,CAAP;AACT,wBAAIC,CAAJ,EAAO;AACHC,gCAAQE,IAAR,CAAa,EAAEN,KAAF,EAASpB,OAAOmB,CAAhB,EAAb;AACH;AACDE,2BAAOC,GAAP;AACH,iBAND;AAOH,aARD,EAQGA,OAAO;AACN,oBAAIA,GAAJ,EAAS,OAAOP,SAASO,GAAT,CAAP;AACTP,yBAAS,IAAT,EAAeS,QAAQK,IAAR,CAAa,CAACC,CAAD,EAAIC,CAAJ,KAAUD,EAAEV,KAAF,GAAUW,EAAEX,KAAnC,EAA0CY,GAA1C,CAA8CT,KAAKA,EAAEvB,KAArD,CAAf;AACH,aAXD;AAYH;;AAED,iBAASE,OAAT,CAAiBU,MAAjB,EAAyBgB,IAAzB,EAA+Bd,QAA/B,EAAyCC,QAAzC,EAAmD;AAC/C,gBAAIkB,SAAS,CAAC,GAAG5B,cAAcJ,OAAlB,EAA2B2B,IAA3B,IAAmCjB,WAAnC,GAAiDgB,aAA9D;AACA,mBAAOM,OAAOrB,MAAP,EAAegB,IAAf,EAAqB,CAAC,GAAGpB,YAAYP,OAAhB,EAAyBa,QAAzB,CAArB,EAAyDC,QAAzD,CAAP;AACH;AACDmB,eAAOnC,OAAP,GAAiBA,QAAQ,SAAR,CAAjB","file":"filter.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _filter;\n\nvar _isArrayLike = require('./isArrayLike.js');\n\nvar _isArrayLike2 = _interopRequireDefault(_isArrayLike);\n\nvar _wrapAsync = require('./wrapAsync.js');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction filterArray(eachfn, arr, iteratee, callback) {\n    var truthValues = new Array(arr.length);\n    eachfn(arr, (x, index, iterCb) => {\n        iteratee(x, (err, v) => {\n            truthValues[index] = !!v;\n            iterCb(err);\n        });\n    }, err => {\n        if (err) return callback(err);\n        var results = [];\n        for (var i = 0; i < arr.length; i++) {\n            if (truthValues[i]) results.push(arr[i]);\n        }\n        callback(null, results);\n    });\n}\n\nfunction filterGeneric(eachfn, coll, iteratee, callback) {\n    var results = [];\n    eachfn(coll, (x, index, iterCb) => {\n        iteratee(x, (err, v) => {\n            if (err) return iterCb(err);\n            if (v) {\n                results.push({ index, value: x });\n            }\n            iterCb(err);\n        });\n    }, err => {\n        if (err) return callback(err);\n        callback(null, results.sort((a, b) => a.index - b.index).map(v => v.value));\n    });\n}\n\nfunction _filter(eachfn, coll, iteratee, callback) {\n    var filter = (0, _isArrayLike2.default)(coll) ? filterArray : filterGeneric;\n    return filter(eachfn, coll, (0, _wrapAsync2.default)(iteratee), callback);\n}\nmodule.exports = exports['default'];"]}