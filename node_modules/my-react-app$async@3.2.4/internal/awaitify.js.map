{"version":3,"sources":["awaitify.js"],"names":["Object","defineProperty","exports","value","default","awaitify","asyncFn","arity","length","Error","awaitable","args","apply","Promise","resolve","reject","err","cbArgs","module"],"mappings":"AAAA;;;;;;AAEAA,eAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AACzCC,mBAAO;AADkC,SAA7C;AAGAD,gBAAQE,OAAR,GAAkBC,QAAlB;AACA;AACA;AACA,iBAASA,QAAT,CAAkBC,OAAlB,EAA2BC,QAAQD,QAAQE,MAA3C,EAAmD;AAC/C,gBAAI,CAACD,KAAL,EAAY,MAAM,IAAIE,KAAJ,CAAU,oBAAV,CAAN;;;AAeZ,mBAdA,SAASC,SAAT,CAAmB,GAAGC,IAAtB,EAA4B;AACxB,oBAAI,OAAOA,KAAKJ,QAAQ,CAAb,CAAP,KAA2B,UAA/B,EAA2C;AACvC,2BAAOD,QAAQM,KAAR,CAAc,IAAd,EAAoBD,IAApB,CAAP;AACH;;AAED,uBAAO,IAAIE,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpCJ,yBAAKJ,QAAQ,CAAb,IAAkB,CAACS,GAAD,EAAM,GAAGC,MAAT,KAAoB;AAClC,4BAAID,GAAJ,EAAS,OAAOD,OAAOC,GAAP,CAAP;AACTF,gCAAQG,OAAOT,MAAP,GAAgB,CAAhB,GAAoBS,MAApB,GAA6BA,OAAO,CAAP,CAArC;AACH,qBAHD;AAIAX,4BAAQM,KAAR,CAAc,IAAd,EAAoBD,IAApB;AACH,iBANM,CAAP;AAOH,aAED;AACH;AACDO,eAAOhB,OAAP,GAAiBA,QAAQ,SAAR,CAAjB","file":"awaitify.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = awaitify;\n// conditionally promisify a function.\n// only return a promise if a callback is omitted\nfunction awaitify(asyncFn, arity = asyncFn.length) {\n    if (!arity) throw new Error('arity is undefined');\n    function awaitable(...args) {\n        if (typeof args[arity - 1] === 'function') {\n            return asyncFn.apply(this, args);\n        }\n\n        return new Promise((resolve, reject) => {\n            args[arity - 1] = (err, ...cbArgs) => {\n                if (err) return reject(err);\n                resolve(cbArgs.length > 1 ? cbArgs : cbArgs[0]);\n            };\n            asyncFn.apply(this, args);\n        });\n    }\n\n    return awaitable;\n}\nmodule.exports = exports['default'];"]}