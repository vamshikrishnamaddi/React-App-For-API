{"version":3,"sources":["doWhilst.js"],"names":["Object","defineProperty","exports","value","_onlyOnce","require","_onlyOnce2","_interopRequireDefault","_wrapAsync","_wrapAsync2","_awaitify","_awaitify2","obj","__esModule","default","doWhilst","iteratee","test","callback","_fn","_test","results","next","err","args","check","truth","module"],"mappings":"AAAA;;;;;;AAEAA,eAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AACzCC,mBAAO;AADkC,SAA7C;;AAIA,YAAIC,YAAYC,QAAQ,qBAAR,CAAhB;;AAEA,YAAIC,aAAaC,uBAAuBH,SAAvB,CAAjB;;AAEA,YAAII,aAAaH,QAAQ,sBAAR,CAAjB;;AAEA,YAAII,cAAcF,uBAAuBC,UAAvB,CAAlB;;AAEA,YAAIE,YAAYL,QAAQ,qBAAR,CAAhB;;AAEA,YAAIM,aAAaJ,uBAAuBG,SAAvB,CAAjB;;AAEA,iBAASH,sBAAT,CAAgCK,GAAhC,EAAqC;AAAE,mBAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AAAwD;;AAE/F;;;;;;;;;;;;;;;;;;;;;;;AAuBA,iBAASG,QAAT,CAAkBC,QAAlB,EAA4BC,IAA5B,EAAkCC,QAAlC,EAA4C;AACxCA,uBAAW,CAAC,GAAGZ,WAAWQ,OAAf,EAAwBI,QAAxB,CAAX;AACA,gBAAIC,MAAM,CAAC,GAAGV,YAAYK,OAAhB,EAAyBE,QAAzB,CAAV;AACA,gBAAII,QAAQ,CAAC,GAAGX,YAAYK,OAAhB,EAAyBG,IAAzB,CAAZ;AACA,gBAAII,OAAJ;;AAEA,qBAASC,IAAT,CAAcC,GAAd,EAAmB,GAAGC,IAAtB,EAA4B;AACxB,oBAAID,GAAJ,EAAS,OAAOL,SAASK,GAAT,CAAP;AACT,oBAAIA,QAAQ,KAAZ,EAAmB;AACnBF,0BAAUG,IAAV;AACAJ,sBAAM,GAAGI,IAAT,EAAeC,KAAf;AACH;;AAED,qBAASA,KAAT,CAAeF,GAAf,EAAoBG,KAApB,EAA2B;AACvB,oBAAIH,GAAJ,EAAS,OAAOL,SAASK,GAAT,CAAP;AACT,oBAAIA,QAAQ,KAAZ,EAAmB;AACnB,oBAAI,CAACG,KAAL,EAAY,OAAOR,SAAS,IAAT,EAAe,GAAGG,OAAlB,CAAP;AACZF,oBAAIG,IAAJ;AACH;;AAED,mBAAOG,MAAM,IAAN,EAAY,IAAZ,CAAP;AACH;;AAEDvB,gBAAQY,OAAR,GAAkB,CAAC,GAAGH,WAAWG,OAAf,EAAwBC,QAAxB,EAAkC,CAAlC,CAAlB;AACAY,eAAOzB,OAAP,GAAiBA,QAAQ,SAAR,CAAjB","file":"doWhilst.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _onlyOnce = require('./internal/onlyOnce.js');\n\nvar _onlyOnce2 = _interopRequireDefault(_onlyOnce);\n\nvar _wrapAsync = require('./internal/wrapAsync.js');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nvar _awaitify = require('./internal/awaitify.js');\n\nvar _awaitify2 = _interopRequireDefault(_awaitify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The post-check version of [`whilst`]{@link module:ControlFlow.whilst}. To reflect the difference in\n * the order of operations, the arguments `test` and `iteratee` are switched.\n *\n * `doWhilst` is to `whilst` as `do while` is to `while` in plain JavaScript.\n *\n * @name doWhilst\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.whilst]{@link module:ControlFlow.whilst}\n * @category Control Flow\n * @param {AsyncFunction} iteratee - A function which is called each time `test`\n * passes. Invoked with (callback).\n * @param {AsyncFunction} test - asynchronous truth test to perform after each\n * execution of `iteratee`. Invoked with (...args, callback), where `...args` are the\n * non-error args from the previous callback of `iteratee`.\n * @param {Function} [callback] - A callback which is called after the test\n * function has failed and repeated execution of `iteratee` has stopped.\n * `callback` will be passed an error and any arguments passed to the final\n * `iteratee`'s callback. Invoked with (err, [results]);\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction doWhilst(iteratee, test, callback) {\n    callback = (0, _onlyOnce2.default)(callback);\n    var _fn = (0, _wrapAsync2.default)(iteratee);\n    var _test = (0, _wrapAsync2.default)(test);\n    var results;\n\n    function next(err, ...args) {\n        if (err) return callback(err);\n        if (err === false) return;\n        results = args;\n        _test(...args, check);\n    }\n\n    function check(err, truth) {\n        if (err) return callback(err);\n        if (err === false) return;\n        if (!truth) return callback(null, ...results);\n        _fn(next);\n    }\n\n    return check(null, true);\n}\n\nexports.default = (0, _awaitify2.default)(doWhilst, 3);\nmodule.exports = exports['default'];"]}