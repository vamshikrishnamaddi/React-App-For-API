{"version":3,"sources":["forEachOf.js"],"names":["Object","defineProperty","exports","value","_isArrayLike","require","_isArrayLike2","_interopRequireDefault","_breakLoop","_breakLoop2","_eachOfLimit","_eachOfLimit2","_once","_once2","_onlyOnce","_onlyOnce2","_wrapAsync","_wrapAsync2","_awaitify","_awaitify2","obj","__esModule","default","eachOfArrayLike","coll","iteratee","callback","index","completed","length","canceled","iteratorCallback","err","eachOfGeneric","Infinity","eachOf","eachOfImplementation","module"],"mappings":"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","file":"forEachOf.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _isArrayLike = require('./internal/isArrayLike.js');\n\nvar _isArrayLike2 = _interopRequireDefault(_isArrayLike);\n\nvar _breakLoop = require('./internal/breakLoop.js');\n\nvar _breakLoop2 = _interopRequireDefault(_breakLoop);\n\nvar _eachOfLimit = require('./eachOfLimit.js');\n\nvar _eachOfLimit2 = _interopRequireDefault(_eachOfLimit);\n\nvar _once = require('./internal/once.js');\n\nvar _once2 = _interopRequireDefault(_once);\n\nvar _onlyOnce = require('./internal/onlyOnce.js');\n\nvar _onlyOnce2 = _interopRequireDefault(_onlyOnce);\n\nvar _wrapAsync = require('./internal/wrapAsync.js');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nvar _awaitify = require('./internal/awaitify.js');\n\nvar _awaitify2 = _interopRequireDefault(_awaitify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// eachOf implementation optimized for array-likes\nfunction eachOfArrayLike(coll, iteratee, callback) {\n    callback = (0, _once2.default)(callback);\n    var index = 0,\n        completed = 0,\n        { length } = coll,\n        canceled = false;\n    if (length === 0) {\n        callback(null);\n    }\n\n    function iteratorCallback(err, value) {\n        if (err === false) {\n            canceled = true;\n        }\n        if (canceled === true) return;\n        if (err) {\n            callback(err);\n        } else if (++completed === length || value === _breakLoop2.default) {\n            callback(null);\n        }\n    }\n\n    for (; index < length; index++) {\n        iteratee(coll[index], index, (0, _onlyOnce2.default)(iteratorCallback));\n    }\n}\n\n// a generic version of eachOf which can handle array, object, and iterator cases.\nfunction eachOfGeneric(coll, iteratee, callback) {\n    return (0, _eachOfLimit2.default)(coll, Infinity, iteratee, callback);\n}\n\n/**\n * Like [`each`]{@link module:Collections.each}, except that it passes the key (or index) as the second argument\n * to the iteratee.\n *\n * @name eachOf\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEachOf\n * @category Collection\n * @see [async.each]{@link module:Collections.each}\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each\n * item in `coll`.\n * The `key` is the item's key, or index in the case of an array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n * @example\n *\n * // dev.json is a file containing a valid json object config for dev environment\n * // dev.json is a file containing a valid json object config for test environment\n * // prod.json is a file containing a valid json object config for prod environment\n * // invalid.json is a file with a malformed json object\n *\n * let configs = {}; //global variable\n * let validConfigFileMap = {dev: 'dev.json', test: 'test.json', prod: 'prod.json'};\n * let invalidConfigFileMap = {dev: 'dev.json', test: 'test.json', invalid: 'invalid.json'};\n *\n * // asynchronous function that reads a json file and parses the contents as json object\n * function parseFile(file, key, callback) {\n *     fs.readFile(file, \"utf8\", function(err, data) {\n *         if (err) return calback(err);\n *         try {\n *             configs[key] = JSON.parse(data);\n *         } catch (e) {\n *             return callback(e);\n *         }\n *         callback();\n *     });\n * }\n *\n * // Using callbacks\n * async.forEachOf(validConfigFileMap, parseFile, function (err) {\n *     if (err) {\n *         console.error(err);\n *     } else {\n *         console.log(configs);\n *         // configs is now a map of JSON data, e.g.\n *         // { dev: //parsed dev.json, test: //parsed test.json, prod: //parsed prod.json}\n *     }\n * });\n *\n * //Error handing\n * async.forEachOf(invalidConfigFileMap, parseFile, function (err) {\n *     if (err) {\n *         console.error(err);\n *         // JSON parse error exception\n *     } else {\n *         console.log(configs);\n *     }\n * });\n *\n * // Using Promises\n * async.forEachOf(validConfigFileMap, parseFile)\n * .then( () => {\n *     console.log(configs);\n *     // configs is now a map of JSON data, e.g.\n *     // { dev: //parsed dev.json, test: //parsed test.json, prod: //parsed prod.json}\n * }).catch( err => {\n *     console.error(err);\n * });\n *\n * //Error handing\n * async.forEachOf(invalidConfigFileMap, parseFile)\n * .then( () => {\n *     console.log(configs);\n * }).catch( err => {\n *     console.error(err);\n *     // JSON parse error exception\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let result = await async.forEachOf(validConfigFileMap, parseFile);\n *         console.log(configs);\n *         // configs is now a map of JSON data, e.g.\n *         // { dev: //parsed dev.json, test: //parsed test.json, prod: //parsed prod.json}\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * //Error handing\n * async () => {\n *     try {\n *         let result = await async.forEachOf(invalidConfigFileMap, parseFile);\n *         console.log(configs);\n *     }\n *     catch (err) {\n *         console.log(err);\n *         // JSON parse error exception\n *     }\n * }\n *\n */\nfunction eachOf(coll, iteratee, callback) {\n    var eachOfImplementation = (0, _isArrayLike2.default)(coll) ? eachOfArrayLike : eachOfGeneric;\n    return eachOfImplementation(coll, (0, _wrapAsync2.default)(iteratee), callback);\n}\n\nexports.default = (0, _awaitify2.default)(eachOf, 3);\nmodule.exports = exports['default'];"]}