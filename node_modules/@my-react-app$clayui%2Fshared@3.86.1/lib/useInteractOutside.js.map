{"version":3,"sources":["useInteractOutside.js"],"names":["Object","defineProperty","exports","value","useInteractOutside","_react","require","_ref","_ref$isDisabled","isDisabled","onInteract","ref","triggerRef","stateRef","useRef","ignoreEmulatedMouseEvents","isPointerDown","state","current","useEffect","onPointerDown","event","isValidEvent","PointerEvent","onPointerUp","document","addEventListener","removeEventListener","onMouseUp","onTouchEnd","trigger","button","target","ownerDocument","documentElement","contains"],"mappings":"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","file":"useInteractOutside.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useInteractOutside = useInteractOutside;\n\nvar _react = require(\"react\");\n\n/**\n * SPDX-FileCopyrightText: Â© 2022 Liferay, Inc. <https://liferay.com>\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n/**\n * Code ported with some minor modifications\n * https://github.com/adobe/react-spectrum/blob/810579b671791f1593108f62cdc1893de3a220e3/packages/%40react-aria/interactions/src/useInteractOutside.ts\n */\nfunction useInteractOutside(_ref) {\n  var _ref$isDisabled = _ref.isDisabled,\n      isDisabled = _ref$isDisabled === void 0 ? false : _ref$isDisabled,\n      onInteract = _ref.onInteract,\n      ref = _ref.ref,\n      triggerRef = _ref.triggerRef;\n  var stateRef = (0, _react.useRef)({\n    ignoreEmulatedMouseEvents: false,\n    isPointerDown: false,\n    onInteract: onInteract\n  });\n  var state = stateRef.current;\n  state.onInteract = onInteract;\n  (0, _react.useEffect)(function () {\n    if (isDisabled) {\n      return;\n    }\n\n    var onPointerDown = function onPointerDown(event) {\n      if (isValidEvent(event, ref, triggerRef) && state.onInteract) {\n        state.isPointerDown = true;\n      }\n    }; // Use pointer events if available. Otherwise, fall back to mouse and touch events.\n\n\n    if (typeof PointerEvent !== 'undefined') {\n      var onPointerUp = function onPointerUp(event) {\n        if (state.isPointerDown && state.onInteract && isValidEvent(event, ref, triggerRef)) {\n          state.isPointerDown = false;\n          state.onInteract(event);\n        }\n      };\n\n      document.addEventListener('pointerdown', onPointerDown, true);\n      document.addEventListener('pointerup', onPointerUp, true);\n      return function () {\n        document.removeEventListener('pointerdown', onPointerDown, true);\n        document.removeEventListener('pointerup', onPointerUp, true);\n      };\n    } else {\n      var onMouseUp = function onMouseUp(event) {\n        if (state.ignoreEmulatedMouseEvents) {\n          state.ignoreEmulatedMouseEvents = false;\n        } else if (state.isPointerDown && state.onInteract && isValidEvent(event, ref, triggerRef)) {\n          state.isPointerDown = false;\n          state.onInteract(event);\n        }\n      };\n\n      var onTouchEnd = function onTouchEnd(event) {\n        state.ignoreEmulatedMouseEvents = true;\n\n        if (state.onInteract && state.isPointerDown && isValidEvent(event, ref, triggerRef)) {\n          state.isPointerDown = false;\n          state.onInteract(event);\n        }\n      };\n\n      document.addEventListener('mousedown', onPointerDown, true);\n      document.addEventListener('mouseup', onMouseUp, true);\n      document.addEventListener('touchstart', onPointerDown, true);\n      document.addEventListener('touchend', onTouchEnd, true);\n      return function () {\n        document.removeEventListener('mousedown', onPointerDown, true);\n        document.removeEventListener('mouseup', onMouseUp, true);\n        document.removeEventListener('touchstart', onPointerDown, true);\n        document.removeEventListener('touchend', onTouchEnd, true);\n      };\n    }\n  }, [ref, state, isDisabled]);\n}\n\nfunction isValidEvent(event, ref, trigger) {\n  // @ts-ignore\n  if (event.button > 0) {\n    return false;\n  } // if the event target is no longer in the document\n\n\n  if (event.target) {\n    // @ts-ignore\n    var ownerDocument = event.target.ownerDocument;\n\n    if (!ownerDocument || !ownerDocument.documentElement.contains(event.target)) {\n      return false;\n    }\n  } // We disregard the trigger click because we already have an event that\n  // toggles the state of the overlay on the trigger.\n\n\n  if (trigger.current && trigger.current.contains(event.target)) {\n    return false;\n  }\n\n  return ref.current && !ref.current.contains(event.target);\n}"]}