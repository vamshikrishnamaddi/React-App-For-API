{"version":3,"sources":["ReactDnD.js"],"names":["global","factory","exports","module","require","define","amd","self","ReactDnD","React","HandlerRole","symbolObservablePonyfill","root","result","Symbol","observable","window","Function","randomString","Math","random","toString","substring","split","join","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","isPlainObject","obj","proto","Object","getPrototypeOf","createStore","reducer","preloadedState","enhancer","_ref2","arguments","Error","undefined","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","slice","getState","subscribe","listener","isSubscribed","push","unsubscribe","index","indexOf","splice","dispatch","action","type","listeners","i","length","replaceReducer","nextReducer","_ref","outerSubscribe","observer","TypeError","observeState","next","warning","message","console","error","e","isCrushed","name","invariant","condition","format","_len","args","Array","_key","argIndex","replace","framesToPop","INIT_COORDS","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","HOVER","DROP","END_DRAG","setClientOffset","clientOffset","sourceClientOffset","payload","_typeof","iterator","constructor","prototype","get","path","defaultValue","reduce","a","c","without","items","item","filter","isObject","input","xor","itemsA","itemsB","map","Map","insertItem","set","has","forEach","count","key","intersection","t","ResetCoordinatesAction","createBeginDrag","manager","beginDrag","sourceIds","options","publishSource","_options$publishSourc","getSourceClientOffset","monitor","getMonitor","registry","getRegistry","verifyInvariants","sourceId","getDraggableSource","verifyGetSourceClientOffsetIsFunction","source","getSource","verifyItemIsObject","pinSource","itemType","getSourceType","isSourcePublic","isDragging","canDragSource","createPublishDragSource","publishDragSource","matchesType","targetType","draggedItemType","isArray","some","createHover","hover","targetIdsArg","verifyTargetIdsIsArray","targetIds","checkInvariants","getItemType","removeNonMatchingTargetIds","hoverAllTargets","didDrop","targetId","lastIndexOf","target","getTarget","getTargetType","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","configurable","writable","createDrop","drop","verifyInvariants$1","getDroppableTargets","dropResult","determineDropResult","verifyDropResultType","getDropResult","getTargetIds","canDropOnTarget","reverse","createEndDrag","endDrag","verifyIsDragging","getSourceId","unpinSource","createDragDropActions","strictEquality","b","areCoordsEqual","offsetA","offsetB","x","y","areArraysEqual","isEqual","ownKeys$1","_objectSpread$1","_defineProperty$1","initialState","initialSourceClientOffset","initialClientOffset","state","ADD_SOURCE","ADD_TARGET","REMOVE_SOURCE","REMOVE_TARGET","addSource","addTarget","removeSource","removeTarget","ownKeys$2","_objectSpread$2","_defineProperty$2","initialState$1","reduce$1","reduce$2","NONE","ALL","__IS_NONE__","__IS_ALL__","areDirty","dirtyIds","handlerIds","commonIds","reduce$3","_action$payload","_action$payload$targe","_action$payload$prevT","prevTargetIds","didChange","prevInnermostTargetId","innermostTargetId","reduce$4","ownKeys$3","_objectSpread$3","_defineProperty$3","reduce$5","dirtyHandlerIds","dragOffset","refCount","dragOperation","stateId","add","subtract","getDifferenceFromInitialOffset","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","DragDropMonitorImpl","store","subscribeToStateChange","_this","prevStateId","handleChange","currentStateId","canSkipListener","subscribeToOffsetChange","_this2","previousState","nextState","canDrag","canDrop","Boolean","isDraggingSource","sourceType","isOverTarget","shallow","getItem","getInitialClientOffset","getInitialSourceClientOffset","getClientOffset","getSourceClientOffset$1","getDifferenceFromInitialOffset$1","nextUniqueId","getNextUniqueId","_typeof$1","validateSourceContract","validateTargetContract","validateType","allowArray","rawAsap","task","queue","requestFlush","flush","currentIndex","call","scan","newLength","scope","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","makeRequestCallFromMutationObserver","makeRequestCallFromTimer","callback","toggle","node","document","createTextNode","observe","characterData","requestCall","data","timeoutHandle","setTimeout","handleTimer","intervalHandle","setInterval","clearTimeout","clearInterval","freeTasks","pendingErrors","requestErrorThrow","throwFirstError","shift","asap","rawTask","pop","RawTask","onerror","_classCallCheck$1","_defineProperties$1","_createClass$1","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","o","minLen","_arrayLikeToArray","n","from","test","len","arr2","_arr","_n","_d","_e","_i","_s","done","err","getNextHandlerId","role","id","SOURCE","concat","TARGET","parseRoleFromHandlerId","handlerId","mapContainsValue","searchValue","entries","isDone","_entries$next","_entries$next$value","HandlerRegistryImpl","types","dragSources","dropTargets","pinnedSourceId","pinnedSource","addSource$1","addHandler","addTarget$1","containsHandler","handler","includePinned","isSourceId","isPinned","isTargetId","removeSource$1","delete","removeTarget$1","_classCallCheck$2","_defineProperties$2","_createClass$2","makeStoreInstance","debugMode","reduxDevTools","__REDUX_DEVTOOLS_EXTENSION__","instanceId","DragDropManagerImpl","isSetUp","handleRefCountChange","shouldSetUp","backend","setup","teardown","receiveBackend","getBackend","getActions","bindActionCreator","actionCreator","actions","boundActions","createDragDropManager","backendFactory","globalContext","backendOptions","DndContext","createContext","dragDropManager","createDndContext","context","_slicedToArray$1","_arrayWithHoles$1","_iterableToArrayLimit$1","_unsupportedIterableToArray$1","_nonIterableRest$1","_arrayLikeToArray$1","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","sourceKeys","DndProvider","memo","children","_getDndContextValue","getDndContextValue","_getDndContextValue2","isGlobalInstance","useEffect","getGlobalContext","instanceSymbol","createElement","Provider","displayName","_manager","createSingletonDndContext","for","ctx","DragPreviewImage","connect","src","Image","connected","img","onload","useIsomorphicLayoutEffect","useLayoutEffect","shallowEqual","objA","objB","compare","compareContext","compareResult","keysA","keysB","bHasOwnProperty","hasOwnProperty","bind","idx","valueA","valueB","_slicedToArray$2","_arrayWithHoles$2","_iterableToArrayLimit$2","_unsupportedIterableToArray$2","_nonIterableRest$2","_arrayLikeToArray$2","useCollector","collect","onUpdate","_useState","useState","_useState2","collected","setCollected","updateCollected","useCallback","nextValue","_slicedToArray$3","_arrayWithHoles$3","_iterableToArrayLimit$3","_unsupportedIterableToArray$3","_nonIterableRest$3","_arrayLikeToArray$3","useMonitorOutput","onCollect","_useCollector","_useCollector2","subscribeToMonitorStateChange","getHandlerId","registerTarget","registerSource","useDragDropManager","_useContext","useContext","_classCallCheck$3","_defineProperties$3","_createClass$3","isCallingCanDrag","isCallingIsDragging","DragSourceMonitorImpl","internalMonitor","receiveHandlerId","setRef","ref","current","cloneWithRef","element","newRef","previousRef","cloneElement","throwIfCompositeComponentElement","wrapHookToRecognizeElement","hook","elementOrNode","isValidElement","wrapConnectorHooks","hooks","wrappedHooks","endsWith","wrappedHook","_typeof$2","isRef","_classCallCheck$4","_defineProperties$4","_createClass$4","SourceConnector","dragSource","clearDragSource","dragSourceOptions","dragSourceRef","dragSourceNode","reconnectDragSource","dragPreview","clearDragPreview","dragPreviewOptions","dragPreviewRef","dragPreviewNode","reconnectDragPreview","dragSourceOptionsInternal","dragPreviewOptionsInternal","lastConnectedHandlerId","lastConnectedDragSource","lastConnectedDragSourceOptions","lastConnectedDragPreview","lastConnectedDragPreviewOptions","newHandlerId","reconnect","didHandlerIdChange","didConnectedDragSourceChange","didDragSourceOptionsChange","disconnectDragSource","dragSourceUnsubscribe","connectDragSource","didConnectedDragPreviewChange","didDragPreviewOptionsChange","disconnectDragPreview","dragPreviewUnsubscribe","connectDragPreview","_slicedToArray$4","_arrayWithHoles$4","_iterableToArrayLimit$4","_unsupportedIterableToArray$4","_nonIterableRest$4","_arrayLikeToArray$4","_typeof$3","useDragSourceMonitor","useMemo","connector","useDragHandler","spec","_spec$current","begin","beginResult","globalMonitor","end","registerHandler","_registerSource","_registerSource2","unregister","_slicedToArray$5","_arrayWithHoles$5","_iterableToArrayLimit$5","_unsupportedIterableToArray$5","_nonIterableRest$5","_arrayLikeToArray$5","_classCallCheck$5","_defineProperties$5","_createClass$5","TargetConnector","dropTarget","clearDropTarget","dropTargetOptions","dropTargetRef","dropTargetNode","dropTargetOptionsInternal","lastConnectedDropTarget","lastConnectedDropTargetOptions","didDropTargetChange","didOptionsChange","disconnectDropTarget","unsubscribeDropTarget","connectDropTarget","_classCallCheck$6","_defineProperties$6","_createClass$6","isCallingCanDrop","DropTargetMonitorImpl","isOver","_slicedToArray$6","_arrayWithHoles$6","_iterableToArrayLimit$6","_unsupportedIterableToArray$6","_nonIterableRest$6","_arrayLikeToArray$6","useDropTargetMonitor","useDropHandler","_registerTarget","accept","_registerTarget2","_slicedToArray$7","_arrayWithHoles$7","_iterableToArrayLimit$7","_unsupportedIterableToArray$7","_nonIterableRest$7","_arrayLikeToArray$7","_slicedToArray$8","_arrayWithHoles$8","_iterableToArrayLimit$8","_unsupportedIterableToArray$8","_nonIterableRest$8","_arrayLikeToArray$8","_typeof$4","isFunction","noop","isObjectLike","isPlainObject$1","getDecoratedComponent","instanceRef","currentRef","decoratedRef","isClassComponent","Component","render","isRefForwardingComponent","C","_item$$$typeof","$$typeof","isRefable","checkDecoratorArguments","functionName","signature","arg","createCommonjsModule","fn","basedir","base","commonjsRequire","reactIs_development","hasSymbol","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_ASYNC_MODE_TYPE","REACT_CONCURRENT_MODE_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_BLOCK_TYPE","REACT_FUNDAMENTAL_TYPE","REACT_RESPONDER_TYPE","REACT_SCOPE_TYPE","typeOf","$$typeofType","hasWarnedAboutDeprecatedIsAsyncMode","isAsyncMode","isConcurrentMode","AsyncMode","ConcurrentMode","ContextConsumer","ContextProvider","Element","ForwardRef","Fragment","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","isValidElementType","reactIs","REACT_STATICS","childContextTypes","contextType","contextTypes","defaultProps","getDefaultProps","getDerivedStateFromError","getDerivedStateFromProps","mixins","propTypes","KNOWN_STATICS","caller","callee","arity","MEMO_STATICS","TYPE_STATICS","getStatics","component","getOwnPropertyNames","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","targetStatics","sourceStatics","hoistNonReactStatics_cjs","_classCallCheck$7","_defineProperties$7","_createClass$7","Disposable","isDisposed","dispose","isDisposable","d","_fixup","empty","create","CompositeDisposable","disposables","remove","shouldDispose","clear","currentDisposables","_i2","SerialDisposable","getDisposable","setDisposable","old","_typeof$5","_slicedToArray$9","_arrayWithHoles$9","_iterableToArrayLimit$9","_unsupportedIterableToArray$9","_nonIterableRest$9","_arrayLikeToArray$9","_classCallCheck$8","_defineProperties$8","_createClass$8","_inherits","subClass","superClass","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Date","decorateHandler","DecoratedComponent","createHandler","createMonitor","createConnector","containerDisplayName","getType","_options$arePropsEqua","arePropsEqual","Decorated","DragDropContainer","_React$Component","_super","createRef","getCurrentState","setState","disposable","receiveProps","getDecoratedComponentInstance","shouldComponentUpdate","nextProps","componentDidMount","currentType","componentDidUpdate","prevProps","componentWillUnmount","receiveType","handlerMonitor","handlerConnector","_registerHandler","_registerHandler2","Consumer","receiveDragDropManager","requestAnimationFrame","_this2$handlerConnect","assign","_typeof$6","isValidType","every","_classCallCheck$9","_defineProperties$9","_createClass$9","ALLOWED_SPEC_METHODS","REQUIRED_SPEC_METHODS","SourceImpl","createSourceFactory","createSource","_classCallCheck$a","_defineProperties$a","_createClass$a","ALLOWED_SPEC_METHODS$1","TargetImpl","receiveMonitor","createTargetFactory","createTarget","_typeof$7","_classCallCheck$b","_defineProperties$b","_createClass$b","_inherits$1","_setPrototypeOf$1","_createSuper$1","_isNativeReflectConstruct$1","_getPrototypeOf$1","_possibleConstructorReturn$1","_assertThisInitialized$1","DragLayer","decorateLayer","DragLayerContainer","isCurrentlyMounted","unsubscribeFromOffsetChange","unsubscribeFromStateChange","DragSource","decorateSource","DropTarget","decorateTarget","useDrag","specRef","useRef","_useDragSourceMonitor","_useDragSourceMonitor2","previewOptions","useDragLayer","useDrop","_useDropTargetMonitor","_useDropTargetMonitor2"],"mappings":"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","file":"ReactDnD.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'react'], factory) :\n  (global = global || self, factory(global.ReactDnD = {}, global.React));\n}(this, (function (exports, React) { 'use strict';\n\n  var HandlerRole;\n\n  (function (HandlerRole) {\n    HandlerRole[\"SOURCE\"] = \"SOURCE\";\n    HandlerRole[\"TARGET\"] = \"TARGET\";\n  })(HandlerRole || (HandlerRole = {}));\n\n  function symbolObservablePonyfill(root) {\n  \tvar result;\n  \tvar Symbol = root.Symbol;\n\n  \tif (typeof Symbol === 'function') {\n  \t\tif (Symbol.observable) {\n  \t\t\tresult = Symbol.observable;\n  \t\t} else {\n  \t\t\tresult = Symbol('observable');\n  \t\t\tSymbol.observable = result;\n  \t\t}\n  \t} else {\n  \t\tresult = '@@observable';\n  \t}\n\n  \treturn result;\n  }\n\n  /* global window */\n\n  var root;\n\n  if (typeof self !== 'undefined') {\n    root = self;\n  } else if (typeof window !== 'undefined') {\n    root = window;\n  } else if (typeof global !== 'undefined') {\n    root = global;\n  } else if (typeof module !== 'undefined') {\n    root = module;\n  } else {\n    root = Function('return this')();\n  }\n\n  var result = symbolObservablePonyfill(root);\n\n  /**\n   * These are private action types reserved by Redux.\n   * For any unknown actions, you must return the current state.\n   * If the current state is undefined, you must return the initial state.\n   * Do not reference these action types directly in your code.\n   */\n  var randomString = function randomString() {\n    return Math.random().toString(36).substring(7).split('').join('.');\n  };\n\n  var ActionTypes = {\n    INIT: \"@@redux/INIT\" + randomString(),\n    REPLACE: \"@@redux/REPLACE\" + randomString(),\n    PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n      return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n    }\n  };\n\n  /**\n   * @param {any} obj The object to inspect.\n   * @returns {boolean} True if the argument appears to be a plain object.\n   */\n  function isPlainObject(obj) {\n    if (typeof obj !== 'object' || obj === null) return false;\n    var proto = obj;\n\n    while (Object.getPrototypeOf(proto) !== null) {\n      proto = Object.getPrototypeOf(proto);\n    }\n\n    return Object.getPrototypeOf(obj) === proto;\n  }\n\n  /**\n   * Creates a Redux store that holds the state tree.\n   * The only way to change the data in the store is to call `dispatch()` on it.\n   *\n   * There should only be a single store in your app. To specify how different\n   * parts of the state tree respond to actions, you may combine several reducers\n   * into a single reducer function by using `combineReducers`.\n   *\n   * @param {Function} reducer A function that returns the next state tree, given\n   * the current state tree and the action to handle.\n   *\n   * @param {any} [preloadedState] The initial state. You may optionally specify it\n   * to hydrate the state from the server in universal apps, or to restore a\n   * previously serialized user session.\n   * If you use `combineReducers` to produce the root reducer function, this must be\n   * an object with the same shape as `combineReducers` keys.\n   *\n   * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n   * to enhance the store with third-party capabilities such as middleware,\n   * time travel, persistence, etc. The only store enhancer that ships with Redux\n   * is `applyMiddleware()`.\n   *\n   * @returns {Store} A Redux store that lets you read the state, dispatch actions\n   * and subscribe to changes.\n   */\n\n  function createStore(reducer, preloadedState, enhancer) {\n    var _ref2;\n\n    if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n      throw new Error('It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function.');\n    }\n\n    if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n      enhancer = preloadedState;\n      preloadedState = undefined;\n    }\n\n    if (typeof enhancer !== 'undefined') {\n      if (typeof enhancer !== 'function') {\n        throw new Error('Expected the enhancer to be a function.');\n      }\n\n      return enhancer(createStore)(reducer, preloadedState);\n    }\n\n    if (typeof reducer !== 'function') {\n      throw new Error('Expected the reducer to be a function.');\n    }\n\n    var currentReducer = reducer;\n    var currentState = preloadedState;\n    var currentListeners = [];\n    var nextListeners = currentListeners;\n    var isDispatching = false;\n    /**\n     * This makes a shallow copy of currentListeners so we can use\n     * nextListeners as a temporary list while dispatching.\n     *\n     * This prevents any bugs around consumers calling\n     * subscribe/unsubscribe in the middle of a dispatch.\n     */\n\n    function ensureCanMutateNextListeners() {\n      if (nextListeners === currentListeners) {\n        nextListeners = currentListeners.slice();\n      }\n    }\n    /**\n     * Reads the state tree managed by the store.\n     *\n     * @returns {any} The current state tree of your application.\n     */\n\n\n    function getState() {\n      if (isDispatching) {\n        throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n      }\n\n      return currentState;\n    }\n    /**\n     * Adds a change listener. It will be called any time an action is dispatched,\n     * and some part of the state tree may potentially have changed. You may then\n     * call `getState()` to read the current state tree inside the callback.\n     *\n     * You may call `dispatch()` from a change listener, with the following\n     * caveats:\n     *\n     * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n     * If you subscribe or unsubscribe while the listeners are being invoked, this\n     * will not have any effect on the `dispatch()` that is currently in progress.\n     * However, the next `dispatch()` call, whether nested or not, will use a more\n     * recent snapshot of the subscription list.\n     *\n     * 2. The listener should not expect to see all state changes, as the state\n     * might have been updated multiple times during a nested `dispatch()` before\n     * the listener is called. It is, however, guaranteed that all subscribers\n     * registered before the `dispatch()` started will be called with the latest\n     * state by the time it exits.\n     *\n     * @param {Function} listener A callback to be invoked on every dispatch.\n     * @returns {Function} A function to remove this change listener.\n     */\n\n\n    function subscribe(listener) {\n      if (typeof listener !== 'function') {\n        throw new Error('Expected the listener to be a function.');\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n      }\n\n      var isSubscribed = true;\n      ensureCanMutateNextListeners();\n      nextListeners.push(listener);\n      return function unsubscribe() {\n        if (!isSubscribed) {\n          return;\n        }\n\n        if (isDispatching) {\n          throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n        }\n\n        isSubscribed = false;\n        ensureCanMutateNextListeners();\n        var index = nextListeners.indexOf(listener);\n        nextListeners.splice(index, 1);\n        currentListeners = null;\n      };\n    }\n    /**\n     * Dispatches an action. It is the only way to trigger a state change.\n     *\n     * The `reducer` function, used to create the store, will be called with the\n     * current state tree and the given `action`. Its return value will\n     * be considered the **next** state of the tree, and the change listeners\n     * will be notified.\n     *\n     * The base implementation only supports plain object actions. If you want to\n     * dispatch a Promise, an Observable, a thunk, or something else, you need to\n     * wrap your store creating function into the corresponding middleware. For\n     * example, see the documentation for the `redux-thunk` package. Even the\n     * middleware will eventually dispatch plain object actions using this method.\n     *\n     * @param {Object} action A plain object representing “what changed”. It is\n     * a good idea to keep actions serializable so you can record and replay user\n     * sessions, or use the time travelling `redux-devtools`. An action must have\n     * a `type` property which may not be `undefined`. It is a good idea to use\n     * string constants for action types.\n     *\n     * @returns {Object} For convenience, the same action object you dispatched.\n     *\n     * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n     * return something else (for example, a Promise you can await).\n     */\n\n\n    function dispatch(action) {\n      if (!isPlainObject(action)) {\n        throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n      }\n\n      if (typeof action.type === 'undefined') {\n        throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n      }\n\n      if (isDispatching) {\n        throw new Error('Reducers may not dispatch actions.');\n      }\n\n      try {\n        isDispatching = true;\n        currentState = currentReducer(currentState, action);\n      } finally {\n        isDispatching = false;\n      }\n\n      var listeners = currentListeners = nextListeners;\n\n      for (var i = 0; i < listeners.length; i++) {\n        var listener = listeners[i];\n        listener();\n      }\n\n      return action;\n    }\n    /**\n     * Replaces the reducer currently used by the store to calculate the state.\n     *\n     * You might need this if your app implements code splitting and you want to\n     * load some of the reducers dynamically. You might also need this if you\n     * implement a hot reloading mechanism for Redux.\n     *\n     * @param {Function} nextReducer The reducer for the store to use instead.\n     * @returns {void}\n     */\n\n\n    function replaceReducer(nextReducer) {\n      if (typeof nextReducer !== 'function') {\n        throw new Error('Expected the nextReducer to be a function.');\n      }\n\n      currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n      // Any reducers that existed in both the new and old rootReducer\n      // will receive the previous state. This effectively populates\n      // the new state tree with any relevant data from the old one.\n\n      dispatch({\n        type: ActionTypes.REPLACE\n      });\n    }\n    /**\n     * Interoperability point for observable/reactive libraries.\n     * @returns {observable} A minimal observable of state changes.\n     * For more information, see the observable proposal:\n     * https://github.com/tc39/proposal-observable\n     */\n\n\n    function observable() {\n      var _ref;\n\n      var outerSubscribe = subscribe;\n      return _ref = {\n        /**\n         * The minimal observable subscription method.\n         * @param {Object} observer Any object that can be used as an observer.\n         * The observer object should have a `next` method.\n         * @returns {subscription} An object with an `unsubscribe` method that can\n         * be used to unsubscribe the observable from the store, and prevent further\n         * emission of values from the observable.\n         */\n        subscribe: function subscribe(observer) {\n          if (typeof observer !== 'object' || observer === null) {\n            throw new TypeError('Expected the observer to be an object.');\n          }\n\n          function observeState() {\n            if (observer.next) {\n              observer.next(getState());\n            }\n          }\n\n          observeState();\n          var unsubscribe = outerSubscribe(observeState);\n          return {\n            unsubscribe: unsubscribe\n          };\n        }\n      }, _ref[result] = function () {\n        return this;\n      }, _ref;\n    } // When a store is created, an \"INIT\" action is dispatched so that every\n    // reducer returns their initial state. This effectively populates\n    // the initial state tree.\n\n\n    dispatch({\n      type: ActionTypes.INIT\n    });\n    return _ref2 = {\n      dispatch: dispatch,\n      subscribe: subscribe,\n      getState: getState,\n      replaceReducer: replaceReducer\n    }, _ref2[result] = observable, _ref2;\n  }\n\n  /**\n   * Prints a warning in the console if it exists.\n   *\n   * @param {String} message The warning message.\n   * @returns {void}\n   */\n  function warning(message) {\n    /* eslint-disable no-console */\n    if (typeof console !== 'undefined' && typeof console.error === 'function') {\n      console.error(message);\n    }\n    /* eslint-enable no-console */\n\n\n    try {\n      // This error was thrown as a convenience so that if you enable\n      // \"break on all exceptions\" in your console,\n      // it would pause the execution at this line.\n      throw new Error(message);\n    } catch (e) {} // eslint-disable-line no-empty\n\n  }\n\n  /*\n   * This is a dummy function to check if the function name has been altered by minification.\n   * If the function has been minified and NODE_ENV !== 'production', warn the user.\n   */\n\n  function isCrushed() {}\n\n  if ( typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n    warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n  }\n\n  /**\r\n   * Use invariant() to assert state which your program assumes to be true.\r\n   *\r\n   * Provide sprintf-style format (only %s is supported) and arguments\r\n   * to provide information about what broke and what you were\r\n   * expecting.\r\n   *\r\n   * The invariant message will be stripped in production, but the invariant\r\n   * will remain to ensure logic does not differ in production.\r\n   */\n  function invariant(condition, format) {\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    {\n      if (format === undefined) {\n        throw new Error('invariant requires an error message argument');\n      }\n    }\n\n    if (!condition) {\n      var error;\n\n      if (format === undefined) {\n        error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n      } else {\n        var argIndex = 0;\n        error = new Error(format.replace(/%s/g, function () {\n          return args[argIndex++];\n        }));\n        error.name = 'Invariant Violation';\n      }\n\n      error.framesToPop = 1; // we don't care about invariant's own frame\n\n      throw error;\n    }\n  }\n\n  var INIT_COORDS = 'dnd-core/INIT_COORDS';\n  var BEGIN_DRAG = 'dnd-core/BEGIN_DRAG';\n  var PUBLISH_DRAG_SOURCE = 'dnd-core/PUBLISH_DRAG_SOURCE';\n  var HOVER = 'dnd-core/HOVER';\n  var DROP = 'dnd-core/DROP';\n  var END_DRAG = 'dnd-core/END_DRAG';\n\n  function setClientOffset(clientOffset, sourceClientOffset) {\n    return {\n      type: INIT_COORDS,\n      payload: {\n        sourceClientOffset: sourceClientOffset || null,\n        clientOffset: clientOffset || null\n      }\n    };\n  }\n\n  function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n  // cheap lodash replacements\n\n  /**\n   * drop-in replacement for _.get\n   * @param obj\n   * @param path\n   * @param defaultValue\n   */\n  function get(obj, path, defaultValue) {\n    return path.split('.').reduce(function (a, c) {\n      return a && a[c] ? a[c] : defaultValue || null;\n    }, obj);\n  }\n  /**\n   * drop-in replacement for _.without\n   */\n\n  function without(items, item) {\n    return items.filter(function (i) {\n      return i !== item;\n    });\n  }\n  /**\n   * drop-in replacement for _.isString\n   * @param input\n   */\n\n  function isObject(input) {\n    return _typeof(input) === 'object';\n  }\n  /**\n   * repalcement for _.xor\n   * @param itemsA\n   * @param itemsB\n   */\n\n  function xor(itemsA, itemsB) {\n    var map = new Map();\n\n    var insertItem = function insertItem(item) {\n      map.set(item, map.has(item) ? map.get(item) + 1 : 1);\n    };\n\n    itemsA.forEach(insertItem);\n    itemsB.forEach(insertItem);\n    var result = [];\n    map.forEach(function (count, key) {\n      if (count === 1) {\n        result.push(key);\n      }\n    });\n    return result;\n  }\n  /**\n   * replacement for _.intersection\n   * @param itemsA\n   * @param itemsB\n   */\n\n  function intersection(itemsA, itemsB) {\n    return itemsA.filter(function (t) {\n      return itemsB.indexOf(t) > -1;\n    });\n  }\n\n  var ResetCoordinatesAction = {\n    type: INIT_COORDS,\n    payload: {\n      clientOffset: null,\n      sourceClientOffset: null\n    }\n  };\n  function createBeginDrag(manager) {\n    return function beginDrag() {\n      var sourceIds = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        publishSource: true\n      };\n      var _options$publishSourc = options.publishSource,\n          publishSource = _options$publishSourc === void 0 ? true : _options$publishSourc,\n          clientOffset = options.clientOffset,\n          getSourceClientOffset = options.getSourceClientOffset;\n      var monitor = manager.getMonitor();\n      var registry = manager.getRegistry(); // Initialize the coordinates using the client offset\n\n      manager.dispatch(setClientOffset(clientOffset));\n      verifyInvariants(sourceIds, monitor, registry); // Get the draggable source\n\n      var sourceId = getDraggableSource(sourceIds, monitor);\n\n      if (sourceId === null) {\n        manager.dispatch(ResetCoordinatesAction);\n        return;\n      } // Get the source client offset\n\n\n      var sourceClientOffset = null;\n\n      if (clientOffset) {\n        if (!getSourceClientOffset) {\n          throw new Error('getSourceClientOffset must be defined');\n        }\n\n        verifyGetSourceClientOffsetIsFunction(getSourceClientOffset);\n        sourceClientOffset = getSourceClientOffset(sourceId);\n      } // Initialize the full coordinates\n\n\n      manager.dispatch(setClientOffset(clientOffset, sourceClientOffset));\n      var source = registry.getSource(sourceId);\n      var item = source.beginDrag(monitor, sourceId);\n      verifyItemIsObject(item);\n      registry.pinSource(sourceId);\n      var itemType = registry.getSourceType(sourceId);\n      return {\n        type: BEGIN_DRAG,\n        payload: {\n          itemType: itemType,\n          item: item,\n          sourceId: sourceId,\n          clientOffset: clientOffset || null,\n          sourceClientOffset: sourceClientOffset || null,\n          isSourcePublic: !!publishSource\n        }\n      };\n    };\n  }\n\n  function verifyInvariants(sourceIds, monitor, registry) {\n    invariant(!monitor.isDragging(), 'Cannot call beginDrag while dragging.');\n    sourceIds.forEach(function (sourceId) {\n      invariant(registry.getSource(sourceId), 'Expected sourceIds to be registered.');\n    });\n  }\n\n  function verifyGetSourceClientOffsetIsFunction(getSourceClientOffset) {\n    invariant(typeof getSourceClientOffset === 'function', 'When clientOffset is provided, getSourceClientOffset must be a function.');\n  }\n\n  function verifyItemIsObject(item) {\n    invariant(isObject(item), 'Item must be an object.');\n  }\n\n  function getDraggableSource(sourceIds, monitor) {\n    var sourceId = null;\n\n    for (var i = sourceIds.length - 1; i >= 0; i--) {\n      if (monitor.canDragSource(sourceIds[i])) {\n        sourceId = sourceIds[i];\n        break;\n      }\n    }\n\n    return sourceId;\n  }\n\n  function createPublishDragSource(manager) {\n    return function publishDragSource() {\n      var monitor = manager.getMonitor();\n\n      if (monitor.isDragging()) {\n        return {\n          type: PUBLISH_DRAG_SOURCE\n        };\n      }\n    };\n  }\n\n  function matchesType(targetType, draggedItemType) {\n    if (draggedItemType === null) {\n      return targetType === null;\n    }\n\n    return Array.isArray(targetType) ? targetType.some(function (t) {\n      return t === draggedItemType;\n    }) : targetType === draggedItemType;\n  }\n\n  function createHover(manager) {\n    return function hover(targetIdsArg) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          clientOffset = _ref.clientOffset;\n\n      verifyTargetIdsIsArray(targetIdsArg);\n      var targetIds = targetIdsArg.slice(0);\n      var monitor = manager.getMonitor();\n      var registry = manager.getRegistry();\n      checkInvariants(targetIds, monitor, registry);\n      var draggedItemType = monitor.getItemType();\n      removeNonMatchingTargetIds(targetIds, registry, draggedItemType);\n      hoverAllTargets(targetIds, monitor, registry);\n      return {\n        type: HOVER,\n        payload: {\n          targetIds: targetIds,\n          clientOffset: clientOffset || null\n        }\n      };\n    };\n  }\n\n  function verifyTargetIdsIsArray(targetIdsArg) {\n    invariant(Array.isArray(targetIdsArg), 'Expected targetIds to be an array.');\n  }\n\n  function checkInvariants(targetIds, monitor, registry) {\n    invariant(monitor.isDragging(), 'Cannot call hover while not dragging.');\n    invariant(!monitor.didDrop(), 'Cannot call hover after drop.');\n\n    for (var i = 0; i < targetIds.length; i++) {\n      var targetId = targetIds[i];\n      invariant(targetIds.lastIndexOf(targetId) === i, 'Expected targetIds to be unique in the passed array.');\n      var target = registry.getTarget(targetId);\n      invariant(target, 'Expected targetIds to be registered.');\n    }\n  }\n\n  function removeNonMatchingTargetIds(targetIds, registry, draggedItemType) {\n    // Remove those targetIds that don't match the targetType.  This\n    // fixes shallow isOver which would only be non-shallow because of\n    // non-matching targets.\n    for (var i = targetIds.length - 1; i >= 0; i--) {\n      var targetId = targetIds[i];\n      var targetType = registry.getTargetType(targetId);\n\n      if (!matchesType(targetType, draggedItemType)) {\n        targetIds.splice(i, 1);\n      }\n    }\n  }\n\n  function hoverAllTargets(targetIds, monitor, registry) {\n    // Finally call hover on all matching targets.\n    targetIds.forEach(function (targetId) {\n      var target = registry.getTarget(targetId);\n      target.hover(monitor, targetId);\n    });\n  }\n\n  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n  function createDrop(manager) {\n    return function drop() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var monitor = manager.getMonitor();\n      var registry = manager.getRegistry();\n      verifyInvariants$1(monitor);\n      var targetIds = getDroppableTargets(monitor); // Multiple actions are dispatched here, which is why this doesn't return an action\n\n      targetIds.forEach(function (targetId, index) {\n        var dropResult = determineDropResult(targetId, index, registry, monitor);\n        var action = {\n          type: DROP,\n          payload: {\n            dropResult: _objectSpread(_objectSpread({}, options), dropResult)\n          }\n        };\n        manager.dispatch(action);\n      });\n    };\n  }\n\n  function verifyInvariants$1(monitor) {\n    invariant(monitor.isDragging(), 'Cannot call drop while not dragging.');\n    invariant(!monitor.didDrop(), 'Cannot call drop twice during one drag operation.');\n  }\n\n  function determineDropResult(targetId, index, registry, monitor) {\n    var target = registry.getTarget(targetId);\n    var dropResult = target ? target.drop(monitor, targetId) : undefined;\n    verifyDropResultType(dropResult);\n\n    if (typeof dropResult === 'undefined') {\n      dropResult = index === 0 ? {} : monitor.getDropResult();\n    }\n\n    return dropResult;\n  }\n\n  function verifyDropResultType(dropResult) {\n    invariant(typeof dropResult === 'undefined' || isObject(dropResult), 'Drop result must either be an object or undefined.');\n  }\n\n  function getDroppableTargets(monitor) {\n    var targetIds = monitor.getTargetIds().filter(monitor.canDropOnTarget, monitor);\n    targetIds.reverse();\n    return targetIds;\n  }\n\n  function createEndDrag(manager) {\n    return function endDrag() {\n      var monitor = manager.getMonitor();\n      var registry = manager.getRegistry();\n      verifyIsDragging(monitor);\n      var sourceId = monitor.getSourceId();\n\n      if (sourceId != null) {\n        var source = registry.getSource(sourceId, true);\n        source.endDrag(monitor, sourceId);\n        registry.unpinSource();\n      }\n\n      return {\n        type: END_DRAG\n      };\n    };\n  }\n\n  function verifyIsDragging(monitor) {\n    invariant(monitor.isDragging(), 'Cannot call endDrag while not dragging.');\n  }\n\n  function createDragDropActions(manager) {\n    return {\n      beginDrag: createBeginDrag(manager),\n      publishDragSource: createPublishDragSource(manager),\n      hover: createHover(manager),\n      drop: createDrop(manager),\n      endDrag: createEndDrag(manager)\n    };\n  }\n\n  var strictEquality = function strictEquality(a, b) {\n    return a === b;\n  };\n  /**\n   * Determine if two cartesian coordinate offsets are equal\n   * @param offsetA\n   * @param offsetB\n   */\n\n  function areCoordsEqual(offsetA, offsetB) {\n    if (!offsetA && !offsetB) {\n      return true;\n    } else if (!offsetA || !offsetB) {\n      return false;\n    } else {\n      return offsetA.x === offsetB.x && offsetA.y === offsetB.y;\n    }\n  }\n  /**\n   * Determines if two arrays of items are equal\n   * @param a The first array of items\n   * @param b The second array of items\n   */\n\n  function areArraysEqual(a, b) {\n    var isEqual = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : strictEquality;\n\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (var i = 0; i < a.length; ++i) {\n      if (!isEqual(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$1(Object(source), true).forEach(function (key) { _defineProperty$1(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n  function _defineProperty$1(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n  var initialState = {\n    initialSourceClientOffset: null,\n    initialClientOffset: null,\n    clientOffset: null\n  };\n  function reduce() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n    var payload = action.payload;\n\n    switch (action.type) {\n      case INIT_COORDS:\n      case BEGIN_DRAG:\n        return {\n          initialSourceClientOffset: payload.sourceClientOffset,\n          initialClientOffset: payload.clientOffset,\n          clientOffset: payload.clientOffset\n        };\n\n      case HOVER:\n        if (areCoordsEqual(state.clientOffset, payload.clientOffset)) {\n          return state;\n        }\n\n        return _objectSpread$1(_objectSpread$1({}, state), {}, {\n          clientOffset: payload.clientOffset\n        });\n\n      case END_DRAG:\n      case DROP:\n        return initialState;\n\n      default:\n        return state;\n    }\n  }\n\n  var ADD_SOURCE = 'dnd-core/ADD_SOURCE';\n  var ADD_TARGET = 'dnd-core/ADD_TARGET';\n  var REMOVE_SOURCE = 'dnd-core/REMOVE_SOURCE';\n  var REMOVE_TARGET = 'dnd-core/REMOVE_TARGET';\n  function addSource(sourceId) {\n    return {\n      type: ADD_SOURCE,\n      payload: {\n        sourceId: sourceId\n      }\n    };\n  }\n  function addTarget(targetId) {\n    return {\n      type: ADD_TARGET,\n      payload: {\n        targetId: targetId\n      }\n    };\n  }\n  function removeSource(sourceId) {\n    return {\n      type: REMOVE_SOURCE,\n      payload: {\n        sourceId: sourceId\n      }\n    };\n  }\n  function removeTarget(targetId) {\n    return {\n      type: REMOVE_TARGET,\n      payload: {\n        targetId: targetId\n      }\n    };\n  }\n\n  function ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$2(Object(source), true).forEach(function (key) { _defineProperty$2(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n  function _defineProperty$2(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n  var initialState$1 = {\n    itemType: null,\n    item: null,\n    sourceId: null,\n    targetIds: [],\n    dropResult: null,\n    didDrop: false,\n    isSourcePublic: null\n  };\n  function reduce$1() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState$1;\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n    var payload = action.payload;\n\n    switch (action.type) {\n      case BEGIN_DRAG:\n        return _objectSpread$2(_objectSpread$2({}, state), {}, {\n          itemType: payload.itemType,\n          item: payload.item,\n          sourceId: payload.sourceId,\n          isSourcePublic: payload.isSourcePublic,\n          dropResult: null,\n          didDrop: false\n        });\n\n      case PUBLISH_DRAG_SOURCE:\n        return _objectSpread$2(_objectSpread$2({}, state), {}, {\n          isSourcePublic: true\n        });\n\n      case HOVER:\n        return _objectSpread$2(_objectSpread$2({}, state), {}, {\n          targetIds: payload.targetIds\n        });\n\n      case REMOVE_TARGET:\n        if (state.targetIds.indexOf(payload.targetId) === -1) {\n          return state;\n        }\n\n        return _objectSpread$2(_objectSpread$2({}, state), {}, {\n          targetIds: without(state.targetIds, payload.targetId)\n        });\n\n      case DROP:\n        return _objectSpread$2(_objectSpread$2({}, state), {}, {\n          dropResult: payload.dropResult,\n          didDrop: true,\n          targetIds: []\n        });\n\n      case END_DRAG:\n        return _objectSpread$2(_objectSpread$2({}, state), {}, {\n          itemType: null,\n          item: null,\n          sourceId: null,\n          dropResult: null,\n          didDrop: false,\n          isSourcePublic: null,\n          targetIds: []\n        });\n\n      default:\n        return state;\n    }\n  }\n\n  function reduce$2() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n\n    switch (action.type) {\n      case ADD_SOURCE:\n      case ADD_TARGET:\n        return state + 1;\n\n      case REMOVE_SOURCE:\n      case REMOVE_TARGET:\n        return state - 1;\n\n      default:\n        return state;\n    }\n  }\n\n  var NONE = [];\n  var ALL = [];\n  NONE.__IS_NONE__ = true;\n  ALL.__IS_ALL__ = true;\n  /**\n   * Determines if the given handler IDs are dirty or not.\n   *\n   * @param dirtyIds The set of dirty handler ids\n   * @param handlerIds The set of handler ids to check\n   */\n\n  function areDirty(dirtyIds, handlerIds) {\n    if (dirtyIds === NONE) {\n      return false;\n    }\n\n    if (dirtyIds === ALL || typeof handlerIds === 'undefined') {\n      return true;\n    }\n\n    var commonIds = intersection(handlerIds, dirtyIds);\n    return commonIds.length > 0;\n  }\n\n  function reduce$3() {\n\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n\n    switch (action.type) {\n      case HOVER:\n        break;\n\n      case ADD_SOURCE:\n      case ADD_TARGET:\n      case REMOVE_TARGET:\n      case REMOVE_SOURCE:\n        return NONE;\n\n      case BEGIN_DRAG:\n      case PUBLISH_DRAG_SOURCE:\n      case END_DRAG:\n      case DROP:\n      default:\n        return ALL;\n    }\n\n    var _action$payload = action.payload,\n        _action$payload$targe = _action$payload.targetIds,\n        targetIds = _action$payload$targe === void 0 ? [] : _action$payload$targe,\n        _action$payload$prevT = _action$payload.prevTargetIds,\n        prevTargetIds = _action$payload$prevT === void 0 ? [] : _action$payload$prevT;\n    var result = xor(targetIds, prevTargetIds);\n    var didChange = result.length > 0 || !areArraysEqual(targetIds, prevTargetIds);\n\n    if (!didChange) {\n      return NONE;\n    } // Check the target ids at the innermost position. If they are valid, add them\n    // to the result\n\n\n    var prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1];\n    var innermostTargetId = targetIds[targetIds.length - 1];\n\n    if (prevInnermostTargetId !== innermostTargetId) {\n      if (prevInnermostTargetId) {\n        result.push(prevInnermostTargetId);\n      }\n\n      if (innermostTargetId) {\n        result.push(innermostTargetId);\n      }\n    }\n\n    return result;\n  }\n\n  function reduce$4() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    return state + 1;\n  }\n\n  function ownKeys$3(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread$3(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$3(Object(source), true).forEach(function (key) { _defineProperty$3(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$3(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n  function _defineProperty$3(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n  function reduce$5() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n    return {\n      dirtyHandlerIds: reduce$3(state.dirtyHandlerIds, {\n        type: action.type,\n        payload: _objectSpread$3(_objectSpread$3({}, action.payload), {}, {\n          prevTargetIds: get(state, 'dragOperation.targetIds', [])\n        })\n      }),\n      dragOffset: reduce(state.dragOffset, action),\n      refCount: reduce$2(state.refCount, action),\n      dragOperation: reduce$1(state.dragOperation, action),\n      stateId: reduce$4(state.stateId)\n    };\n  }\n\n  /**\n   * Coordinate addition\n   * @param a The first coordinate\n   * @param b The second coordinate\n   */\n  function add(a, b) {\n    return {\n      x: a.x + b.x,\n      y: a.y + b.y\n    };\n  }\n  /**\n   * Coordinate subtraction\n   * @param a The first coordinate\n   * @param b The second coordinate\n   */\n\n  function subtract(a, b) {\n    return {\n      x: a.x - b.x,\n      y: a.y - b.y\n    };\n  }\n  /**\n   * Returns the cartesian distance of the drag source component's position, based on its position\n   * at the time when the current drag operation has started, and the movement difference.\n   *\n   * Returns null if no item is being dragged.\n   *\n   * @param state The offset state to compute from\n   */\n\n  function getSourceClientOffset(state) {\n    var clientOffset = state.clientOffset,\n        initialClientOffset = state.initialClientOffset,\n        initialSourceClientOffset = state.initialSourceClientOffset;\n\n    if (!clientOffset || !initialClientOffset || !initialSourceClientOffset) {\n      return null;\n    }\n\n    return subtract(add(clientOffset, initialSourceClientOffset), initialClientOffset);\n  }\n  /**\n   * Determines the x,y offset between the client offset and the initial client offset\n   *\n   * @param state The offset state to compute from\n   */\n\n  function getDifferenceFromInitialOffset(state) {\n    var clientOffset = state.clientOffset,\n        initialClientOffset = state.initialClientOffset;\n\n    if (!clientOffset || !initialClientOffset) {\n      return null;\n    }\n\n    return subtract(clientOffset, initialClientOffset);\n  }\n\n  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n  var DragDropMonitorImpl = /*#__PURE__*/function () {\n    function DragDropMonitorImpl(store, registry) {\n      _classCallCheck(this, DragDropMonitorImpl);\n\n      this.store = store;\n      this.registry = registry;\n    }\n\n    _createClass(DragDropMonitorImpl, [{\n      key: \"subscribeToStateChange\",\n      value: function subscribeToStateChange(listener) {\n        var _this = this;\n\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n          handlerIds: undefined\n        };\n        var handlerIds = options.handlerIds;\n        invariant(typeof listener === 'function', 'listener must be a function.');\n        invariant(typeof handlerIds === 'undefined' || Array.isArray(handlerIds), 'handlerIds, when specified, must be an array of strings.');\n        var prevStateId = this.store.getState().stateId;\n\n        var handleChange = function handleChange() {\n          var state = _this.store.getState();\n\n          var currentStateId = state.stateId;\n\n          try {\n            var canSkipListener = currentStateId === prevStateId || currentStateId === prevStateId + 1 && !areDirty(state.dirtyHandlerIds, handlerIds);\n\n            if (!canSkipListener) {\n              listener();\n            }\n          } finally {\n            prevStateId = currentStateId;\n          }\n        };\n\n        return this.store.subscribe(handleChange);\n      }\n    }, {\n      key: \"subscribeToOffsetChange\",\n      value: function subscribeToOffsetChange(listener) {\n        var _this2 = this;\n\n        invariant(typeof listener === 'function', 'listener must be a function.');\n        var previousState = this.store.getState().dragOffset;\n\n        var handleChange = function handleChange() {\n          var nextState = _this2.store.getState().dragOffset;\n\n          if (nextState === previousState) {\n            return;\n          }\n\n          previousState = nextState;\n          listener();\n        };\n\n        return this.store.subscribe(handleChange);\n      }\n    }, {\n      key: \"canDragSource\",\n      value: function canDragSource(sourceId) {\n        if (!sourceId) {\n          return false;\n        }\n\n        var source = this.registry.getSource(sourceId);\n        invariant(source, 'Expected to find a valid source.');\n\n        if (this.isDragging()) {\n          return false;\n        }\n\n        return source.canDrag(this, sourceId);\n      }\n    }, {\n      key: \"canDropOnTarget\",\n      value: function canDropOnTarget(targetId) {\n        // undefined on initial render\n        if (!targetId) {\n          return false;\n        }\n\n        var target = this.registry.getTarget(targetId);\n        invariant(target, 'Expected to find a valid target.');\n\n        if (!this.isDragging() || this.didDrop()) {\n          return false;\n        }\n\n        var targetType = this.registry.getTargetType(targetId);\n        var draggedItemType = this.getItemType();\n        return matchesType(targetType, draggedItemType) && target.canDrop(this, targetId);\n      }\n    }, {\n      key: \"isDragging\",\n      value: function isDragging() {\n        return Boolean(this.getItemType());\n      }\n    }, {\n      key: \"isDraggingSource\",\n      value: function isDraggingSource(sourceId) {\n        // undefined on initial render\n        if (!sourceId) {\n          return false;\n        }\n\n        var source = this.registry.getSource(sourceId, true);\n        invariant(source, 'Expected to find a valid source.');\n\n        if (!this.isDragging() || !this.isSourcePublic()) {\n          return false;\n        }\n\n        var sourceType = this.registry.getSourceType(sourceId);\n        var draggedItemType = this.getItemType();\n\n        if (sourceType !== draggedItemType) {\n          return false;\n        }\n\n        return source.isDragging(this, sourceId);\n      }\n    }, {\n      key: \"isOverTarget\",\n      value: function isOverTarget(targetId) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n          shallow: false\n        };\n\n        // undefined on initial render\n        if (!targetId) {\n          return false;\n        }\n\n        var shallow = options.shallow;\n\n        if (!this.isDragging()) {\n          return false;\n        }\n\n        var targetType = this.registry.getTargetType(targetId);\n        var draggedItemType = this.getItemType();\n\n        if (draggedItemType && !matchesType(targetType, draggedItemType)) {\n          return false;\n        }\n\n        var targetIds = this.getTargetIds();\n\n        if (!targetIds.length) {\n          return false;\n        }\n\n        var index = targetIds.indexOf(targetId);\n\n        if (shallow) {\n          return index === targetIds.length - 1;\n        } else {\n          return index > -1;\n        }\n      }\n    }, {\n      key: \"getItemType\",\n      value: function getItemType() {\n        return this.store.getState().dragOperation.itemType;\n      }\n    }, {\n      key: \"getItem\",\n      value: function getItem() {\n        return this.store.getState().dragOperation.item;\n      }\n    }, {\n      key: \"getSourceId\",\n      value: function getSourceId() {\n        return this.store.getState().dragOperation.sourceId;\n      }\n    }, {\n      key: \"getTargetIds\",\n      value: function getTargetIds() {\n        return this.store.getState().dragOperation.targetIds;\n      }\n    }, {\n      key: \"getDropResult\",\n      value: function getDropResult() {\n        return this.store.getState().dragOperation.dropResult;\n      }\n    }, {\n      key: \"didDrop\",\n      value: function didDrop() {\n        return this.store.getState().dragOperation.didDrop;\n      }\n    }, {\n      key: \"isSourcePublic\",\n      value: function isSourcePublic() {\n        return Boolean(this.store.getState().dragOperation.isSourcePublic);\n      }\n    }, {\n      key: \"getInitialClientOffset\",\n      value: function getInitialClientOffset() {\n        return this.store.getState().dragOffset.initialClientOffset;\n      }\n    }, {\n      key: \"getInitialSourceClientOffset\",\n      value: function getInitialSourceClientOffset() {\n        return this.store.getState().dragOffset.initialSourceClientOffset;\n      }\n    }, {\n      key: \"getClientOffset\",\n      value: function getClientOffset() {\n        return this.store.getState().dragOffset.clientOffset;\n      }\n    }, {\n      key: \"getSourceClientOffset\",\n      value: function getSourceClientOffset$1() {\n        return getSourceClientOffset(this.store.getState().dragOffset);\n      }\n    }, {\n      key: \"getDifferenceFromInitialOffset\",\n      value: function getDifferenceFromInitialOffset$1() {\n        return getDifferenceFromInitialOffset(this.store.getState().dragOffset);\n      }\n    }]);\n\n    return DragDropMonitorImpl;\n  }();\n\n  var nextUniqueId = 0;\n  function getNextUniqueId() {\n    return nextUniqueId++;\n  }\n\n  function _typeof$1(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$1 = function _typeof(obj) { return typeof obj; }; } else { _typeof$1 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$1(obj); }\n  function validateSourceContract(source) {\n    invariant(typeof source.canDrag === 'function', 'Expected canDrag to be a function.');\n    invariant(typeof source.beginDrag === 'function', 'Expected beginDrag to be a function.');\n    invariant(typeof source.endDrag === 'function', 'Expected endDrag to be a function.');\n  }\n  function validateTargetContract(target) {\n    invariant(typeof target.canDrop === 'function', 'Expected canDrop to be a function.');\n    invariant(typeof target.hover === 'function', 'Expected hover to be a function.');\n    invariant(typeof target.drop === 'function', 'Expected beginDrag to be a function.');\n  }\n  function validateType(type, allowArray) {\n    if (allowArray && Array.isArray(type)) {\n      type.forEach(function (t) {\n        return validateType(t, false);\n      });\n      return;\n    }\n\n    invariant(typeof type === 'string' || _typeof$1(type) === 'symbol', allowArray ? 'Type can only be a string, a symbol, or an array of either.' : 'Type can only be a string or a symbol.');\n  }\n\n  // Use the fastest means possible to execute a task in its own turn, with\n  // priority over other events including IO, animation, reflow, and redraw\n  // events in browsers.\n  //\n  // An exception thrown by a task will permanently interrupt the processing of\n  // subsequent tasks. The higher level `asap` function ensures that if an\n  // exception is thrown by a task, that the task queue will continue flushing as\n  // soon as possible, but if you use `rawAsap` directly, you are responsible to\n  // either ensure that no exceptions are thrown from your task, or to manually\n  // call `rawAsap.requestFlush` if an exception is thrown.\n  function rawAsap(task) {\n    if (!queue.length) {\n      requestFlush();\n    } // Equivalent to push, but avoids a function call.\n\n\n    queue[queue.length] = task;\n  }\n  var queue = []; // Once a flush has been requested, no further calls to `requestFlush` are\n  // off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n  // the event queue before yielding to the browser's own event loop.\n\n  var requestFlush; // The position of the next task to execute in the task queue. This is\n  // preserved between calls to `flush` so that it can be resumed if\n  // a task throws an exception.\n\n  var index = 0; // If a task schedules additional tasks recursively, the task queue can grow\n  // unbounded. To prevent memory exhaustion, the task queue will periodically\n  // truncate already-completed tasks.\n\n  var capacity = 1024; // The flush function processes all tasks that have been scheduled with\n  // `rawAsap` unless and until one of those tasks throws an exception.\n  // If a task throws an exception, `flush` ensures that its state will remain\n  // consistent and will resume where it left off when called again.\n  // However, `flush` does not make any arrangements to be called again if an\n  // exception is thrown.\n\n  function flush() {\n    while (index < queue.length) {\n      var currentIndex = index; // Advance the index before calling the task. This ensures that we will\n      // begin flushing on the next task the task throws an error.\n\n      index = index + 1;\n      queue[currentIndex].call(); // Prevent leaking memory for long chains of recursive calls to `asap`.\n      // If we call `asap` within tasks scheduled by `asap`, the queue will\n      // grow, but to avoid an O(n) walk for every task we execute, we don't\n      // shift tasks off the queue after they have been executed.\n      // Instead, we periodically shift 1024 tasks off the queue.\n\n      if (index > capacity) {\n        // Manually shift all values starting at the index back to the\n        // beginning of the queue.\n        for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n          queue[scan] = queue[scan + index];\n        }\n\n        queue.length -= index;\n        index = 0;\n      }\n    }\n\n    queue.length = 0;\n    index = 0;\n  } // `requestFlush` is implemented using a strategy based on data collected from\n  // every available SauceLabs Selenium web driver worker at time of writing.\n  // https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n  // Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n  // have WebKitMutationObserver but not un-prefixed MutationObserver.\n  // Must use `global` or `self` instead of `window` to work in both frames and web\n  // workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n  /* globals self */\n\n\n  var scope = typeof global !== 'undefined' ? global : self;\n  var BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver; // MutationObservers are desirable because they have high priority and work\n  // reliably everywhere they are implemented.\n  // They are implemented in all modern browsers.\n  //\n  // - Android 4-4.3\n  // - Chrome 26-34\n  // - Firefox 14-29\n  // - Internet Explorer 11\n  // - iPad Safari 6-7.1\n  // - iPhone Safari 7-7.1\n  // - Safari 6-7\n\n  if (typeof BrowserMutationObserver === 'function') {\n    requestFlush = makeRequestCallFromMutationObserver(flush); // MessageChannels are desirable because they give direct access to the HTML\n    // task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n    // 11-12, and in web workers in many engines.\n    // Although message channels yield to any queued rendering and IO tasks, they\n    // would be better than imposing the 4ms delay of timers.\n    // However, they do not work reliably in Internet Explorer or Safari.\n    // Internet Explorer 10 is the only browser that has setImmediate but does\n    // not have MutationObservers.\n    // Although setImmediate yields to the browser's renderer, it would be\n    // preferrable to falling back to setTimeout since it does not have\n    // the minimum 4ms penalty.\n    // Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n    // Desktop to a lesser extent) that renders both setImmediate and\n    // MessageChannel useless for the purposes of ASAP.\n    // https://github.com/kriskowal/q/issues/396\n    // Timers are implemented universally.\n    // We fall back to timers in workers in most engines, and in foreground\n    // contexts in the following browsers.\n    // However, note that even this simple case requires nuances to operate in a\n    // broad spectrum of browsers.\n    //\n    // - Firefox 3-13\n    // - Internet Explorer 6-9\n    // - iPad Safari 4.3\n    // - Lynx 2.8.7\n  } else {\n    requestFlush = makeRequestCallFromTimer(flush);\n  } // `requestFlush` requests that the high priority event queue be flushed as\n  // soon as possible.\n  // This is useful to prevent an error thrown in a task from stalling the event\n  // queue if the exception handled by Node.js’s\n  // `process.on(\"uncaughtException\")` or by a domain.\n\n\n  rawAsap.requestFlush = requestFlush; // To request a high priority event, we induce a mutation observer by toggling\n  // the text of a text node between \"1\" and \"-1\".\n\n  function makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode('');\n    observer.observe(node, {\n      characterData: true\n    });\n    return function requestCall() {\n      toggle = -toggle;\n      node.data = toggle;\n    };\n  } // The message channel technique was discovered by Malte Ubl and was the\n  // original foundation for this library.\n  // http://www.nonblocking.io/2011/06/windownexttick.html\n  // Safari 6.0.5 (at least) intermittently fails to create message ports on a\n  // page's first load. Thankfully, this version of Safari supports\n  // MutationObservers, so we don't need to fall back in that case.\n  // function makeRequestCallFromMessageChannel(callback) {\n  //     var channel = new MessageChannel();\n  //     channel.port1.onmessage = callback;\n  //     return function requestCall() {\n  //         channel.port2.postMessage(0);\n  //     };\n  // }\n  // For reasons explained above, we are also unable to use `setImmediate`\n  // under any circumstances.\n  // Even if we were, there is another bug in Internet Explorer 10.\n  // It is not sufficient to assign `setImmediate` to `requestFlush` because\n  // `setImmediate` must be called *by name* and therefore must be wrapped in a\n  // closure.\n  // Never forget.\n  // function makeRequestCallFromSetImmediate(callback) {\n  //     return function requestCall() {\n  //         setImmediate(callback);\n  //     };\n  // }\n  // Safari 6.0 has a problem where timers will get lost while the user is\n  // scrolling. This problem does not impact ASAP because Safari 6.0 supports\n  // mutation observers, so that implementation is used instead.\n  // However, if we ever elect to use timers in Safari, the prevalent work-around\n  // is to add a scroll event listener that calls for a flush.\n  // `setTimeout` does not call the passed callback if the delay is less than\n  // approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n  // even then.\n\n\n  function makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n      // We dispatch a timeout with a specified delay of 0 for engines that\n      // can reliably accommodate that request. This will usually be snapped\n      // to a 4 milisecond delay, but once we're flushing, there's no delay\n      // between events.\n      var timeoutHandle = setTimeout(handleTimer, 0); // However, since this timer gets frequently dropped in Firefox\n      // workers, we enlist an interval handle that will try to fire\n      // an event 20 times per second until it succeeds.\n\n      var intervalHandle = setInterval(handleTimer, 50);\n\n      function handleTimer() {\n        // Whichever timer succeeds will cancel both timers and\n        // execute the callback.\n        clearTimeout(timeoutHandle);\n        clearInterval(intervalHandle);\n        callback();\n      }\n    };\n  } // This is for `asap.js` only.\n  // Its name will be periodically randomized to break any code that depends on\n  // its existence.\n\n\n  rawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer; // ASAP was originally a nextTick shim included in Q. This was factored out\n  // into this ASAP package. It was later adapted to RSVP which made further\n  // amendments. These decisions, particularly to marginalize MessageChannel and\n  // to capture the MutationObserver implementation in a closure, were integrated\n  // back into ASAP proper.\n  // https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n  // RawTasks are recycled to reduce GC churn.\n\n  var freeTasks = []; // We queue errors to ensure they are thrown in right order (FIFO).\n  // Array-as-queue is good enough here, since we are just dealing with exceptions.\n\n  var pendingErrors = [];\n  var requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);\n\n  function throwFirstError() {\n    if (pendingErrors.length) {\n      throw pendingErrors.shift();\n    }\n  }\n  /**\n   * Calls a task as soon as possible after returning, in its own event, with priority\n   * over other events like animation, reflow, and repaint. An error thrown from an\n   * event will not interrupt, nor even substantially slow down the processing of\n   * other events, but will be rather postponed to a lower priority event.\n   * @param {{call}} task A callable object, typically a function that takes no\n   * arguments.\n   */\n\n\n  function asap(task) {\n    var rawTask;\n\n    if (freeTasks.length) {\n      rawTask = freeTasks.pop();\n    } else {\n      rawTask = new RawTask();\n    }\n\n    rawTask.task = task;\n    rawAsap(rawTask);\n  } // We wrap tasks with recyclable task objects.  A task object implements\n  // `call`, just like a function.\n\n  var RawTask =\n  /** @class */\n  function () {\n    function RawTask() {}\n\n    RawTask.prototype.call = function () {\n      try {\n        this.task.call();\n      } catch (error) {\n        if (asap.onerror) {\n          // This hook exists purely for testing purposes.\n          // Its name will be periodically randomized to break any code that\n          // depends on its existence.\n          asap.onerror(error);\n        } else {\n          // In a web browser, exceptions are not fatal. However, to avoid\n          // slowing down the queue of pending tasks, we rethrow the error in a\n          // lower priority turn.\n          pendingErrors.push(error);\n          requestErrorThrow();\n        }\n      } finally {\n        this.task = null;\n        freeTasks[freeTasks.length] = this;\n      }\n    };\n\n    return RawTask;\n  }();\n\n  function _classCallCheck$1(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties$1(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass$1(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties$1(Constructor.prototype, protoProps); if (staticProps) _defineProperties$1(Constructor, staticProps); return Constructor; }\n\n  function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\n  function _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\n  function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\n  function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n  function _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\n  function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n  function getNextHandlerId(role) {\n    var id = getNextUniqueId().toString();\n\n    switch (role) {\n      case HandlerRole.SOURCE:\n        return \"S\".concat(id);\n\n      case HandlerRole.TARGET:\n        return \"T\".concat(id);\n\n      default:\n        throw new Error(\"Unknown Handler Role: \".concat(role));\n    }\n  }\n\n  function parseRoleFromHandlerId(handlerId) {\n    switch (handlerId[0]) {\n      case 'S':\n        return HandlerRole.SOURCE;\n\n      case 'T':\n        return HandlerRole.TARGET;\n\n      default:\n        invariant(false, \"Cannot parse handler ID: \".concat(handlerId));\n    }\n  }\n\n  function mapContainsValue(map, searchValue) {\n    var entries = map.entries();\n    var isDone = false;\n\n    do {\n      var _entries$next = entries.next(),\n          done = _entries$next.done,\n          _entries$next$value = _slicedToArray(_entries$next.value, 2),\n          value = _entries$next$value[1];\n\n      if (value === searchValue) {\n        return true;\n      }\n\n      isDone = !!done;\n    } while (!isDone);\n\n    return false;\n  }\n\n  var HandlerRegistryImpl = /*#__PURE__*/function () {\n    function HandlerRegistryImpl(store) {\n      _classCallCheck$1(this, HandlerRegistryImpl);\n\n      this.types = new Map();\n      this.dragSources = new Map();\n      this.dropTargets = new Map();\n      this.pinnedSourceId = null;\n      this.pinnedSource = null;\n      this.store = store;\n    }\n\n    _createClass$1(HandlerRegistryImpl, [{\n      key: \"addSource\",\n      value: function addSource$1(type, source) {\n        validateType(type);\n        validateSourceContract(source);\n        var sourceId = this.addHandler(HandlerRole.SOURCE, type, source);\n        this.store.dispatch(addSource(sourceId));\n        return sourceId;\n      }\n    }, {\n      key: \"addTarget\",\n      value: function addTarget$1(type, target) {\n        validateType(type, true);\n        validateTargetContract(target);\n        var targetId = this.addHandler(HandlerRole.TARGET, type, target);\n        this.store.dispatch(addTarget(targetId));\n        return targetId;\n      }\n    }, {\n      key: \"containsHandler\",\n      value: function containsHandler(handler) {\n        return mapContainsValue(this.dragSources, handler) || mapContainsValue(this.dropTargets, handler);\n      }\n    }, {\n      key: \"getSource\",\n      value: function getSource(sourceId) {\n        var includePinned = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n        var isPinned = includePinned && sourceId === this.pinnedSourceId;\n        var source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId);\n        return source;\n      }\n    }, {\n      key: \"getTarget\",\n      value: function getTarget(targetId) {\n        invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n        return this.dropTargets.get(targetId);\n      }\n    }, {\n      key: \"getSourceType\",\n      value: function getSourceType(sourceId) {\n        invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n        return this.types.get(sourceId);\n      }\n    }, {\n      key: \"getTargetType\",\n      value: function getTargetType(targetId) {\n        invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n        return this.types.get(targetId);\n      }\n    }, {\n      key: \"isSourceId\",\n      value: function isSourceId(handlerId) {\n        var role = parseRoleFromHandlerId(handlerId);\n        return role === HandlerRole.SOURCE;\n      }\n    }, {\n      key: \"isTargetId\",\n      value: function isTargetId(handlerId) {\n        var role = parseRoleFromHandlerId(handlerId);\n        return role === HandlerRole.TARGET;\n      }\n    }, {\n      key: \"removeSource\",\n      value: function removeSource$1(sourceId) {\n        var _this = this;\n\n        invariant(this.getSource(sourceId), 'Expected an existing source.');\n        this.store.dispatch(removeSource(sourceId));\n        asap(function () {\n          _this.dragSources.delete(sourceId);\n\n          _this.types.delete(sourceId);\n        });\n      }\n    }, {\n      key: \"removeTarget\",\n      value: function removeTarget$1(targetId) {\n        invariant(this.getTarget(targetId), 'Expected an existing target.');\n        this.store.dispatch(removeTarget(targetId));\n        this.dropTargets.delete(targetId);\n        this.types.delete(targetId);\n      }\n    }, {\n      key: \"pinSource\",\n      value: function pinSource(sourceId) {\n        var source = this.getSource(sourceId);\n        invariant(source, 'Expected an existing source.');\n        this.pinnedSourceId = sourceId;\n        this.pinnedSource = source;\n      }\n    }, {\n      key: \"unpinSource\",\n      value: function unpinSource() {\n        invariant(this.pinnedSource, 'No source is pinned at the time.');\n        this.pinnedSourceId = null;\n        this.pinnedSource = null;\n      }\n    }, {\n      key: \"addHandler\",\n      value: function addHandler(role, type, handler) {\n        var id = getNextHandlerId(role);\n        this.types.set(id, type);\n\n        if (role === HandlerRole.SOURCE) {\n          this.dragSources.set(id, handler);\n        } else if (role === HandlerRole.TARGET) {\n          this.dropTargets.set(id, handler);\n        }\n\n        return id;\n      }\n    }]);\n\n    return HandlerRegistryImpl;\n  }();\n\n  function _classCallCheck$2(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties$2(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass$2(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties$2(Constructor.prototype, protoProps); if (staticProps) _defineProperties$2(Constructor, staticProps); return Constructor; }\n\n  function makeStoreInstance(debugMode) {\n    // TODO: if we ever make a react-native version of this,\n    // we'll need to consider how to pull off dev-tooling\n    var reduxDevTools = typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION__;\n    return createStore(reduce$5, debugMode && reduxDevTools && reduxDevTools({\n      name: 'dnd-core',\n      instanceId: 'dnd-core'\n    }));\n  }\n\n  var DragDropManagerImpl = /*#__PURE__*/function () {\n    function DragDropManagerImpl() {\n      var _this = this;\n\n      var debugMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      _classCallCheck$2(this, DragDropManagerImpl);\n\n      this.isSetUp = false;\n\n      this.handleRefCountChange = function () {\n        var shouldSetUp = _this.store.getState().refCount > 0;\n\n        if (_this.backend) {\n          if (shouldSetUp && !_this.isSetUp) {\n            _this.backend.setup();\n\n            _this.isSetUp = true;\n          } else if (!shouldSetUp && _this.isSetUp) {\n            _this.backend.teardown();\n\n            _this.isSetUp = false;\n          }\n        }\n      };\n\n      var store = makeStoreInstance(debugMode);\n      this.store = store;\n      this.monitor = new DragDropMonitorImpl(store, new HandlerRegistryImpl(store));\n      store.subscribe(this.handleRefCountChange);\n    }\n\n    _createClass$2(DragDropManagerImpl, [{\n      key: \"receiveBackend\",\n      value: function receiveBackend(backend) {\n        this.backend = backend;\n      }\n    }, {\n      key: \"getMonitor\",\n      value: function getMonitor() {\n        return this.monitor;\n      }\n    }, {\n      key: \"getBackend\",\n      value: function getBackend() {\n        return this.backend;\n      }\n    }, {\n      key: \"getRegistry\",\n      value: function getRegistry() {\n        return this.monitor.registry;\n      }\n    }, {\n      key: \"getActions\",\n      value: function getActions() {\n        /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n        var manager = this;\n        var dispatch = this.store.dispatch;\n\n        function bindActionCreator(actionCreator) {\n          return function () {\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n              args[_key] = arguments[_key];\n            }\n\n            var action = actionCreator.apply(manager, args);\n\n            if (typeof action !== 'undefined') {\n              dispatch(action);\n            }\n          };\n        }\n\n        var actions = createDragDropActions(this);\n        return Object.keys(actions).reduce(function (boundActions, key) {\n          var action = actions[key];\n          boundActions[key] = bindActionCreator(action);\n          return boundActions;\n        }, {});\n      }\n    }, {\n      key: \"dispatch\",\n      value: function dispatch(action) {\n        this.store.dispatch(action);\n      }\n    }]);\n\n    return DragDropManagerImpl;\n  }();\n\n  function createDragDropManager(backendFactory, globalContext, backendOptions, debugMode) {\n    var manager = new DragDropManagerImpl(debugMode);\n    var backend = backendFactory(manager, globalContext, backendOptions);\n    manager.receiveBackend(backend);\n    return manager;\n  }\n\n  /**\n   * Create the React Context\n   */\n\n  var DndContext = React.createContext({\n    dragDropManager: undefined\n  });\n  /**\n   * Creates the context object we're providing\n   * @param backend\n   * @param context\n   */\n\n  function createDndContext(backend, context, options, debugMode) {\n    return {\n      dragDropManager: createDragDropManager(backend, context, options, debugMode)\n    };\n  }\n\n  function _slicedToArray$1(arr, i) { return _arrayWithHoles$1(arr) || _iterableToArrayLimit$1(arr, i) || _unsupportedIterableToArray$1(arr, i) || _nonIterableRest$1(); }\n\n  function _nonIterableRest$1() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\n  function _unsupportedIterableToArray$1(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray$1(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$1(o, minLen); }\n\n  function _arrayLikeToArray$1(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n  function _iterableToArrayLimit$1(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\n  function _arrayWithHoles$1(arr) { if (Array.isArray(arr)) return arr; }\n\n  function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\n  function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n  var refCount = 0;\n  /**\n   * A React component that provides the React-DnD context\n   */\n\n  var DndProvider = React.memo(function (_ref) {\n    var children = _ref.children,\n        props = _objectWithoutProperties(_ref, [\"children\"]);\n\n    var _getDndContextValue = getDndContextValue(props),\n        _getDndContextValue2 = _slicedToArray$1(_getDndContextValue, 2),\n        manager = _getDndContextValue2[0],\n        isGlobalInstance = _getDndContextValue2[1]; // memoized from props\n\n    /**\n     * If the global context was used to store the DND context\n     * then where theres no more references to it we should\n     * clean it up to avoid memory leaks\n     */\n\n\n    React.useEffect(function () {\n      if (isGlobalInstance) {\n        refCount++;\n      }\n\n      return function () {\n        if (isGlobalInstance) {\n          refCount--;\n\n          if (refCount === 0) {\n            var context = getGlobalContext();\n            context[instanceSymbol] = null;\n          }\n        }\n      };\n    }, []);\n    return React.createElement(DndContext.Provider, {\n      value: manager\n    }, children);\n  });\n  DndProvider.displayName = 'DndProvider';\n\n  function getDndContextValue(props) {\n    if ('manager' in props) {\n      var _manager = {\n        dragDropManager: props.manager\n      };\n      return [_manager, false];\n    }\n\n    var manager = createSingletonDndContext(props.backend, props.context, props.options, props.debugMode);\n    var isGlobalInstance = !props.context;\n    return [manager, isGlobalInstance];\n  }\n\n  var instanceSymbol = Symbol.for('__REACT_DND_CONTEXT_INSTANCE__');\n\n  function createSingletonDndContext(backend) {\n    var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getGlobalContext();\n    var options = arguments.length > 2 ? arguments[2] : undefined;\n    var debugMode = arguments.length > 3 ? arguments[3] : undefined;\n    var ctx = context;\n\n    if (!ctx[instanceSymbol]) {\n      ctx[instanceSymbol] = createDndContext(backend, context, options, debugMode);\n    }\n\n    return ctx[instanceSymbol];\n  }\n\n  function getGlobalContext() {\n    return typeof global !== 'undefined' ? global : window;\n  }\n\n  /*\n   * A utility for rendering a drag preview image\n   */\n\n  var DragPreviewImage = React.memo(function (_ref) {\n    var connect = _ref.connect,\n        src = _ref.src;\n    React.useEffect(function () {\n      if (typeof Image === 'undefined') return;\n      var connected = false;\n      var img = new Image();\n      img.src = src;\n\n      img.onload = function () {\n        connect(img);\n        connected = true;\n      };\n\n      return function () {\n        if (connected) {\n          connect(null);\n        }\n      };\n    });\n    return null;\n  });\n  DragPreviewImage.displayName = 'DragPreviewImage';\n\n  var useIsomorphicLayoutEffect = typeof window !== 'undefined' ? React.useLayoutEffect : React.useEffect;\n\n  function shallowEqual(objA, objB, compare, compareContext) {\n    var compareResult = compare ? compare.call(compareContext, objA, objB) : void 0;\n\n    if (compareResult !== void 0) {\n      return !!compareResult;\n    }\n\n    if (objA === objB) {\n      return true;\n    }\n\n    if (typeof objA !== 'object' || !objA || typeof objB !== 'object' || !objB) {\n      return false;\n    }\n\n    var keysA = Object.keys(objA);\n    var keysB = Object.keys(objB);\n\n    if (keysA.length !== keysB.length) {\n      return false;\n    }\n\n    var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB); // Test for A's keys different from B.\n\n    for (var idx = 0; idx < keysA.length; idx++) {\n      var key = keysA[idx];\n\n      if (!bHasOwnProperty(key)) {\n        return false;\n      }\n\n      var valueA = objA[key];\n      var valueB = objB[key];\n      compareResult = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;\n\n      if (compareResult === false || compareResult === void 0 && valueA !== valueB) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function _slicedToArray$2(arr, i) { return _arrayWithHoles$2(arr) || _iterableToArrayLimit$2(arr, i) || _unsupportedIterableToArray$2(arr, i) || _nonIterableRest$2(); }\n\n  function _nonIterableRest$2() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\n  function _unsupportedIterableToArray$2(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray$2(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$2(o, minLen); }\n\n  function _arrayLikeToArray$2(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n  function _iterableToArrayLimit$2(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\n  function _arrayWithHoles$2(arr) { if (Array.isArray(arr)) return arr; }\n  /**\n   *\n   * @param monitor The monitor to collect state from\n   * @param collect The collecting function\n   * @param onUpdate A method to invoke when updates occur\n   */\n\n  function useCollector(monitor, collect, onUpdate) {\n    var _useState = React.useState(function () {\n      return collect(monitor);\n    }),\n        _useState2 = _slicedToArray$2(_useState, 2),\n        collected = _useState2[0],\n        setCollected = _useState2[1];\n\n    var updateCollected = React.useCallback(function () {\n      var nextValue = collect(monitor);\n\n      if (!shallowEqual(collected, nextValue)) {\n        setCollected(nextValue);\n\n        if (onUpdate) {\n          onUpdate();\n        }\n      }\n    }, [collected, monitor, onUpdate]); // update the collected properties after the first render\n    // and the components are attached to dnd-core\n\n    useIsomorphicLayoutEffect(updateCollected, []);\n    return [collected, updateCollected];\n  }\n\n  function _slicedToArray$3(arr, i) { return _arrayWithHoles$3(arr) || _iterableToArrayLimit$3(arr, i) || _unsupportedIterableToArray$3(arr, i) || _nonIterableRest$3(); }\n\n  function _nonIterableRest$3() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\n  function _unsupportedIterableToArray$3(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray$3(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$3(o, minLen); }\n\n  function _arrayLikeToArray$3(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n  function _iterableToArrayLimit$3(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\n  function _arrayWithHoles$3(arr) { if (Array.isArray(arr)) return arr; }\n  function useMonitorOutput(monitor, collect, onCollect) {\n    var _useCollector = useCollector(monitor, collect, onCollect),\n        _useCollector2 = _slicedToArray$3(_useCollector, 2),\n        collected = _useCollector2[0],\n        updateCollected = _useCollector2[1];\n\n    useIsomorphicLayoutEffect(function subscribeToMonitorStateChange() {\n      var handlerId = monitor.getHandlerId();\n\n      if (handlerId == null) {\n        return undefined;\n      }\n\n      return monitor.subscribeToStateChange(updateCollected, {\n        handlerIds: [handlerId]\n      });\n    }, [monitor, updateCollected]);\n    return collected;\n  }\n\n  function registerTarget(type, target, manager) {\n    var registry = manager.getRegistry();\n    var targetId = registry.addTarget(type, target);\n    return [targetId, function () {\n      return registry.removeTarget(targetId);\n    }];\n  }\n  function registerSource(type, source, manager) {\n    var registry = manager.getRegistry();\n    var sourceId = registry.addSource(type, source);\n    return [sourceId, function () {\n      return registry.removeSource(sourceId);\n    }];\n  }\n\n  /**\n   * A hook to retrieve the DragDropManager from Context\n   */\n\n  function useDragDropManager() {\n    var _useContext = React.useContext(DndContext),\n        dragDropManager = _useContext.dragDropManager;\n\n    invariant(dragDropManager != null, 'Expected drag drop context');\n    return dragDropManager;\n  }\n\n  function _classCallCheck$3(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties$3(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass$3(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties$3(Constructor.prototype, protoProps); if (staticProps) _defineProperties$3(Constructor, staticProps); return Constructor; }\n  var isCallingCanDrag = false;\n  var isCallingIsDragging = false;\n  var DragSourceMonitorImpl = /*#__PURE__*/function () {\n    function DragSourceMonitorImpl(manager) {\n      _classCallCheck$3(this, DragSourceMonitorImpl);\n\n      this.sourceId = null;\n      this.internalMonitor = manager.getMonitor();\n    }\n\n    _createClass$3(DragSourceMonitorImpl, [{\n      key: \"receiveHandlerId\",\n      value: function receiveHandlerId(sourceId) {\n        this.sourceId = sourceId;\n      }\n    }, {\n      key: \"getHandlerId\",\n      value: function getHandlerId() {\n        return this.sourceId;\n      }\n    }, {\n      key: \"canDrag\",\n      value: function canDrag() {\n        invariant(!isCallingCanDrag, 'You may not call monitor.canDrag() inside your canDrag() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n        try {\n          isCallingCanDrag = true;\n          return this.internalMonitor.canDragSource(this.sourceId);\n        } finally {\n          isCallingCanDrag = false;\n        }\n      }\n    }, {\n      key: \"isDragging\",\n      value: function isDragging() {\n        if (!this.sourceId) {\n          return false;\n        }\n\n        invariant(!isCallingIsDragging, 'You may not call monitor.isDragging() inside your isDragging() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n        try {\n          isCallingIsDragging = true;\n          return this.internalMonitor.isDraggingSource(this.sourceId);\n        } finally {\n          isCallingIsDragging = false;\n        }\n      }\n    }, {\n      key: \"subscribeToStateChange\",\n      value: function subscribeToStateChange(listener, options) {\n        return this.internalMonitor.subscribeToStateChange(listener, options);\n      }\n    }, {\n      key: \"isDraggingSource\",\n      value: function isDraggingSource(sourceId) {\n        return this.internalMonitor.isDraggingSource(sourceId);\n      }\n    }, {\n      key: \"isOverTarget\",\n      value: function isOverTarget(targetId, options) {\n        return this.internalMonitor.isOverTarget(targetId, options);\n      }\n    }, {\n      key: \"getTargetIds\",\n      value: function getTargetIds() {\n        return this.internalMonitor.getTargetIds();\n      }\n    }, {\n      key: \"isSourcePublic\",\n      value: function isSourcePublic() {\n        return this.internalMonitor.isSourcePublic();\n      }\n    }, {\n      key: \"getSourceId\",\n      value: function getSourceId() {\n        return this.internalMonitor.getSourceId();\n      }\n    }, {\n      key: \"subscribeToOffsetChange\",\n      value: function subscribeToOffsetChange(listener) {\n        return this.internalMonitor.subscribeToOffsetChange(listener);\n      }\n    }, {\n      key: \"canDragSource\",\n      value: function canDragSource(sourceId) {\n        return this.internalMonitor.canDragSource(sourceId);\n      }\n    }, {\n      key: \"canDropOnTarget\",\n      value: function canDropOnTarget(targetId) {\n        return this.internalMonitor.canDropOnTarget(targetId);\n      }\n    }, {\n      key: \"getItemType\",\n      value: function getItemType() {\n        return this.internalMonitor.getItemType();\n      }\n    }, {\n      key: \"getItem\",\n      value: function getItem() {\n        return this.internalMonitor.getItem();\n      }\n    }, {\n      key: \"getDropResult\",\n      value: function getDropResult() {\n        return this.internalMonitor.getDropResult();\n      }\n    }, {\n      key: \"didDrop\",\n      value: function didDrop() {\n        return this.internalMonitor.didDrop();\n      }\n    }, {\n      key: \"getInitialClientOffset\",\n      value: function getInitialClientOffset() {\n        return this.internalMonitor.getInitialClientOffset();\n      }\n    }, {\n      key: \"getInitialSourceClientOffset\",\n      value: function getInitialSourceClientOffset() {\n        return this.internalMonitor.getInitialSourceClientOffset();\n      }\n    }, {\n      key: \"getSourceClientOffset\",\n      value: function getSourceClientOffset() {\n        return this.internalMonitor.getSourceClientOffset();\n      }\n    }, {\n      key: \"getClientOffset\",\n      value: function getClientOffset() {\n        return this.internalMonitor.getClientOffset();\n      }\n    }, {\n      key: \"getDifferenceFromInitialOffset\",\n      value: function getDifferenceFromInitialOffset() {\n        return this.internalMonitor.getDifferenceFromInitialOffset();\n      }\n    }]);\n\n    return DragSourceMonitorImpl;\n  }();\n\n  function setRef(ref, node) {\n    if (typeof ref === 'function') {\n      ref(node);\n    } else {\n      ref.current = node;\n    }\n  }\n\n  function cloneWithRef(element, newRef) {\n    var previousRef = element.ref;\n    invariant(typeof previousRef !== 'string', 'Cannot connect React DnD to an element with an existing string ref. ' + 'Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. ' + 'Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute');\n\n    if (!previousRef) {\n      // When there is no ref on the element, use the new ref directly\n      return React.cloneElement(element, {\n        ref: newRef\n      });\n    } else {\n      return React.cloneElement(element, {\n        ref: function ref(node) {\n          setRef(previousRef, node);\n          setRef(newRef, node);\n        }\n      });\n    }\n  }\n\n  function throwIfCompositeComponentElement(element) {\n    // Custom components can no longer be wrapped directly in React DnD 2.0\n    // so that we don't need to depend on findDOMNode() from react-dom.\n    if (typeof element.type === 'string') {\n      return;\n    }\n\n    var displayName = element.type.displayName || element.type.name || 'the component';\n    throw new Error('Only native element nodes can now be passed to React DnD connectors.' + \"You can either wrap \".concat(displayName, \" into a <div>, or turn it into a \") + 'drag source or a drop target itself.');\n  }\n\n  function wrapHookToRecognizeElement(hook) {\n    return function () {\n      var elementOrNode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      // When passed a node, call the hook straight away.\n      if (!React.isValidElement(elementOrNode)) {\n        var node = elementOrNode;\n        hook(node, options); // return the node so it can be chained (e.g. when within callback refs\n        // <div ref={node => connectDragSource(connectDropTarget(node))}/>\n\n        return node;\n      } // If passed a ReactElement, clone it and attach this function as a ref.\n      // This helps us achieve a neat API where user doesn't even know that refs\n      // are being used under the hood.\n\n\n      var element = elementOrNode;\n      throwIfCompositeComponentElement(element); // When no options are passed, use the hook directly\n\n      var ref = options ? function (node) {\n        return hook(node, options);\n      } : hook;\n      return cloneWithRef(element, ref);\n    };\n  }\n\n  function wrapConnectorHooks(hooks) {\n    var wrappedHooks = {};\n    Object.keys(hooks).forEach(function (key) {\n      var hook = hooks[key]; // ref objects should be passed straight through without wrapping\n\n      if (key.endsWith('Ref')) {\n        wrappedHooks[key] = hooks[key];\n      } else {\n        var wrappedHook = wrapHookToRecognizeElement(hook);\n\n        wrappedHooks[key] = function () {\n          return wrappedHook;\n        };\n      }\n    });\n    return wrappedHooks;\n  }\n\n  function _typeof$2(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$2 = function _typeof(obj) { return typeof obj; }; } else { _typeof$2 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$2(obj); }\n\n  function isRef(obj) {\n    return (// eslint-disable-next-line no-prototype-builtins\n      obj !== null && _typeof$2(obj) === 'object' && Object.prototype.hasOwnProperty.call(obj, 'current')\n    );\n  }\n\n  function _classCallCheck$4(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties$4(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass$4(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties$4(Constructor.prototype, protoProps); if (staticProps) _defineProperties$4(Constructor, staticProps); return Constructor; }\n  var SourceConnector = /*#__PURE__*/function () {\n    function SourceConnector(backend) {\n      var _this = this;\n\n      _classCallCheck$4(this, SourceConnector);\n\n      this.hooks = wrapConnectorHooks({\n        dragSource: function dragSource(node, options) {\n          _this.clearDragSource();\n\n          _this.dragSourceOptions = options || null;\n\n          if (isRef(node)) {\n            _this.dragSourceRef = node;\n          } else {\n            _this.dragSourceNode = node;\n          }\n\n          _this.reconnectDragSource();\n        },\n        dragPreview: function dragPreview(node, options) {\n          _this.clearDragPreview();\n\n          _this.dragPreviewOptions = options || null;\n\n          if (isRef(node)) {\n            _this.dragPreviewRef = node;\n          } else {\n            _this.dragPreviewNode = node;\n          }\n\n          _this.reconnectDragPreview();\n        }\n      });\n      this.handlerId = null; // The drop target may either be attached via ref or connect function\n\n      this.dragSourceRef = null;\n      this.dragSourceOptionsInternal = null; // The drag preview may either be attached via ref or connect function\n\n      this.dragPreviewRef = null;\n      this.dragPreviewOptionsInternal = null;\n      this.lastConnectedHandlerId = null;\n      this.lastConnectedDragSource = null;\n      this.lastConnectedDragSourceOptions = null;\n      this.lastConnectedDragPreview = null;\n      this.lastConnectedDragPreviewOptions = null;\n      this.backend = backend;\n    }\n\n    _createClass$4(SourceConnector, [{\n      key: \"receiveHandlerId\",\n      value: function receiveHandlerId(newHandlerId) {\n        if (this.handlerId === newHandlerId) {\n          return;\n        }\n\n        this.handlerId = newHandlerId;\n        this.reconnect();\n      }\n    }, {\n      key: \"reconnect\",\n      value: function reconnect() {\n        this.reconnectDragSource();\n        this.reconnectDragPreview();\n      }\n    }, {\n      key: \"reconnectDragSource\",\n      value: function reconnectDragSource() {\n        var dragSource = this.dragSource; // if nothing has changed then don't resubscribe\n\n        var didChange = this.didHandlerIdChange() || this.didConnectedDragSourceChange() || this.didDragSourceOptionsChange();\n\n        if (didChange) {\n          this.disconnectDragSource();\n        }\n\n        if (!this.handlerId) {\n          return;\n        }\n\n        if (!dragSource) {\n          this.lastConnectedDragSource = dragSource;\n          return;\n        }\n\n        if (didChange) {\n          this.lastConnectedHandlerId = this.handlerId;\n          this.lastConnectedDragSource = dragSource;\n          this.lastConnectedDragSourceOptions = this.dragSourceOptions;\n          this.dragSourceUnsubscribe = this.backend.connectDragSource(this.handlerId, dragSource, this.dragSourceOptions);\n        }\n      }\n    }, {\n      key: \"reconnectDragPreview\",\n      value: function reconnectDragPreview() {\n        var dragPreview = this.dragPreview; // if nothing has changed then don't resubscribe\n\n        var didChange = this.didHandlerIdChange() || this.didConnectedDragPreviewChange() || this.didDragPreviewOptionsChange();\n\n        if (didChange) {\n          this.disconnectDragPreview();\n        }\n\n        if (!this.handlerId) {\n          return;\n        }\n\n        if (!dragPreview) {\n          this.lastConnectedDragPreview = dragPreview;\n          return;\n        }\n\n        if (didChange) {\n          this.lastConnectedHandlerId = this.handlerId;\n          this.lastConnectedDragPreview = dragPreview;\n          this.lastConnectedDragPreviewOptions = this.dragPreviewOptions;\n          this.dragPreviewUnsubscribe = this.backend.connectDragPreview(this.handlerId, dragPreview, this.dragPreviewOptions);\n        }\n      }\n    }, {\n      key: \"didHandlerIdChange\",\n      value: function didHandlerIdChange() {\n        return this.lastConnectedHandlerId !== this.handlerId;\n      }\n    }, {\n      key: \"didConnectedDragSourceChange\",\n      value: function didConnectedDragSourceChange() {\n        return this.lastConnectedDragSource !== this.dragSource;\n      }\n    }, {\n      key: \"didConnectedDragPreviewChange\",\n      value: function didConnectedDragPreviewChange() {\n        return this.lastConnectedDragPreview !== this.dragPreview;\n      }\n    }, {\n      key: \"didDragSourceOptionsChange\",\n      value: function didDragSourceOptionsChange() {\n        return !shallowEqual(this.lastConnectedDragSourceOptions, this.dragSourceOptions);\n      }\n    }, {\n      key: \"didDragPreviewOptionsChange\",\n      value: function didDragPreviewOptionsChange() {\n        return !shallowEqual(this.lastConnectedDragPreviewOptions, this.dragPreviewOptions);\n      }\n    }, {\n      key: \"disconnectDragSource\",\n      value: function disconnectDragSource() {\n        if (this.dragSourceUnsubscribe) {\n          this.dragSourceUnsubscribe();\n          this.dragSourceUnsubscribe = undefined;\n        }\n      }\n    }, {\n      key: \"disconnectDragPreview\",\n      value: function disconnectDragPreview() {\n        if (this.dragPreviewUnsubscribe) {\n          this.dragPreviewUnsubscribe();\n          this.dragPreviewUnsubscribe = undefined;\n          this.dragPreviewNode = null;\n          this.dragPreviewRef = null;\n        }\n      }\n    }, {\n      key: \"clearDragSource\",\n      value: function clearDragSource() {\n        this.dragSourceNode = null;\n        this.dragSourceRef = null;\n      }\n    }, {\n      key: \"clearDragPreview\",\n      value: function clearDragPreview() {\n        this.dragPreviewNode = null;\n        this.dragPreviewRef = null;\n      }\n    }, {\n      key: \"connectTarget\",\n      get: function get() {\n        return this.dragSource;\n      }\n    }, {\n      key: \"dragSourceOptions\",\n      get: function get() {\n        return this.dragSourceOptionsInternal;\n      },\n      set: function set(options) {\n        this.dragSourceOptionsInternal = options;\n      }\n    }, {\n      key: \"dragPreviewOptions\",\n      get: function get() {\n        return this.dragPreviewOptionsInternal;\n      },\n      set: function set(options) {\n        this.dragPreviewOptionsInternal = options;\n      }\n    }, {\n      key: \"dragSource\",\n      get: function get() {\n        return this.dragSourceNode || this.dragSourceRef && this.dragSourceRef.current;\n      }\n    }, {\n      key: \"dragPreview\",\n      get: function get() {\n        return this.dragPreviewNode || this.dragPreviewRef && this.dragPreviewRef.current;\n      }\n    }]);\n\n    return SourceConnector;\n  }();\n\n  function _slicedToArray$4(arr, i) { return _arrayWithHoles$4(arr) || _iterableToArrayLimit$4(arr, i) || _unsupportedIterableToArray$4(arr, i) || _nonIterableRest$4(); }\n\n  function _nonIterableRest$4() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\n  function _unsupportedIterableToArray$4(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray$4(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$4(o, minLen); }\n\n  function _arrayLikeToArray$4(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n  function _iterableToArrayLimit$4(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\n  function _arrayWithHoles$4(arr) { if (Array.isArray(arr)) return arr; }\n\n  function _typeof$3(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$3 = function _typeof(obj) { return typeof obj; }; } else { _typeof$3 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$3(obj); }\n  function useDragSourceMonitor() {\n    var manager = useDragDropManager();\n    var monitor = React.useMemo(function () {\n      return new DragSourceMonitorImpl(manager);\n    }, [manager]);\n    var connector = React.useMemo(function () {\n      return new SourceConnector(manager.getBackend());\n    }, [manager]);\n    return [monitor, connector];\n  }\n  function useDragHandler(spec, monitor, connector) {\n    var manager = useDragDropManager();\n    var handler = React.useMemo(function () {\n      return {\n        beginDrag: function beginDrag() {\n          var _spec$current = spec.current,\n              begin = _spec$current.begin,\n              item = _spec$current.item;\n\n          if (begin) {\n            var beginResult = begin(monitor);\n            invariant(beginResult == null || _typeof$3(beginResult) === 'object', 'dragSpec.begin() must either return an object, undefined, or null');\n            return beginResult || item || {};\n          }\n\n          return item || {};\n        },\n        canDrag: function canDrag() {\n          if (typeof spec.current.canDrag === 'boolean') {\n            return spec.current.canDrag;\n          } else if (typeof spec.current.canDrag === 'function') {\n            return spec.current.canDrag(monitor);\n          } else {\n            return true;\n          }\n        },\n        isDragging: function isDragging(globalMonitor, target) {\n          var isDragging = spec.current.isDragging;\n          return isDragging ? isDragging(monitor) : target === globalMonitor.getSourceId();\n        },\n        endDrag: function endDrag() {\n          var end = spec.current.end;\n\n          if (end) {\n            end(monitor.getItem(), monitor);\n          }\n\n          connector.reconnect();\n        }\n      };\n    }, []);\n    useIsomorphicLayoutEffect(function registerHandler() {\n      var _registerSource = registerSource(spec.current.item.type, handler, manager),\n          _registerSource2 = _slicedToArray$4(_registerSource, 2),\n          handlerId = _registerSource2[0],\n          unregister = _registerSource2[1];\n\n      monitor.receiveHandlerId(handlerId);\n      connector.receiveHandlerId(handlerId);\n      return unregister;\n    }, []);\n  }\n\n  function _slicedToArray$5(arr, i) { return _arrayWithHoles$5(arr) || _iterableToArrayLimit$5(arr, i) || _unsupportedIterableToArray$5(arr, i) || _nonIterableRest$5(); }\n\n  function _nonIterableRest$5() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\n  function _unsupportedIterableToArray$5(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray$5(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$5(o, minLen); }\n\n  function _arrayLikeToArray$5(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n  function _iterableToArrayLimit$5(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\n  function _arrayWithHoles$5(arr) { if (Array.isArray(arr)) return arr; }\n  /**\n   * useDragSource hook\n   * @param sourceSpec The drag source specification *\n   */\n\n  function useDrag(spec) {\n    var specRef = React.useRef(spec);\n    specRef.current = spec; // TODO: wire options into createSourceConnector\n\n    invariant(spec.item != null, 'item must be defined');\n    invariant(spec.item.type != null, 'item type must be defined');\n\n    var _useDragSourceMonitor = useDragSourceMonitor(),\n        _useDragSourceMonitor2 = _slicedToArray$5(_useDragSourceMonitor, 2),\n        monitor = _useDragSourceMonitor2[0],\n        connector = _useDragSourceMonitor2[1];\n\n    useDragHandler(specRef, monitor, connector);\n    var result = useMonitorOutput(monitor, specRef.current.collect || function () {\n      return {};\n    }, function () {\n      return connector.reconnect();\n    });\n    var connectDragSource = React.useMemo(function () {\n      return connector.hooks.dragSource();\n    }, [connector]);\n    var connectDragPreview = React.useMemo(function () {\n      return connector.hooks.dragPreview();\n    }, [connector]);\n    useIsomorphicLayoutEffect(function () {\n      connector.dragSourceOptions = specRef.current.options || null;\n      connector.reconnect();\n    }, [connector]);\n    useIsomorphicLayoutEffect(function () {\n      connector.dragPreviewOptions = specRef.current.previewOptions || null;\n      connector.reconnect();\n    }, [connector]);\n    return [result, connectDragSource, connectDragPreview];\n  }\n\n  function _classCallCheck$5(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties$5(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass$5(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties$5(Constructor.prototype, protoProps); if (staticProps) _defineProperties$5(Constructor, staticProps); return Constructor; }\n  var TargetConnector = /*#__PURE__*/function () {\n    function TargetConnector(backend) {\n      var _this = this;\n\n      _classCallCheck$5(this, TargetConnector);\n\n      this.hooks = wrapConnectorHooks({\n        dropTarget: function dropTarget(node, options) {\n          _this.clearDropTarget();\n\n          _this.dropTargetOptions = options;\n\n          if (isRef(node)) {\n            _this.dropTargetRef = node;\n          } else {\n            _this.dropTargetNode = node;\n          }\n\n          _this.reconnect();\n        }\n      });\n      this.handlerId = null; // The drop target may either be attached via ref or connect function\n\n      this.dropTargetRef = null;\n      this.dropTargetOptionsInternal = null;\n      this.lastConnectedHandlerId = null;\n      this.lastConnectedDropTarget = null;\n      this.lastConnectedDropTargetOptions = null;\n      this.backend = backend;\n    }\n\n    _createClass$5(TargetConnector, [{\n      key: \"reconnect\",\n      value: function reconnect() {\n        // if nothing has changed then don't resubscribe\n        var didChange = this.didHandlerIdChange() || this.didDropTargetChange() || this.didOptionsChange();\n\n        if (didChange) {\n          this.disconnectDropTarget();\n        }\n\n        var dropTarget = this.dropTarget;\n\n        if (!this.handlerId) {\n          return;\n        }\n\n        if (!dropTarget) {\n          this.lastConnectedDropTarget = dropTarget;\n          return;\n        }\n\n        if (didChange) {\n          this.lastConnectedHandlerId = this.handlerId;\n          this.lastConnectedDropTarget = dropTarget;\n          this.lastConnectedDropTargetOptions = this.dropTargetOptions;\n          this.unsubscribeDropTarget = this.backend.connectDropTarget(this.handlerId, dropTarget, this.dropTargetOptions);\n        }\n      }\n    }, {\n      key: \"receiveHandlerId\",\n      value: function receiveHandlerId(newHandlerId) {\n        if (newHandlerId === this.handlerId) {\n          return;\n        }\n\n        this.handlerId = newHandlerId;\n        this.reconnect();\n      }\n    }, {\n      key: \"didHandlerIdChange\",\n      value: function didHandlerIdChange() {\n        return this.lastConnectedHandlerId !== this.handlerId;\n      }\n    }, {\n      key: \"didDropTargetChange\",\n      value: function didDropTargetChange() {\n        return this.lastConnectedDropTarget !== this.dropTarget;\n      }\n    }, {\n      key: \"didOptionsChange\",\n      value: function didOptionsChange() {\n        return !shallowEqual(this.lastConnectedDropTargetOptions, this.dropTargetOptions);\n      }\n    }, {\n      key: \"disconnectDropTarget\",\n      value: function disconnectDropTarget() {\n        if (this.unsubscribeDropTarget) {\n          this.unsubscribeDropTarget();\n          this.unsubscribeDropTarget = undefined;\n        }\n      }\n    }, {\n      key: \"clearDropTarget\",\n      value: function clearDropTarget() {\n        this.dropTargetRef = null;\n        this.dropTargetNode = null;\n      }\n    }, {\n      key: \"connectTarget\",\n      get: function get() {\n        return this.dropTarget;\n      }\n    }, {\n      key: \"dropTargetOptions\",\n      get: function get() {\n        return this.dropTargetOptionsInternal;\n      },\n      set: function set(options) {\n        this.dropTargetOptionsInternal = options;\n      }\n    }, {\n      key: \"dropTarget\",\n      get: function get() {\n        return this.dropTargetNode || this.dropTargetRef && this.dropTargetRef.current;\n      }\n    }]);\n\n    return TargetConnector;\n  }();\n\n  function _classCallCheck$6(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties$6(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass$6(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties$6(Constructor.prototype, protoProps); if (staticProps) _defineProperties$6(Constructor, staticProps); return Constructor; }\n  var isCallingCanDrop = false;\n  var DropTargetMonitorImpl = /*#__PURE__*/function () {\n    function DropTargetMonitorImpl(manager) {\n      _classCallCheck$6(this, DropTargetMonitorImpl);\n\n      this.targetId = null;\n      this.internalMonitor = manager.getMonitor();\n    }\n\n    _createClass$6(DropTargetMonitorImpl, [{\n      key: \"receiveHandlerId\",\n      value: function receiveHandlerId(targetId) {\n        this.targetId = targetId;\n      }\n    }, {\n      key: \"getHandlerId\",\n      value: function getHandlerId() {\n        return this.targetId;\n      }\n    }, {\n      key: \"subscribeToStateChange\",\n      value: function subscribeToStateChange(listener, options) {\n        return this.internalMonitor.subscribeToStateChange(listener, options);\n      }\n    }, {\n      key: \"canDrop\",\n      value: function canDrop() {\n        // Cut out early if the target id has not been set. This should prevent errors\n        // where the user has an older version of dnd-core like in\n        // https://github.com/react-dnd/react-dnd/issues/1310\n        if (!this.targetId) {\n          return false;\n        }\n\n        invariant(!isCallingCanDrop, 'You may not call monitor.canDrop() inside your canDrop() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor');\n\n        try {\n          isCallingCanDrop = true;\n          return this.internalMonitor.canDropOnTarget(this.targetId);\n        } finally {\n          isCallingCanDrop = false;\n        }\n      }\n    }, {\n      key: \"isOver\",\n      value: function isOver(options) {\n        if (!this.targetId) {\n          return false;\n        }\n\n        return this.internalMonitor.isOverTarget(this.targetId, options);\n      }\n    }, {\n      key: \"getItemType\",\n      value: function getItemType() {\n        return this.internalMonitor.getItemType();\n      }\n    }, {\n      key: \"getItem\",\n      value: function getItem() {\n        return this.internalMonitor.getItem();\n      }\n    }, {\n      key: \"getDropResult\",\n      value: function getDropResult() {\n        return this.internalMonitor.getDropResult();\n      }\n    }, {\n      key: \"didDrop\",\n      value: function didDrop() {\n        return this.internalMonitor.didDrop();\n      }\n    }, {\n      key: \"getInitialClientOffset\",\n      value: function getInitialClientOffset() {\n        return this.internalMonitor.getInitialClientOffset();\n      }\n    }, {\n      key: \"getInitialSourceClientOffset\",\n      value: function getInitialSourceClientOffset() {\n        return this.internalMonitor.getInitialSourceClientOffset();\n      }\n    }, {\n      key: \"getSourceClientOffset\",\n      value: function getSourceClientOffset() {\n        return this.internalMonitor.getSourceClientOffset();\n      }\n    }, {\n      key: \"getClientOffset\",\n      value: function getClientOffset() {\n        return this.internalMonitor.getClientOffset();\n      }\n    }, {\n      key: \"getDifferenceFromInitialOffset\",\n      value: function getDifferenceFromInitialOffset() {\n        return this.internalMonitor.getDifferenceFromInitialOffset();\n      }\n    }]);\n\n    return DropTargetMonitorImpl;\n  }();\n\n  function _slicedToArray$6(arr, i) { return _arrayWithHoles$6(arr) || _iterableToArrayLimit$6(arr, i) || _unsupportedIterableToArray$6(arr, i) || _nonIterableRest$6(); }\n\n  function _nonIterableRest$6() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\n  function _unsupportedIterableToArray$6(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray$6(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$6(o, minLen); }\n\n  function _arrayLikeToArray$6(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n  function _iterableToArrayLimit$6(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\n  function _arrayWithHoles$6(arr) { if (Array.isArray(arr)) return arr; }\n  function useDropTargetMonitor() {\n    var manager = useDragDropManager();\n    var monitor = React.useMemo(function () {\n      return new DropTargetMonitorImpl(manager);\n    }, [manager]);\n    var connector = React.useMemo(function () {\n      return new TargetConnector(manager.getBackend());\n    }, [manager]);\n    return [monitor, connector];\n  }\n  function useDropHandler(spec, monitor, connector) {\n    var manager = useDragDropManager();\n    var handler = React.useMemo(function () {\n      return {\n        canDrop: function canDrop() {\n          var canDrop = spec.current.canDrop;\n          return canDrop ? canDrop(monitor.getItem(), monitor) : true;\n        },\n        hover: function hover() {\n          var hover = spec.current.hover;\n\n          if (hover) {\n            hover(monitor.getItem(), monitor);\n          }\n        },\n        drop: function drop() {\n          var drop = spec.current.drop;\n\n          if (drop) {\n            return drop(monitor.getItem(), monitor);\n          }\n        }\n      };\n    }, [monitor]);\n    useIsomorphicLayoutEffect(function registerHandler() {\n      var _registerTarget = registerTarget(spec.current.accept, handler, manager),\n          _registerTarget2 = _slicedToArray$6(_registerTarget, 2),\n          handlerId = _registerTarget2[0],\n          unregister = _registerTarget2[1];\n\n      monitor.receiveHandlerId(handlerId);\n      connector.receiveHandlerId(handlerId);\n      return unregister;\n    }, [monitor, connector]);\n  }\n\n  function _slicedToArray$7(arr, i) { return _arrayWithHoles$7(arr) || _iterableToArrayLimit$7(arr, i) || _unsupportedIterableToArray$7(arr, i) || _nonIterableRest$7(); }\n\n  function _nonIterableRest$7() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\n  function _unsupportedIterableToArray$7(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray$7(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$7(o, minLen); }\n\n  function _arrayLikeToArray$7(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n  function _iterableToArrayLimit$7(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\n  function _arrayWithHoles$7(arr) { if (Array.isArray(arr)) return arr; }\n  /**\n   * useDropTarget Hook\n   * @param spec The drop target specification\n   */\n\n  function useDrop(spec) {\n    var specRef = React.useRef(spec);\n    specRef.current = spec;\n    invariant(spec.accept != null, 'accept must be defined');\n\n    var _useDropTargetMonitor = useDropTargetMonitor(),\n        _useDropTargetMonitor2 = _slicedToArray$7(_useDropTargetMonitor, 2),\n        monitor = _useDropTargetMonitor2[0],\n        connector = _useDropTargetMonitor2[1];\n\n    useDropHandler(specRef, monitor, connector);\n    var result = useMonitorOutput(monitor, specRef.current.collect || function () {\n      return {};\n    }, function () {\n      return connector.reconnect();\n    });\n    var connectDropTarget = React.useMemo(function () {\n      return connector.hooks.dropTarget();\n    }, [connector]);\n    useIsomorphicLayoutEffect(function () {\n      connector.dropTargetOptions = spec.options || null;\n      connector.reconnect();\n    }, [spec.options]);\n    return [result, connectDropTarget];\n  }\n\n  function _slicedToArray$8(arr, i) { return _arrayWithHoles$8(arr) || _iterableToArrayLimit$8(arr, i) || _unsupportedIterableToArray$8(arr, i) || _nonIterableRest$8(); }\n\n  function _nonIterableRest$8() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\n  function _unsupportedIterableToArray$8(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray$8(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$8(o, minLen); }\n\n  function _arrayLikeToArray$8(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n  function _iterableToArrayLimit$8(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\n  function _arrayWithHoles$8(arr) { if (Array.isArray(arr)) return arr; }\n  /**\n   * useDragLayer Hook\n   * @param collector The property collector\n   */\n\n  function useDragLayer(collect) {\n    var dragDropManager = useDragDropManager();\n    var monitor = dragDropManager.getMonitor();\n\n    var _useCollector = useCollector(monitor, collect),\n        _useCollector2 = _slicedToArray$8(_useCollector, 2),\n        collected = _useCollector2[0],\n        updateCollected = _useCollector2[1];\n\n    React.useEffect(function () {\n      return monitor.subscribeToOffsetChange(updateCollected);\n    });\n    React.useEffect(function () {\n      return monitor.subscribeToStateChange(updateCollected);\n    });\n    return collected;\n  }\n\n  function _typeof$4(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$4 = function _typeof(obj) { return typeof obj; }; } else { _typeof$4 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$4(obj); }\n\n  // cheap lodash replacements\n  function isFunction(input) {\n    return typeof input === 'function';\n  }\n  function noop() {// noop\n  }\n\n  function isObjectLike(input) {\n    return _typeof$4(input) === 'object' && input !== null;\n  }\n\n  function isPlainObject$1(input) {\n    if (!isObjectLike(input)) {\n      return false;\n    }\n\n    if (Object.getPrototypeOf(input) === null) {\n      return true;\n    }\n\n    var proto = input;\n\n    while (Object.getPrototypeOf(proto) !== null) {\n      proto = Object.getPrototypeOf(proto);\n    }\n\n    return Object.getPrototypeOf(input) === proto;\n  }\n\n  function getDecoratedComponent(instanceRef) {\n    var currentRef = instanceRef.current;\n\n    if (currentRef == null) {\n      return null;\n    } else if (currentRef.decoratedRef) {\n      // go through the private field in decorateHandler to avoid the invariant hit\n      return currentRef.decoratedRef.current;\n    } else {\n      return currentRef;\n    }\n  }\n  function isClassComponent(Component) {\n    return Component && Component.prototype && typeof Component.prototype.render === 'function';\n  }\n  function isRefForwardingComponent(C) {\n    var _item$$$typeof;\n\n    var item = C;\n    return (item === null || item === void 0 ? void 0 : (_item$$$typeof = item.$$typeof) === null || _item$$$typeof === void 0 ? void 0 : _item$$$typeof.toString()) === 'Symbol(react.forward_ref)';\n  }\n  function isRefable(C) {\n    return isClassComponent(C) || isRefForwardingComponent(C);\n  }\n  function checkDecoratorArguments(functionName, signature) {\n    {\n      for (var i = 0; i < (arguments.length <= 2 ? 0 : arguments.length - 2); i++) {\n        var arg = i + 2 < 2 || arguments.length <= i + 2 ? undefined : arguments[i + 2];\n\n        if (arg && arg.prototype && arg.prototype.render) {\n          // eslint-disable-next-line no-console\n          console.error('You seem to be applying the arguments in the wrong order. ' + \"It should be \".concat(functionName, \"(\").concat(signature, \")(Component), not the other way around. \") + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#you-seem-to-be-applying-the-arguments-in-the-wrong-order');\n          return;\n        }\n      }\n    }\n  }\n\n  function createCommonjsModule(fn, basedir, module) {\n  \treturn module = {\n  \t  path: basedir,\n  \t  exports: {},\n  \t  require: function (path, base) {\n        return commonjsRequire(path, (base === undefined || base === null) ? module.path : base);\n      }\n  \t}, fn(module, module.exports), module.exports;\n  }\n\n  function commonjsRequire () {\n  \tthrow new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');\n  }\n\n  var reactIs_development = createCommonjsModule(function (module, exports) {\n\n\n\n  {\n    (function() {\n\n  // The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n  // nor polyfill, then a plain number is used for performance.\n  var hasSymbol = typeof Symbol === 'function' && Symbol.for;\n  var REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\n  var REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\n  var REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\n  var REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\n  var REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\n  var REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\n  var REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n  // (unstable) APIs that have been removed. Can we remove the symbols?\n\n  var REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\n  var REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\n  var REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\n  var REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\n  var REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\n  var REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\n  var REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\n  var REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\n  var REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\n  var REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\n  var REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\n  function isValidElementType(type) {\n    return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n    type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n  }\n\n  function typeOf(object) {\n    if (typeof object === 'object' && object !== null) {\n      var $$typeof = object.$$typeof;\n\n      switch ($$typeof) {\n        case REACT_ELEMENT_TYPE:\n          var type = object.type;\n\n          switch (type) {\n            case REACT_ASYNC_MODE_TYPE:\n            case REACT_CONCURRENT_MODE_TYPE:\n            case REACT_FRAGMENT_TYPE:\n            case REACT_PROFILER_TYPE:\n            case REACT_STRICT_MODE_TYPE:\n            case REACT_SUSPENSE_TYPE:\n              return type;\n\n            default:\n              var $$typeofType = type && type.$$typeof;\n\n              switch ($$typeofType) {\n                case REACT_CONTEXT_TYPE:\n                case REACT_FORWARD_REF_TYPE:\n                case REACT_LAZY_TYPE:\n                case REACT_MEMO_TYPE:\n                case REACT_PROVIDER_TYPE:\n                  return $$typeofType;\n\n                default:\n                  return $$typeof;\n              }\n\n          }\n\n        case REACT_PORTAL_TYPE:\n          return $$typeof;\n      }\n    }\n\n    return undefined;\n  } // AsyncMode is deprecated along with isAsyncMode\n\n  var AsyncMode = REACT_ASYNC_MODE_TYPE;\n  var ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\n  var ContextConsumer = REACT_CONTEXT_TYPE;\n  var ContextProvider = REACT_PROVIDER_TYPE;\n  var Element = REACT_ELEMENT_TYPE;\n  var ForwardRef = REACT_FORWARD_REF_TYPE;\n  var Fragment = REACT_FRAGMENT_TYPE;\n  var Lazy = REACT_LAZY_TYPE;\n  var Memo = REACT_MEMO_TYPE;\n  var Portal = REACT_PORTAL_TYPE;\n  var Profiler = REACT_PROFILER_TYPE;\n  var StrictMode = REACT_STRICT_MODE_TYPE;\n  var Suspense = REACT_SUSPENSE_TYPE;\n  var hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\n  function isAsyncMode(object) {\n    {\n      if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n        hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n        console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n      }\n    }\n\n    return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n  }\n  function isConcurrentMode(object) {\n    return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n  }\n  function isContextConsumer(object) {\n    return typeOf(object) === REACT_CONTEXT_TYPE;\n  }\n  function isContextProvider(object) {\n    return typeOf(object) === REACT_PROVIDER_TYPE;\n  }\n  function isElement(object) {\n    return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n  }\n  function isForwardRef(object) {\n    return typeOf(object) === REACT_FORWARD_REF_TYPE;\n  }\n  function isFragment(object) {\n    return typeOf(object) === REACT_FRAGMENT_TYPE;\n  }\n  function isLazy(object) {\n    return typeOf(object) === REACT_LAZY_TYPE;\n  }\n  function isMemo(object) {\n    return typeOf(object) === REACT_MEMO_TYPE;\n  }\n  function isPortal(object) {\n    return typeOf(object) === REACT_PORTAL_TYPE;\n  }\n  function isProfiler(object) {\n    return typeOf(object) === REACT_PROFILER_TYPE;\n  }\n  function isStrictMode(object) {\n    return typeOf(object) === REACT_STRICT_MODE_TYPE;\n  }\n  function isSuspense(object) {\n    return typeOf(object) === REACT_SUSPENSE_TYPE;\n  }\n\n  exports.AsyncMode = AsyncMode;\n  exports.ConcurrentMode = ConcurrentMode;\n  exports.ContextConsumer = ContextConsumer;\n  exports.ContextProvider = ContextProvider;\n  exports.Element = Element;\n  exports.ForwardRef = ForwardRef;\n  exports.Fragment = Fragment;\n  exports.Lazy = Lazy;\n  exports.Memo = Memo;\n  exports.Portal = Portal;\n  exports.Profiler = Profiler;\n  exports.StrictMode = StrictMode;\n  exports.Suspense = Suspense;\n  exports.isAsyncMode = isAsyncMode;\n  exports.isConcurrentMode = isConcurrentMode;\n  exports.isContextConsumer = isContextConsumer;\n  exports.isContextProvider = isContextProvider;\n  exports.isElement = isElement;\n  exports.isForwardRef = isForwardRef;\n  exports.isFragment = isFragment;\n  exports.isLazy = isLazy;\n  exports.isMemo = isMemo;\n  exports.isPortal = isPortal;\n  exports.isProfiler = isProfiler;\n  exports.isStrictMode = isStrictMode;\n  exports.isSuspense = isSuspense;\n  exports.isValidElementType = isValidElementType;\n  exports.typeOf = typeOf;\n    })();\n  }\n  });\n  var reactIs_development_1 = reactIs_development.AsyncMode;\n  var reactIs_development_2 = reactIs_development.ConcurrentMode;\n  var reactIs_development_3 = reactIs_development.ContextConsumer;\n  var reactIs_development_4 = reactIs_development.ContextProvider;\n  var reactIs_development_5 = reactIs_development.Element;\n  var reactIs_development_6 = reactIs_development.ForwardRef;\n  var reactIs_development_7 = reactIs_development.Fragment;\n  var reactIs_development_8 = reactIs_development.Lazy;\n  var reactIs_development_9 = reactIs_development.Memo;\n  var reactIs_development_10 = reactIs_development.Portal;\n  var reactIs_development_11 = reactIs_development.Profiler;\n  var reactIs_development_12 = reactIs_development.StrictMode;\n  var reactIs_development_13 = reactIs_development.Suspense;\n  var reactIs_development_14 = reactIs_development.isAsyncMode;\n  var reactIs_development_15 = reactIs_development.isConcurrentMode;\n  var reactIs_development_16 = reactIs_development.isContextConsumer;\n  var reactIs_development_17 = reactIs_development.isContextProvider;\n  var reactIs_development_18 = reactIs_development.isElement;\n  var reactIs_development_19 = reactIs_development.isForwardRef;\n  var reactIs_development_20 = reactIs_development.isFragment;\n  var reactIs_development_21 = reactIs_development.isLazy;\n  var reactIs_development_22 = reactIs_development.isMemo;\n  var reactIs_development_23 = reactIs_development.isPortal;\n  var reactIs_development_24 = reactIs_development.isProfiler;\n  var reactIs_development_25 = reactIs_development.isStrictMode;\n  var reactIs_development_26 = reactIs_development.isSuspense;\n  var reactIs_development_27 = reactIs_development.isValidElementType;\n  var reactIs_development_28 = reactIs_development.typeOf;\n\n  var reactIs = createCommonjsModule(function (module) {\n\n  {\n    module.exports = reactIs_development;\n  }\n  });\n\n  /**\n   * Copyright 2015, Yahoo! Inc.\n   * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n   */\n  var REACT_STATICS = {\n    childContextTypes: true,\n    contextType: true,\n    contextTypes: true,\n    defaultProps: true,\n    displayName: true,\n    getDefaultProps: true,\n    getDerivedStateFromError: true,\n    getDerivedStateFromProps: true,\n    mixins: true,\n    propTypes: true,\n    type: true\n  };\n  var KNOWN_STATICS = {\n    name: true,\n    length: true,\n    prototype: true,\n    caller: true,\n    callee: true,\n    arguments: true,\n    arity: true\n  };\n  var FORWARD_REF_STATICS = {\n    '$$typeof': true,\n    render: true,\n    defaultProps: true,\n    displayName: true,\n    propTypes: true\n  };\n  var MEMO_STATICS = {\n    '$$typeof': true,\n    compare: true,\n    defaultProps: true,\n    displayName: true,\n    propTypes: true,\n    type: true\n  };\n  var TYPE_STATICS = {};\n  TYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;\n  TYPE_STATICS[reactIs.Memo] = MEMO_STATICS;\n\n  function getStatics(component) {\n    // React v16.11 and below\n    if (reactIs.isMemo(component)) {\n      return MEMO_STATICS;\n    } // React v16.12 and above\n\n\n    return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n  }\n\n  var defineProperty = Object.defineProperty;\n  var getOwnPropertyNames = Object.getOwnPropertyNames;\n  var getOwnPropertySymbols = Object.getOwnPropertySymbols;\n  var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n  var getPrototypeOf = Object.getPrototypeOf;\n  var objectPrototype = Object.prototype;\n  function hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n    if (typeof sourceComponent !== 'string') {\n      // don't hoist over string (html) components\n      if (objectPrototype) {\n        var inheritedComponent = getPrototypeOf(sourceComponent);\n\n        if (inheritedComponent && inheritedComponent !== objectPrototype) {\n          hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n        }\n      }\n\n      var keys = getOwnPropertyNames(sourceComponent);\n\n      if (getOwnPropertySymbols) {\n        keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n      }\n\n      var targetStatics = getStatics(targetComponent);\n      var sourceStatics = getStatics(sourceComponent);\n\n      for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n\n        if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n          var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n\n          try {\n            // Avoid failures from read-only properties\n            defineProperty(targetComponent, key, descriptor);\n          } catch (e) {}\n        }\n      }\n    }\n\n    return targetComponent;\n  }\n\n  var hoistNonReactStatics_cjs = hoistNonReactStatics;\n\n  function _classCallCheck$7(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties$7(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass$7(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties$7(Constructor.prototype, protoProps); if (staticProps) _defineProperties$7(Constructor, staticProps); return Constructor; }\n  /**\n   * Provides a set of static methods for creating Disposables.\n   * @param {Function} action Action to run during the first call to dispose.\n   * The action is guaranteed to be run at most once.\n   */\n\n  var Disposable =\n  /** @class */\n  function () {\n    var Disposable = /*#__PURE__*/function () {\n      function Disposable(action) {\n        _classCallCheck$7(this, Disposable);\n\n        this.isDisposed = false;\n        this.action = isFunction(action) ? action : noop;\n      }\n      /**\n       * Validates whether the given object is a disposable\n       * @param {Object} Object to test whether it has a dispose method\n       * @returns {Boolean} true if a disposable object, else false.\n       */\n\n\n      _createClass$7(Disposable, [{\n        key: \"dispose\",\n\n        /** Performs the task of cleaning up resources. */\n        value: function dispose() {\n          if (!this.isDisposed) {\n            this.action();\n            this.isDisposed = true;\n          }\n        }\n      }], [{\n        key: \"isDisposable\",\n        value: function isDisposable(d) {\n          return Boolean(d && isFunction(d.dispose));\n        }\n      }, {\n        key: \"_fixup\",\n        value: function _fixup(result) {\n          return Disposable.isDisposable(result) ? result : Disposable.empty;\n        }\n        /**\n         * Creates a disposable object that invokes the specified action when disposed.\n         * @param {Function} dispose Action to run during the first call to dispose.\n         * The action is guaranteed to be run at most once.\n         * @return {Disposable} The disposable object that runs the given action upon disposal.\n         */\n\n      }, {\n        key: \"create\",\n        value: function create(action) {\n          return new Disposable(action);\n        }\n      }]);\n\n      return Disposable;\n    }();\n    /**\n     * Gets the disposable that does nothing when disposed.\n     */\n\n\n    Disposable.empty = {\n      dispose: noop\n    };\n    return Disposable;\n  }();\n  /**\n   * Represents a group of disposable resources that are disposed together.\n   * @constructor\n   */\n\n  var CompositeDisposable = /*#__PURE__*/function () {\n    function CompositeDisposable() {\n      _classCallCheck$7(this, CompositeDisposable);\n\n      this.isDisposed = false;\n\n      for (var _len = arguments.length, disposables = new Array(_len), _key = 0; _key < _len; _key++) {\n        disposables[_key] = arguments[_key];\n      }\n\n      this.disposables = disposables;\n    }\n    /**\n     * Adds a disposable to the CompositeDisposable or disposes the disposable if the CompositeDisposable is disposed.\n     * @param {Any} item Disposable to add.\n     */\n\n\n    _createClass$7(CompositeDisposable, [{\n      key: \"add\",\n      value: function add(item) {\n        if (this.isDisposed) {\n          item.dispose();\n        } else {\n          this.disposables.push(item);\n        }\n      }\n      /**\n       * Removes and disposes the first occurrence of a disposable from the CompositeDisposable.\n       * @param {Any} item Disposable to remove.\n       * @returns {Boolean} true if found; false otherwise.\n       */\n\n    }, {\n      key: \"remove\",\n      value: function remove(item) {\n        var shouldDispose = false;\n\n        if (!this.isDisposed) {\n          var idx = this.disposables.indexOf(item);\n\n          if (idx !== -1) {\n            shouldDispose = true;\n            this.disposables.splice(idx, 1);\n            item.dispose();\n          }\n        }\n\n        return shouldDispose;\n      }\n      /**\n       *  Disposes all disposables in the group and removes them from the group but\n       *  does not dispose the CompositeDisposable.\n       */\n\n    }, {\n      key: \"clear\",\n      value: function clear() {\n        if (!this.isDisposed) {\n          var len = this.disposables.length;\n          var currentDisposables = new Array(len);\n\n          for (var i = 0; i < len; i++) {\n            currentDisposables[i] = this.disposables[i];\n          }\n\n          this.disposables = [];\n\n          for (var _i = 0; _i < len; _i++) {\n            currentDisposables[_i].dispose();\n          }\n        }\n      }\n      /**\n       *  Disposes all disposables in the group and removes them from the group.\n       */\n\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        if (!this.isDisposed) {\n          this.isDisposed = true;\n          var len = this.disposables.length;\n          var currentDisposables = new Array(len);\n\n          for (var i = 0; i < len; i++) {\n            currentDisposables[i] = this.disposables[i];\n          }\n\n          this.disposables = [];\n\n          for (var _i2 = 0; _i2 < len; _i2++) {\n            currentDisposables[_i2].dispose();\n          }\n        }\n      }\n    }]);\n\n    return CompositeDisposable;\n  }();\n  /**\n   * Represents a disposable resource whose underlying disposable resource can\n   * be replaced by another disposable resource, causing automatic disposal of\n   * the previous underlying disposable resource.\n   */\n\n  var SerialDisposable = /*#__PURE__*/function () {\n    function SerialDisposable() {\n      _classCallCheck$7(this, SerialDisposable);\n\n      this.isDisposed = false;\n    }\n    /**\n     * Gets the underlying disposable.\n     * @returns {Any} the underlying disposable.\n     */\n\n\n    _createClass$7(SerialDisposable, [{\n      key: \"getDisposable\",\n      value: function getDisposable() {\n        return this.current;\n      }\n    }, {\n      key: \"setDisposable\",\n      value: function setDisposable(value) {\n        var shouldDispose = this.isDisposed;\n\n        if (!shouldDispose) {\n          var old = this.current;\n          this.current = value;\n\n          if (old) {\n            old.dispose();\n          }\n        }\n\n        if (shouldDispose && value) {\n          value.dispose();\n        }\n      }\n      /** Performs the task of cleaning up resources. */\n\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        if (!this.isDisposed) {\n          this.isDisposed = true;\n          var old = this.current;\n          this.current = undefined;\n\n          if (old) {\n            old.dispose();\n          }\n        }\n      }\n    }]);\n\n    return SerialDisposable;\n  }();\n\n  function _typeof$5(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$5 = function _typeof(obj) { return typeof obj; }; } else { _typeof$5 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$5(obj); }\n\n  function _slicedToArray$9(arr, i) { return _arrayWithHoles$9(arr) || _iterableToArrayLimit$9(arr, i) || _unsupportedIterableToArray$9(arr, i) || _nonIterableRest$9(); }\n\n  function _nonIterableRest$9() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\n  function _unsupportedIterableToArray$9(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray$9(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$9(o, minLen); }\n\n  function _arrayLikeToArray$9(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n  function _iterableToArrayLimit$9(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\n  function _arrayWithHoles$9(arr) { if (Array.isArray(arr)) return arr; }\n\n  function _classCallCheck$8(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties$8(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass$8(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties$8(Constructor.prototype, protoProps); if (staticProps) _defineProperties$8(Constructor, staticProps); return Constructor; }\n\n  function _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\n  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n  function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\n  function _possibleConstructorReturn(self, call) { if (call && (_typeof$5(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\n  function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n  function _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n  function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n  function decorateHandler(_ref) {\n    var DecoratedComponent = _ref.DecoratedComponent,\n        createHandler = _ref.createHandler,\n        createMonitor = _ref.createMonitor,\n        createConnector = _ref.createConnector,\n        registerHandler = _ref.registerHandler,\n        containerDisplayName = _ref.containerDisplayName,\n        getType = _ref.getType,\n        collect = _ref.collect,\n        options = _ref.options;\n    var _options$arePropsEqua = options.arePropsEqual,\n        arePropsEqual = _options$arePropsEqua === void 0 ? shallowEqual : _options$arePropsEqua;\n    var Decorated = DecoratedComponent;\n    var displayName = DecoratedComponent.displayName || DecoratedComponent.name || 'Component';\n\n    var DragDropContainer =\n    /** @class */\n    function () {\n      var DragDropContainer = /*#__PURE__*/function (_React$Component) {\n        _inherits(DragDropContainer, _React$Component);\n\n        var _super = _createSuper(DragDropContainer);\n\n        function DragDropContainer(props) {\n          var _this;\n\n          _classCallCheck$8(this, DragDropContainer);\n\n          _this = _super.call(this, props);\n          _this.decoratedRef = React.createRef();\n\n          _this.handleChange = function () {\n            var nextState = _this.getCurrentState();\n\n            if (!shallowEqual(nextState, _this.state)) {\n              _this.setState(nextState);\n            }\n          };\n\n          _this.disposable = new SerialDisposable();\n\n          _this.receiveProps(props);\n\n          _this.dispose();\n\n          return _this;\n        }\n\n        _createClass$8(DragDropContainer, [{\n          key: \"getHandlerId\",\n          value: function getHandlerId() {\n            return this.handlerId;\n          }\n        }, {\n          key: \"getDecoratedComponentInstance\",\n          value: function getDecoratedComponentInstance() {\n            invariant(this.decoratedRef.current, 'In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()');\n            return this.decoratedRef.current;\n          }\n        }, {\n          key: \"shouldComponentUpdate\",\n          value: function shouldComponentUpdate(nextProps, nextState) {\n            return !arePropsEqual(nextProps, this.props) || !shallowEqual(nextState, this.state);\n          }\n        }, {\n          key: \"componentDidMount\",\n          value: function componentDidMount() {\n            this.disposable = new SerialDisposable();\n            this.currentType = undefined;\n            this.receiveProps(this.props);\n            this.handleChange();\n          }\n        }, {\n          key: \"componentDidUpdate\",\n          value: function componentDidUpdate(prevProps) {\n            if (!arePropsEqual(this.props, prevProps)) {\n              this.receiveProps(this.props);\n              this.handleChange();\n            }\n          }\n        }, {\n          key: \"componentWillUnmount\",\n          value: function componentWillUnmount() {\n            this.dispose();\n          }\n        }, {\n          key: \"receiveProps\",\n          value: function receiveProps(props) {\n            if (!this.handler) {\n              return;\n            }\n\n            this.handler.receiveProps(props);\n            this.receiveType(getType(props));\n          }\n        }, {\n          key: \"receiveType\",\n          value: function receiveType(type) {\n            if (!this.handlerMonitor || !this.manager || !this.handlerConnector) {\n              return;\n            }\n\n            if (type === this.currentType) {\n              return;\n            }\n\n            this.currentType = type;\n\n            var _registerHandler = registerHandler(type, this.handler, this.manager),\n                _registerHandler2 = _slicedToArray$9(_registerHandler, 2),\n                handlerId = _registerHandler2[0],\n                unregister = _registerHandler2[1];\n\n            this.handlerId = handlerId;\n            this.handlerMonitor.receiveHandlerId(handlerId);\n            this.handlerConnector.receiveHandlerId(handlerId);\n            var globalMonitor = this.manager.getMonitor();\n            var unsubscribe = globalMonitor.subscribeToStateChange(this.handleChange, {\n              handlerIds: [handlerId]\n            });\n            this.disposable.setDisposable(new CompositeDisposable(new Disposable(unsubscribe), new Disposable(unregister)));\n          }\n        }, {\n          key: \"dispose\",\n          value: function dispose() {\n            this.disposable.dispose();\n\n            if (this.handlerConnector) {\n              this.handlerConnector.receiveHandlerId(null);\n            }\n          }\n        }, {\n          key: \"getCurrentState\",\n          value: function getCurrentState() {\n            if (!this.handlerConnector) {\n              return {};\n            }\n\n            var nextState = collect(this.handlerConnector.hooks, this.handlerMonitor, this.props);\n\n            {\n              invariant(isPlainObject$1(nextState), 'Expected `collect` specified as the second argument to ' + '%s for %s to return a plain object of props to inject. ' + 'Instead, received %s.', containerDisplayName, displayName, nextState);\n            }\n\n            return nextState;\n          }\n        }, {\n          key: \"render\",\n          value: function render() {\n            var _this2 = this;\n\n            return React.createElement(DndContext.Consumer, null, function (_ref2) {\n              var dragDropManager = _ref2.dragDropManager;\n\n              _this2.receiveDragDropManager(dragDropManager);\n\n              if (typeof requestAnimationFrame !== 'undefined') {\n                requestAnimationFrame(function () {\n                  var _this2$handlerConnect;\n\n                  return (_this2$handlerConnect = _this2.handlerConnector) === null || _this2$handlerConnect === void 0 ? void 0 : _this2$handlerConnect.reconnect();\n                });\n              }\n\n              return React.createElement(Decorated, Object.assign({}, _this2.props, _this2.getCurrentState(), {\n                // NOTE: if Decorated is a Function Component, decoratedRef will not be populated unless it's a refforwarding component.\n                ref: isRefable(Decorated) ? _this2.decoratedRef : null\n              }));\n            });\n          }\n        }, {\n          key: \"receiveDragDropManager\",\n          value: function receiveDragDropManager(dragDropManager) {\n            if (this.manager !== undefined) {\n              return;\n            }\n\n            invariant(dragDropManager !== undefined, 'Could not find the drag and drop manager in the context of %s. ' + 'Make sure to render a DndProvider component in your top-level component. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context', displayName, displayName);\n\n            if (dragDropManager === undefined) {\n              return;\n            }\n\n            this.manager = dragDropManager;\n            this.handlerMonitor = createMonitor(dragDropManager);\n            this.handlerConnector = createConnector(dragDropManager.getBackend());\n            this.handler = createHandler(this.handlerMonitor, this.decoratedRef);\n          }\n        }]);\n\n        return DragDropContainer;\n      }(React.Component);\n\n      DragDropContainer.DecoratedComponent = DecoratedComponent;\n      DragDropContainer.displayName = \"\".concat(containerDisplayName, \"(\").concat(displayName, \")\");\n      return DragDropContainer;\n    }();\n\n    return hoistNonReactStatics_cjs(DragDropContainer, DecoratedComponent);\n  }\n\n  function _typeof$6(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$6 = function _typeof(obj) { return typeof obj; }; } else { _typeof$6 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$6(obj); }\n\n  function isValidType(type, allowArray) {\n    return typeof type === 'string' || _typeof$6(type) === 'symbol' || !!allowArray && Array.isArray(type) && type.every(function (t) {\n      return isValidType(t, false);\n    });\n  }\n\n  function _classCallCheck$9(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties$9(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass$9(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties$9(Constructor.prototype, protoProps); if (staticProps) _defineProperties$9(Constructor, staticProps); return Constructor; }\n  var ALLOWED_SPEC_METHODS = ['canDrag', 'beginDrag', 'isDragging', 'endDrag'];\n  var REQUIRED_SPEC_METHODS = ['beginDrag'];\n\n  var SourceImpl = /*#__PURE__*/function () {\n    function SourceImpl(spec, monitor, ref) {\n      var _this = this;\n\n      _classCallCheck$9(this, SourceImpl);\n\n      this.props = null;\n\n      this.beginDrag = function () {\n        if (!_this.props) {\n          return;\n        }\n\n        var item = _this.spec.beginDrag(_this.props, _this.monitor, _this.ref.current);\n\n        {\n          invariant(isPlainObject$1(item), 'beginDrag() must return a plain object that represents the dragged item. ' + 'Instead received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', item);\n        }\n\n        return item;\n      };\n\n      this.spec = spec;\n      this.monitor = monitor;\n      this.ref = ref;\n    }\n\n    _createClass$9(SourceImpl, [{\n      key: \"receiveProps\",\n      value: function receiveProps(props) {\n        this.props = props;\n      }\n    }, {\n      key: \"canDrag\",\n      value: function canDrag() {\n        if (!this.props) {\n          return false;\n        }\n\n        if (!this.spec.canDrag) {\n          return true;\n        }\n\n        return this.spec.canDrag(this.props, this.monitor);\n      }\n    }, {\n      key: \"isDragging\",\n      value: function isDragging(globalMonitor, sourceId) {\n        if (!this.props) {\n          return false;\n        }\n\n        if (!this.spec.isDragging) {\n          return sourceId === globalMonitor.getSourceId();\n        }\n\n        return this.spec.isDragging(this.props, this.monitor);\n      }\n    }, {\n      key: \"endDrag\",\n      value: function endDrag() {\n        if (!this.props) {\n          return;\n        }\n\n        if (!this.spec.endDrag) {\n          return;\n        }\n\n        this.spec.endDrag(this.props, this.monitor, getDecoratedComponent(this.ref));\n      }\n    }]);\n\n    return SourceImpl;\n  }();\n\n  function createSourceFactory(spec) {\n    Object.keys(spec).forEach(function (key) {\n      invariant(ALLOWED_SPEC_METHODS.indexOf(key) > -1, 'Expected the drag source specification to only have ' + 'some of the following keys: %s. ' + 'Instead received a specification with an unexpected \"%s\" key. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', ALLOWED_SPEC_METHODS.join(', '), key);\n      invariant(typeof spec[key] === 'function', 'Expected %s in the drag source specification to be a function. ' + 'Instead received a specification with %s: %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', key, key, spec[key]);\n    });\n    REQUIRED_SPEC_METHODS.forEach(function (key) {\n      invariant(typeof spec[key] === 'function', 'Expected %s in the drag source specification to be a function. ' + 'Instead received a specification with %s: %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', key, key, spec[key]);\n    });\n    return function createSource(monitor, ref) {\n      return new SourceImpl(spec, monitor, ref);\n    };\n  }\n\n  /**\n   * Decorates a component as a dragsource\n   * @param type The dragsource type\n   * @param spec The drag source specification\n   * @param collect The props collector function\n   * @param options DnD options\n   */\n\n  function DragSource(type, spec, collect) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    checkDecoratorArguments('DragSource', 'type, spec, collect[, options]', type, spec, collect, options);\n    var getType = type;\n\n    if (typeof type !== 'function') {\n      invariant(isValidType(type), 'Expected \"type\" provided as the first argument to DragSource to be ' + 'a string, or a function that returns a string given the current props. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', type);\n\n      getType = function getType() {\n        return type;\n      };\n    }\n\n    invariant(isPlainObject$1(spec), 'Expected \"spec\" provided as the second argument to DragSource to be ' + 'a plain object. Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', spec);\n    var createSource = createSourceFactory(spec);\n    invariant(typeof collect === 'function', 'Expected \"collect\" provided as the third argument to DragSource to be ' + 'a function that returns a plain object of props to inject. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', collect);\n    invariant(isPlainObject$1(options), 'Expected \"options\" provided as the fourth argument to DragSource to be ' + 'a plain object when specified. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', collect);\n    return function decorateSource(DecoratedComponent) {\n      return decorateHandler({\n        containerDisplayName: 'DragSource',\n        createHandler: createSource,\n        registerHandler: registerSource,\n        createConnector: function createConnector(backend) {\n          return new SourceConnector(backend);\n        },\n        createMonitor: function createMonitor(manager) {\n          return new DragSourceMonitorImpl(manager);\n        },\n        DecoratedComponent: DecoratedComponent,\n        getType: getType,\n        collect: collect,\n        options: options\n      });\n    };\n  }\n\n  function _classCallCheck$a(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties$a(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass$a(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties$a(Constructor.prototype, protoProps); if (staticProps) _defineProperties$a(Constructor, staticProps); return Constructor; }\n  var ALLOWED_SPEC_METHODS$1 = ['canDrop', 'hover', 'drop'];\n\n  var TargetImpl = /*#__PURE__*/function () {\n    function TargetImpl(spec, monitor, ref) {\n      _classCallCheck$a(this, TargetImpl);\n\n      this.props = null;\n      this.spec = spec;\n      this.monitor = monitor;\n      this.ref = ref;\n    }\n\n    _createClass$a(TargetImpl, [{\n      key: \"receiveProps\",\n      value: function receiveProps(props) {\n        this.props = props;\n      }\n    }, {\n      key: \"receiveMonitor\",\n      value: function receiveMonitor(monitor) {\n        this.monitor = monitor;\n      }\n    }, {\n      key: \"canDrop\",\n      value: function canDrop() {\n        if (!this.spec.canDrop) {\n          return true;\n        }\n\n        return this.spec.canDrop(this.props, this.monitor);\n      }\n    }, {\n      key: \"hover\",\n      value: function hover() {\n        if (!this.spec.hover || !this.props) {\n          return;\n        }\n\n        this.spec.hover(this.props, this.monitor, getDecoratedComponent(this.ref));\n      }\n    }, {\n      key: \"drop\",\n      value: function drop() {\n        if (!this.spec.drop) {\n          return undefined;\n        }\n\n        var dropResult = this.spec.drop(this.props, this.monitor, this.ref.current);\n\n        {\n          invariant(typeof dropResult === 'undefined' || isPlainObject$1(dropResult), 'drop() must either return undefined, or an object that represents the drop result. ' + 'Instead received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', dropResult);\n        }\n\n        return dropResult;\n      }\n    }]);\n\n    return TargetImpl;\n  }();\n\n  function createTargetFactory(spec) {\n    Object.keys(spec).forEach(function (key) {\n      invariant(ALLOWED_SPEC_METHODS$1.indexOf(key) > -1, 'Expected the drop target specification to only have ' + 'some of the following keys: %s. ' + 'Instead received a specification with an unexpected \"%s\" key. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', ALLOWED_SPEC_METHODS$1.join(', '), key);\n      invariant(typeof spec[key] === 'function', 'Expected %s in the drop target specification to be a function. ' + 'Instead received a specification with %s: %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', key, key, spec[key]);\n    });\n    return function createTarget(monitor, ref) {\n      return new TargetImpl(spec, monitor, ref);\n    };\n  }\n\n  function DropTarget(type, spec, collect) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    checkDecoratorArguments('DropTarget', 'type, spec, collect[, options]', type, spec, collect, options);\n    var getType = type;\n\n    if (typeof type !== 'function') {\n      invariant(isValidType(type, true), 'Expected \"type\" provided as the first argument to DropTarget to be ' + 'a string, an array of strings, or a function that returns either given ' + 'the current props. Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', type);\n\n      getType = function getType() {\n        return type;\n      };\n    }\n\n    invariant(isPlainObject$1(spec), 'Expected \"spec\" provided as the second argument to DropTarget to be ' + 'a plain object. Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', spec);\n    var createTarget = createTargetFactory(spec);\n    invariant(typeof collect === 'function', 'Expected \"collect\" provided as the third argument to DropTarget to be ' + 'a function that returns a plain object of props to inject. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', collect);\n    invariant(isPlainObject$1(options), 'Expected \"options\" provided as the fourth argument to DropTarget to be ' + 'a plain object when specified. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', collect);\n    return function decorateTarget(DecoratedComponent) {\n      return decorateHandler({\n        containerDisplayName: 'DropTarget',\n        createHandler: createTarget,\n        registerHandler: registerTarget,\n        createMonitor: function createMonitor(manager) {\n          return new DropTargetMonitorImpl(manager);\n        },\n        createConnector: function createConnector(backend) {\n          return new TargetConnector(backend);\n        },\n        DecoratedComponent: DecoratedComponent,\n        getType: getType,\n        collect: collect,\n        options: options\n      });\n    };\n  }\n\n  function _typeof$7(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$7 = function _typeof(obj) { return typeof obj; }; } else { _typeof$7 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$7(obj); }\n\n  function _classCallCheck$b(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties$b(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass$b(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties$b(Constructor.prototype, protoProps); if (staticProps) _defineProperties$b(Constructor, staticProps); return Constructor; }\n\n  function _inherits$1(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf$1(subClass, superClass); }\n\n  function _setPrototypeOf$1(o, p) { _setPrototypeOf$1 = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf$1(o, p); }\n\n  function _createSuper$1(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$1(); return function _createSuperInternal() { var Super = _getPrototypeOf$1(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf$1(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn$1(this, result); }; }\n\n  function _possibleConstructorReturn$1(self, call) { if (call && (_typeof$7(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized$1(self); }\n\n  function _assertThisInitialized$1(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n  function _isNativeReflectConstruct$1() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n  function _getPrototypeOf$1(o) { _getPrototypeOf$1 = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf$1(o); }\n  function DragLayer(collect) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    checkDecoratorArguments('DragLayer', 'collect[, options]', collect, options);\n    invariant(typeof collect === 'function', 'Expected \"collect\" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ', 'Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer', collect);\n    invariant(isPlainObject$1(options), 'Expected \"options\" provided as the second argument to DragLayer to be a plain object when specified. ' + 'Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer', options);\n    return function decorateLayer(DecoratedComponent) {\n      var Decorated = DecoratedComponent;\n      var _options$arePropsEqua = options.arePropsEqual,\n          arePropsEqual = _options$arePropsEqua === void 0 ? shallowEqual : _options$arePropsEqua;\n      var displayName = Decorated.displayName || Decorated.name || 'Component';\n\n      var DragLayerContainer =\n      /** @class */\n      function () {\n        var DragLayerContainer = /*#__PURE__*/function (_React$Component) {\n          _inherits$1(DragLayerContainer, _React$Component);\n\n          var _super = _createSuper$1(DragLayerContainer);\n\n          function DragLayerContainer() {\n            var _this;\n\n            _classCallCheck$b(this, DragLayerContainer);\n\n            _this = _super.apply(this, arguments);\n            _this.isCurrentlyMounted = false;\n            _this.ref = React.createRef();\n\n            _this.handleChange = function () {\n              if (!_this.isCurrentlyMounted) {\n                return;\n              }\n\n              var nextState = _this.getCurrentState();\n\n              if (!shallowEqual(nextState, _this.state)) {\n                _this.setState(nextState);\n              }\n            };\n\n            return _this;\n          }\n\n          _createClass$b(DragLayerContainer, [{\n            key: \"getDecoratedComponentInstance\",\n            value: function getDecoratedComponentInstance() {\n              invariant(this.ref.current, 'In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()');\n              return this.ref.current;\n            }\n          }, {\n            key: \"shouldComponentUpdate\",\n            value: function shouldComponentUpdate(nextProps, nextState) {\n              return !arePropsEqual(nextProps, this.props) || !shallowEqual(nextState, this.state);\n            }\n          }, {\n            key: \"componentDidMount\",\n            value: function componentDidMount() {\n              this.isCurrentlyMounted = true;\n              this.handleChange();\n            }\n          }, {\n            key: \"componentWillUnmount\",\n            value: function componentWillUnmount() {\n              this.isCurrentlyMounted = false;\n\n              if (this.unsubscribeFromOffsetChange) {\n                this.unsubscribeFromOffsetChange();\n                this.unsubscribeFromOffsetChange = undefined;\n              }\n\n              if (this.unsubscribeFromStateChange) {\n                this.unsubscribeFromStateChange();\n                this.unsubscribeFromStateChange = undefined;\n              }\n            }\n          }, {\n            key: \"render\",\n            value: function render() {\n              var _this2 = this;\n\n              return React.createElement(DndContext.Consumer, null, function (_ref) {\n                var dragDropManager = _ref.dragDropManager;\n\n                if (dragDropManager === undefined) {\n                  return null;\n                }\n\n                _this2.receiveDragDropManager(dragDropManager); // Let componentDidMount fire to initialize the collected state\n\n\n                if (!_this2.isCurrentlyMounted) {\n                  return null;\n                }\n\n                return React.createElement(Decorated, Object.assign({}, _this2.props, _this2.state, {\n                  ref: isRefable(Decorated) ? _this2.ref : null\n                }));\n              });\n            }\n          }, {\n            key: \"receiveDragDropManager\",\n            value: function receiveDragDropManager(dragDropManager) {\n              if (this.manager !== undefined) {\n                return;\n              }\n\n              this.manager = dragDropManager;\n              invariant(_typeof$7(dragDropManager) === 'object', 'Could not find the drag and drop manager in the context of %s. ' + 'Make sure to render a DndProvider component in your top-level component. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context', displayName, displayName);\n              var monitor = this.manager.getMonitor();\n              this.unsubscribeFromOffsetChange = monitor.subscribeToOffsetChange(this.handleChange);\n              this.unsubscribeFromStateChange = monitor.subscribeToStateChange(this.handleChange);\n            }\n          }, {\n            key: \"getCurrentState\",\n            value: function getCurrentState() {\n              if (!this.manager) {\n                return {};\n              }\n\n              var monitor = this.manager.getMonitor();\n              return collect(monitor, this.props);\n            }\n          }]);\n\n          return DragLayerContainer;\n        }(React.Component);\n\n        DragLayerContainer.displayName = \"DragLayer(\".concat(displayName, \")\");\n        DragLayerContainer.DecoratedComponent = DecoratedComponent;\n        return DragLayerContainer;\n      }();\n\n      return hoistNonReactStatics_cjs(DragLayerContainer, DecoratedComponent);\n    };\n  }\n\n  exports.DndContext = DndContext;\n  exports.DndProvider = DndProvider;\n  exports.DragLayer = DragLayer;\n  exports.DragPreviewImage = DragPreviewImage;\n  exports.DragSource = DragSource;\n  exports.DropTarget = DropTarget;\n  exports.createDndContext = createDndContext;\n  exports.useDrag = useDrag;\n  exports.useDragDropManager = useDragDropManager;\n  exports.useDragLayer = useDragLayer;\n  exports.useDrop = useDrop;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n"]}