{"version":3,"sources":["createSourceFactory.js"],"names":["invariant","isPlainObject","getDecoratedComponent","ALLOWED_SPEC_METHODS","REQUIRED_SPEC_METHODS","SourceImpl","constructor","spec","monitor","ref","props","beginDrag","item","current","receiveProps","canDrag","isDragging","globalMonitor","sourceId","getSourceId","endDrag","createSourceFactory","Object","keys","forEach","key","indexOf","join","createSource"],"mappings":";;;;AAAA,iBAASA,SAAT,QAA0B,sBAA1B;AACA,iBAASC,aAAT,QAA8B,mBAA9B;AACA,iBAASC,qBAAT,QAAsC,SAAtC;AACA,cAAMC,uBAAuB,CAAC,SAAD,EAAY,WAAZ,EAAyB,YAAzB,EAAuC,SAAvC,CAA7B;AACA,cAAMC,wBAAwB,CAAC,WAAD,CAA9B;AACA,cAAMC,UAAN,CAAiB;AACbC,wBAAYC,IAAZ,EAAkBC,OAAlB,EAA2BC,GAA3B,EAAgC;AAC5B,qBAAKC,KAAL,GAAa,IAAb;AACA,qBAAKC,SAAL,GAAiB,MAAM;AACnB,wBAAI,CAAC,KAAKD,KAAV,EAAiB;AACb;AACH;AACD,0BAAME,OAAO,KAAKL,IAAL,CAAUI,SAAV,CAAoB,KAAKD,KAAzB,EAAgC,KAAKF,OAArC,EAA8C,KAAKC,GAAL,CAASI,OAAvD,CAAb;;AAEIb,8BAAUC,cAAcW,IAAd,CAAV,EAA+B,8EAC3B,uBAD2B,GAE3B,sEAFJ,EAE4EA,IAF5E;;AAIJ,2BAAOA,IAAP;AACH,iBAXD;AAYA,qBAAKL,IAAL,GAAYA,IAAZ;AACA,qBAAKC,OAAL,GAAeA,OAAf;AACA,qBAAKC,GAAL,GAAWA,GAAX;AACH;AACDK,yBAAaJ,KAAb,EAAoB;AAChB,qBAAKA,KAAL,GAAaA,KAAb;AACH;AACDK,sBAAU;AACN,oBAAI,CAAC,KAAKL,KAAV,EAAiB;AACb,2BAAO,KAAP;AACH;AACD,oBAAI,CAAC,KAAKH,IAAL,CAAUQ,OAAf,EAAwB;AACpB,2BAAO,IAAP;AACH;AACD,uBAAO,KAAKR,IAAL,CAAUQ,OAAV,CAAkB,KAAKL,KAAvB,EAA8B,KAAKF,OAAnC,CAAP;AACH;AACDQ,uBAAWC,aAAX,EAA0BC,QAA1B,EAAoC;AAChC,oBAAI,CAAC,KAAKR,KAAV,EAAiB;AACb,2BAAO,KAAP;AACH;AACD,oBAAI,CAAC,KAAKH,IAAL,CAAUS,UAAf,EAA2B;AACvB,2BAAOE,aAAaD,cAAcE,WAAd,EAApB;AACH;AACD,uBAAO,KAAKZ,IAAL,CAAUS,UAAV,CAAqB,KAAKN,KAA1B,EAAiC,KAAKF,OAAtC,CAAP;AACH;AACDY,sBAAU;AACN,oBAAI,CAAC,KAAKV,KAAV,EAAiB;AACb;AACH;AACD,oBAAI,CAAC,KAAKH,IAAL,CAAUa,OAAf,EAAwB;AACpB;AACH;AACD,qBAAKb,IAAL,CAAUa,OAAV,CAAkB,KAAKV,KAAvB,EAA8B,KAAKF,OAAnC,EAA4CN,sBAAsB,KAAKO,GAA3B,CAA5C;AACH;AAhDY;AAkDjB,eAAO,SAASY,mBAAT,CAA6Bd,IAA7B,EAAmC;AACtCe,mBAAOC,IAAP,CAAYhB,IAAZ,EAAkBiB,OAAlB,CAA2BC,GAAD,IAAS;AAC/BzB,0BAAUG,qBAAqBuB,OAArB,CAA6BD,GAA7B,IAAoC,CAAC,CAA/C,EAAkD,yDAC9C,kCAD8C,GAE9C,gEAF8C,GAG9C,sEAHJ,EAG4EtB,qBAAqBwB,IAArB,CAA0B,IAA1B,CAH5E,EAG6GF,GAH7G;AAIAzB,0BAAU,OAAOO,KAAKkB,GAAL,CAAP,KAAqB,UAA/B,EAA2C,oEACvC,gDADuC,GAEvC,sEAFJ,EAE4EA,GAF5E,EAEiFA,GAFjF,EAEsFlB,KAAKkB,GAAL,CAFtF;AAGH,aARD;AASArB,kCAAsBoB,OAAtB,CAA+BC,GAAD,IAAS;AACnCzB,0BAAU,OAAOO,KAAKkB,GAAL,CAAP,KAAqB,UAA/B,EAA2C,oEACvC,gDADuC,GAEvC,sEAFJ,EAE4EA,GAF5E,EAEiFA,GAFjF,EAEsFlB,KAAKkB,GAAL,CAFtF;AAGH,aAJD;AAKA,mBAAO,SAASG,YAAT,CAAsBpB,OAAtB,EAA+BC,GAA/B,EAAoC;AACvC,uBAAO,IAAIJ,UAAJ,CAAeE,IAAf,EAAqBC,OAArB,EAA8BC,GAA9B,CAAP;AACH,aAFD;AAGH","file":"createSourceFactory.js","sourcesContent":["import { invariant } from '@react-dnd/invariant';\nimport { isPlainObject } from '../utils/js_utils';\nimport { getDecoratedComponent } from './utils';\nconst ALLOWED_SPEC_METHODS = ['canDrag', 'beginDrag', 'isDragging', 'endDrag'];\nconst REQUIRED_SPEC_METHODS = ['beginDrag'];\nclass SourceImpl {\n    constructor(spec, monitor, ref) {\n        this.props = null;\n        this.beginDrag = () => {\n            if (!this.props) {\n                return;\n            }\n            const item = this.spec.beginDrag(this.props, this.monitor, this.ref.current);\n            if (process.env.NODE_ENV !== 'production') {\n                invariant(isPlainObject(item), 'beginDrag() must return a plain object that represents the dragged item. ' +\n                    'Instead received %s. ' +\n                    'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', item);\n            }\n            return item;\n        };\n        this.spec = spec;\n        this.monitor = monitor;\n        this.ref = ref;\n    }\n    receiveProps(props) {\n        this.props = props;\n    }\n    canDrag() {\n        if (!this.props) {\n            return false;\n        }\n        if (!this.spec.canDrag) {\n            return true;\n        }\n        return this.spec.canDrag(this.props, this.monitor);\n    }\n    isDragging(globalMonitor, sourceId) {\n        if (!this.props) {\n            return false;\n        }\n        if (!this.spec.isDragging) {\n            return sourceId === globalMonitor.getSourceId();\n        }\n        return this.spec.isDragging(this.props, this.monitor);\n    }\n    endDrag() {\n        if (!this.props) {\n            return;\n        }\n        if (!this.spec.endDrag) {\n            return;\n        }\n        this.spec.endDrag(this.props, this.monitor, getDecoratedComponent(this.ref));\n    }\n}\nexport function createSourceFactory(spec) {\n    Object.keys(spec).forEach((key) => {\n        invariant(ALLOWED_SPEC_METHODS.indexOf(key) > -1, 'Expected the drag source specification to only have ' +\n            'some of the following keys: %s. ' +\n            'Instead received a specification with an unexpected \"%s\" key. ' +\n            'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', ALLOWED_SPEC_METHODS.join(', '), key);\n        invariant(typeof spec[key] === 'function', 'Expected %s in the drag source specification to be a function. ' +\n            'Instead received a specification with %s: %s. ' +\n            'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', key, key, spec[key]);\n    });\n    REQUIRED_SPEC_METHODS.forEach((key) => {\n        invariant(typeof spec[key] === 'function', 'Expected %s in the drag source specification to be a function. ' +\n            'Instead received a specification with %s: %s. ' +\n            'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', key, key, spec[key]);\n    });\n    return function createSource(monitor, ref) {\n        return new SourceImpl(spec, monitor, ref);\n    };\n}\n"]}