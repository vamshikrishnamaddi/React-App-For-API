{"version":3,"sources":["createTargetFactory.js"],"names":["invariant","isPlainObject","getDecoratedComponent","ALLOWED_SPEC_METHODS","TargetImpl","constructor","spec","monitor","ref","props","receiveProps","receiveMonitor","canDrop","hover","drop","undefined","dropResult","current","createTargetFactory","Object","keys","forEach","key","indexOf","join","createTarget"],"mappings":";;;;AAAA,iBAASA,SAAT,QAA0B,sBAA1B;AACA,iBAASC,aAAT,QAA8B,mBAA9B;AACA,iBAASC,qBAAT,QAAsC,SAAtC;AACA,cAAMC,uBAAuB,CAAC,SAAD,EAAY,OAAZ,EAAqB,MAArB,CAA7B;AACA,cAAMC,UAAN,CAAiB;AACbC,wBAAYC,IAAZ,EAAkBC,OAAlB,EAA2BC,GAA3B,EAAgC;AAC5B,qBAAKC,KAAL,GAAa,IAAb;AACA,qBAAKH,IAAL,GAAYA,IAAZ;AACA,qBAAKC,OAAL,GAAeA,OAAf;AACA,qBAAKC,GAAL,GAAWA,GAAX;AACH;AACDE,yBAAaD,KAAb,EAAoB;AAChB,qBAAKA,KAAL,GAAaA,KAAb;AACH;AACDE,2BAAeJ,OAAf,EAAwB;AACpB,qBAAKA,OAAL,GAAeA,OAAf;AACH;AACDK,sBAAU;AACN,oBAAI,CAAC,KAAKN,IAAL,CAAUM,OAAf,EAAwB;AACpB,2BAAO,IAAP;AACH;AACD,uBAAO,KAAKN,IAAL,CAAUM,OAAV,CAAkB,KAAKH,KAAvB,EAA8B,KAAKF,OAAnC,CAAP;AACH;AACDM,oBAAQ;AACJ,oBAAI,CAAC,KAAKP,IAAL,CAAUO,KAAX,IAAoB,CAAC,KAAKJ,KAA9B,EAAqC;AACjC;AACH;AACD,qBAAKH,IAAL,CAAUO,KAAV,CAAgB,KAAKJ,KAArB,EAA4B,KAAKF,OAAjC,EAA0CL,sBAAsB,KAAKM,GAA3B,CAA1C;AACH;AACDM,mBAAO;AACH,oBAAI,CAAC,KAAKR,IAAL,CAAUQ,IAAf,EAAqB;AACjB,2BAAOC,SAAP;AACH;AACD,sBAAMC,aAAa,KAAKV,IAAL,CAAUQ,IAAV,CAAe,KAAKL,KAApB,EAA2B,KAAKF,OAAhC,EAAyC,KAAKC,GAAL,CAASS,OAAlD,CAAnB;;AAEIjB,0BAAU,OAAOgB,UAAP,KAAsB,WAAtB,IAAqCf,cAAce,UAAd,CAA/C,EAA0E,wFACtE,uBADsE,GAEtE,sEAFJ,EAE4EA,UAF5E;;AAIJ,uBAAOA,UAAP;AACH;AApCY;AAsCjB,eAAO,SAASE,mBAAT,CAA6BZ,IAA7B,EAAmC;AACtCa,mBAAOC,IAAP,CAAYd,IAAZ,EAAkBe,OAAlB,CAA2BC,GAAD,IAAS;AAC/BtB,0BAAUG,qBAAqBoB,OAArB,CAA6BD,GAA7B,IAAoC,CAAC,CAA/C,EAAkD,yDAC9C,kCAD8C,GAE9C,gEAF8C,GAG9C,sEAHJ,EAG4EnB,qBAAqBqB,IAArB,CAA0B,IAA1B,CAH5E,EAG6GF,GAH7G;AAIAtB,0BAAU,OAAOM,KAAKgB,GAAL,CAAP,KAAqB,UAA/B,EAA2C,oEACvC,gDADuC,GAEvC,sEAFJ,EAE4EA,GAF5E,EAEiFA,GAFjF,EAEsFhB,KAAKgB,GAAL,CAFtF;AAGH,aARD;AASA,mBAAO,SAASG,YAAT,CAAsBlB,OAAtB,EAA+BC,GAA/B,EAAoC;AACvC,uBAAO,IAAIJ,UAAJ,CAAeE,IAAf,EAAqBC,OAArB,EAA8BC,GAA9B,CAAP;AACH,aAFD;AAGH","file":"createTargetFactory.js","sourcesContent":["import { invariant } from '@react-dnd/invariant';\nimport { isPlainObject } from '../utils/js_utils';\nimport { getDecoratedComponent } from './utils';\nconst ALLOWED_SPEC_METHODS = ['canDrop', 'hover', 'drop'];\nclass TargetImpl {\n    constructor(spec, monitor, ref) {\n        this.props = null;\n        this.spec = spec;\n        this.monitor = monitor;\n        this.ref = ref;\n    }\n    receiveProps(props) {\n        this.props = props;\n    }\n    receiveMonitor(monitor) {\n        this.monitor = monitor;\n    }\n    canDrop() {\n        if (!this.spec.canDrop) {\n            return true;\n        }\n        return this.spec.canDrop(this.props, this.monitor);\n    }\n    hover() {\n        if (!this.spec.hover || !this.props) {\n            return;\n        }\n        this.spec.hover(this.props, this.monitor, getDecoratedComponent(this.ref));\n    }\n    drop() {\n        if (!this.spec.drop) {\n            return undefined;\n        }\n        const dropResult = this.spec.drop(this.props, this.monitor, this.ref.current);\n        if (process.env.NODE_ENV !== 'production') {\n            invariant(typeof dropResult === 'undefined' || isPlainObject(dropResult), 'drop() must either return undefined, or an object that represents the drop result. ' +\n                'Instead received %s. ' +\n                'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', dropResult);\n        }\n        return dropResult;\n    }\n}\nexport function createTargetFactory(spec) {\n    Object.keys(spec).forEach((key) => {\n        invariant(ALLOWED_SPEC_METHODS.indexOf(key) > -1, 'Expected the drop target specification to only have ' +\n            'some of the following keys: %s. ' +\n            'Instead received a specification with an unexpected \"%s\" key. ' +\n            'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', ALLOWED_SPEC_METHODS.join(', '), key);\n        invariant(typeof spec[key] === 'function', 'Expected %s in the drop target specification to be a function. ' +\n            'Instead received a specification with %s: %s. ' +\n            'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', key, key, spec[key]);\n    });\n    return function createTarget(monitor, ref) {\n        return new TargetImpl(spec, monitor, ref);\n    };\n}\n"]}