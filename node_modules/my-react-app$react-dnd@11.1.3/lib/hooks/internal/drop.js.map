{"version":3,"sources":["drop.js"],"names":["useMemo","registerTarget","useDragDropManager","TargetConnector","DropTargetMonitorImpl","useIsomorphicLayoutEffect","useDropTargetMonitor","manager","monitor","connector","getBackend","useDropHandler","spec","handler","canDrop","current","getItem","hover","drop","registerHandler","handlerId","unregister","accept","receiveHandlerId"],"mappings":";;;;AAAA,iBAASA,OAAT,QAAwB,OAAxB;AACA,iBAASC,cAAT,QAA+B,2BAA/B;AACA,iBAASC,kBAAT,QAAmC,uBAAnC;AACA,iBAASC,eAAT,QAAgC,8BAAhC;AACA,iBAASC,qBAAT,QAAsC,oCAAtC;AACA,iBAASC,yBAAT,QAA0C,6BAA1C;AACA,eAAO,SAASC,oBAAT,GAAgC;AACnC,kBAAMC,UAAUL,oBAAhB;AACA,kBAAMM,UAAUR,QAAQ,MAAM,IAAII,qBAAJ,CAA0BG,OAA1B,CAAd,EAAkD,CAACA,OAAD,CAAlD,CAAhB;AACA,kBAAME,YAAYT,QAAQ,MAAM,IAAIG,eAAJ,CAAoBI,QAAQG,UAAR,EAApB,CAAd,EAAyD,CACvEH,OADuE,CAAzD,CAAlB;AAGA,mBAAO,CAACC,OAAD,EAAUC,SAAV,CAAP;AACH;AACD,eAAO,SAASE,cAAT,CAAwBC,IAAxB,EAA8BJ,OAA9B,EAAuCC,SAAvC,EAAkD;AACrD,kBAAMF,UAAUL,oBAAhB;AACA,kBAAMW,UAAUb,QAAQ,MAAM;AAC1B,uBAAO;AACHc,8BAAU;AACN,8BAAM,EAAEA,OAAF,KAAcF,KAAKG,OAAzB;AACA,+BAAOD,UAAUA,QAAQN,QAAQQ,OAAR,EAAR,EAA2BR,OAA3B,CAAV,GAAgD,IAAvD;AACH,qBAJE;AAKHS,4BAAQ;AACJ,8BAAM,EAAEA,KAAF,KAAYL,KAAKG,OAAvB;AACA,4BAAIE,KAAJ,EAAW;AACPA,kCAAMT,QAAQQ,OAAR,EAAN,EAAyBR,OAAzB;AACH;AACJ,qBAVE;AAWHU,2BAAO;AACH,8BAAM,EAAEA,IAAF,KAAWN,KAAKG,OAAtB;AACA,4BAAIG,IAAJ,EAAU;AACN,mCAAOA,KAAKV,QAAQQ,OAAR,EAAL,EAAwBR,OAAxB,CAAP;AACH;AACJ;AAhBE,iBAAP;AAkBH,aAnBe,EAmBb,CAACA,OAAD,CAnBa,CAAhB;AAoBAH,sCAA0B,SAASc,eAAT,GAA2B;AACjD,sBAAM,CAACC,SAAD,EAAYC,UAAZ,IAA0BpB,eAAeW,KAAKG,OAAL,CAAaO,MAA5B,EAAoCT,OAApC,EAA6CN,OAA7C,CAAhC;AACAC,wBAAQe,gBAAR,CAAyBH,SAAzB;AACAX,0BAAUc,gBAAV,CAA2BH,SAA3B;AACA,uBAAOC,UAAP;AACH,aALD,EAKG,CAACb,OAAD,EAAUC,SAAV,CALH;AAMH","file":"drop.js","sourcesContent":["import { useMemo } from 'react';\nimport { registerTarget } from '../../common/registration';\nimport { useDragDropManager } from '../useDragDropManager';\nimport { TargetConnector } from '../../common/TargetConnector';\nimport { DropTargetMonitorImpl } from '../../common/DropTargetMonitorImpl';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\nexport function useDropTargetMonitor() {\n    const manager = useDragDropManager();\n    const monitor = useMemo(() => new DropTargetMonitorImpl(manager), [manager]);\n    const connector = useMemo(() => new TargetConnector(manager.getBackend()), [\n        manager,\n    ]);\n    return [monitor, connector];\n}\nexport function useDropHandler(spec, monitor, connector) {\n    const manager = useDragDropManager();\n    const handler = useMemo(() => {\n        return {\n            canDrop() {\n                const { canDrop } = spec.current;\n                return canDrop ? canDrop(monitor.getItem(), monitor) : true;\n            },\n            hover() {\n                const { hover } = spec.current;\n                if (hover) {\n                    hover(monitor.getItem(), monitor);\n                }\n            },\n            drop() {\n                const { drop } = spec.current;\n                if (drop) {\n                    return drop(monitor.getItem(), monitor);\n                }\n            },\n        };\n    }, [monitor]);\n    useIsomorphicLayoutEffect(function registerHandler() {\n        const [handlerId, unregister] = registerTarget(spec.current.accept, handler, manager);\n        monitor.receiveHandlerId(handlerId);\n        connector.receiveHandlerId(handlerId);\n        return unregister;\n    }, [monitor, connector]);\n}\n"]}