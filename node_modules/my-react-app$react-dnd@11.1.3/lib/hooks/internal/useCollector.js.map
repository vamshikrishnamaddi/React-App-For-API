{"version":3,"sources":["useCollector.js"],"names":["shallowEqual","useState","useCallback","useIsomorphicLayoutEffect","useCollector","monitor","collect","onUpdate","collected","setCollected","updateCollected","nextValue"],"mappings":";;;;AAAA,iBAASA,YAAT,QAA6B,yBAA7B;AACA,iBAASC,QAAT,EAAmBC,WAAnB,QAAsC,OAAtC;AACA,iBAASC,yBAAT,QAA0C,6BAA1C;AACA;;;;;;AAMA,eAAO,SAASC,YAAT,CAAsBC,OAAtB,EAA+BC,OAA/B,EAAwCC,QAAxC,EAAkD;AACrD,kBAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BR,SAAS,MAAMK,QAAQD,OAAR,CAAf,CAAlC;AACA,kBAAMK,kBAAkBR,YAAY,MAAM;AACtC,sBAAMS,YAAYL,QAAQD,OAAR,CAAlB;AACA,oBAAI,CAACL,aAAaQ,SAAb,EAAwBG,SAAxB,CAAL,EAAyC;AACrCF,iCAAaE,SAAb;AACA,wBAAIJ,QAAJ,EAAc;AACVA;AACH;AACJ;AACJ,aARuB,EAQrB,CAACC,SAAD,EAAYH,OAAZ,EAAqBE,QAArB,CARqB,CAAxB;AASA;AACA;AACAJ,sCAA0BO,eAA1B,EAA2C,EAA3C;AACA,mBAAO,CAACF,SAAD,EAAYE,eAAZ,CAAP;AACH","file":"useCollector.js","sourcesContent":["import { shallowEqual } from '@react-dnd/shallowequal';\nimport { useState, useCallback } from 'react';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\n/**\n *\n * @param monitor The monitor to collect state from\n * @param collect The collecting function\n * @param onUpdate A method to invoke when updates occur\n */\nexport function useCollector(monitor, collect, onUpdate) {\n    const [collected, setCollected] = useState(() => collect(monitor));\n    const updateCollected = useCallback(() => {\n        const nextValue = collect(monitor);\n        if (!shallowEqual(collected, nextValue)) {\n            setCollected(nextValue);\n            if (onUpdate) {\n                onUpdate();\n            }\n        }\n    }, [collected, monitor, onUpdate]);\n    // update the collected properties after the first render\n    // and the components are attached to dnd-core\n    useIsomorphicLayoutEffect(updateCollected, []);\n    return [collected, updateCollected];\n}\n"]}