{"version":3,"sources":["SwitchTransition.js"],"names":["exports","__esModule","default","modes","_react","_interopRequireDefault","require","_propTypes","_Transition","_TransitionGroupContext","_leaveRenders","_enterRenders","obj","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","__proto__","areChildrenDifferent","oldChildren","newChildren","isValidElement","key","out","in","callHook","element","name","cb","_element$props","props","apply","arguments","leaveRenders","_ref","current","changeState","cloneElement","onExited","ENTERING","_ref2","children","onEntered","enterRenders","_ref3","ENTERED","_ref4","SwitchTransition","_React$Component","_this","_len","length","args","Array","_key","call","concat","state","status","appeared","setState","_proto","componentDidMount","getDerivedStateFromProps","mode","EXITING","render","_this$props","_this$state","data","component","createElement","Provider","value","isMounting","Component","propTypes","oneOf","oneOfType","isRequired","defaultProps","_default"],"mappings":"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","file":"SwitchTransition.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.default = exports.modes = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _Transition = require(\"./Transition\");\n\nvar _TransitionGroupContext = _interopRequireDefault(require(\"./TransitionGroupContext\"));\n\nvar _leaveRenders, _enterRenders;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nfunction areChildrenDifferent(oldChildren, newChildren) {\n  if (oldChildren === newChildren) return false;\n\n  if (_react.default.isValidElement(oldChildren) && _react.default.isValidElement(newChildren) && oldChildren.key != null && oldChildren.key === newChildren.key) {\n    return false;\n  }\n\n  return true;\n}\n/**\n * Enum of modes for SwitchTransition component\n * @enum { string }\n */\n\n\nvar modes = {\n  out: 'out-in',\n  in: 'in-out'\n};\nexports.modes = modes;\n\nvar callHook = function callHook(element, name, cb) {\n  return function () {\n    var _element$props;\n\n    element.props[name] && (_element$props = element.props)[name].apply(_element$props, arguments);\n    cb();\n  };\n};\n\nvar leaveRenders = (_leaveRenders = {}, _leaveRenders[modes.out] = function (_ref) {\n  var current = _ref.current,\n      changeState = _ref.changeState;\n  return _react.default.cloneElement(current, {\n    in: false,\n    onExited: callHook(current, 'onExited', function () {\n      changeState(_Transition.ENTERING, null);\n    })\n  });\n}, _leaveRenders[modes.in] = function (_ref2) {\n  var current = _ref2.current,\n      changeState = _ref2.changeState,\n      children = _ref2.children;\n  return [current, _react.default.cloneElement(children, {\n    in: true,\n    onEntered: callHook(children, 'onEntered', function () {\n      changeState(_Transition.ENTERING);\n    })\n  })];\n}, _leaveRenders);\nvar enterRenders = (_enterRenders = {}, _enterRenders[modes.out] = function (_ref3) {\n  var children = _ref3.children,\n      changeState = _ref3.changeState;\n  return _react.default.cloneElement(children, {\n    in: true,\n    onEntered: callHook(children, 'onEntered', function () {\n      changeState(_Transition.ENTERED, _react.default.cloneElement(children, {\n        in: true\n      }));\n    })\n  });\n}, _enterRenders[modes.in] = function (_ref4) {\n  var current = _ref4.current,\n      children = _ref4.children,\n      changeState = _ref4.changeState;\n  return [_react.default.cloneElement(current, {\n    in: false,\n    onExited: callHook(current, 'onExited', function () {\n      changeState(_Transition.ENTERED, _react.default.cloneElement(children, {\n        in: true\n      }));\n    })\n  }), _react.default.cloneElement(children, {\n    in: true\n  })];\n}, _enterRenders);\n/**\n * A transition component inspired by the [vue transition modes](https://vuejs.org/v2/guide/transitions.html#Transition-Modes).\n * You can use it when you want to control the render between state transitions.\n * Based on the selected mode and the child's key which is the `Transition` or `CSSTransition` component, the `SwitchTransition` makes a consistent transition between them.\n *\n * If the `out-in` mode is selected, the `SwitchTransition` waits until the old child leaves and then inserts a new child.\n * If the `in-out` mode is selected, the `SwitchTransition` inserts a new child first, waits for the new child to enter and then removes the old child.\n *\n * **Note**: If you want the animation to happen simultaneously\n * (that is, to have the old child removed and a new child inserted **at the same time**),\n * you should use\n * [`TransitionGroup`](https://reactcommunity.org/react-transition-group/transition-group)\n * instead.\n *\n * ```jsx\n * function App() {\n *  const [state, setState] = useState(false);\n *  return (\n *    <SwitchTransition>\n *      <CSSTransition\n *        key={state ? \"Goodbye, world!\" : \"Hello, world!\"}\n *        addEndListener={(node, done) => node.addEventListener(\"transitionend\", done, false)}\n *        classNames='fade'\n *      >\n *        <button onClick={() => setState(state => !state)}>\n *          {state ? \"Goodbye, world!\" : \"Hello, world!\"}\n *        </button>\n *      </CSSTransition>\n *    </SwitchTransition>\n *  );\n * }\n * ```\n *\n * ```css\n * .fade-enter{\n *    opacity: 0;\n * }\n * .fade-exit{\n *    opacity: 1;\n * }\n * .fade-enter-active{\n *    opacity: 1;\n * }\n * .fade-exit-active{\n *    opacity: 0;\n * }\n * .fade-enter-active,\n * .fade-exit-active{\n *    transition: opacity 500ms;\n * }\n * ```\n */\n\nvar SwitchTransition = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(SwitchTransition, _React$Component);\n\n  function SwitchTransition() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      status: _Transition.ENTERED,\n      current: null\n    };\n    _this.appeared = false;\n\n    _this.changeState = function (status, current) {\n      if (current === void 0) {\n        current = _this.state.current;\n      }\n\n      _this.setState({\n        status: status,\n        current: current\n      });\n    };\n\n    return _this;\n  }\n\n  var _proto = SwitchTransition.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.appeared = true;\n  };\n\n  SwitchTransition.getDerivedStateFromProps = function getDerivedStateFromProps(props, state) {\n    if (props.children == null) {\n      return {\n        current: null\n      };\n    }\n\n    if (state.status === _Transition.ENTERING && props.mode === modes.in) {\n      return {\n        status: _Transition.ENTERING\n      };\n    }\n\n    if (state.current && areChildrenDifferent(state.current, props.children)) {\n      return {\n        status: _Transition.EXITING\n      };\n    }\n\n    return {\n      current: _react.default.cloneElement(props.children, {\n        in: true\n      })\n    };\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        children = _this$props.children,\n        mode = _this$props.mode,\n        _this$state = this.state,\n        status = _this$state.status,\n        current = _this$state.current;\n    var data = {\n      children: children,\n      current: current,\n      changeState: this.changeState,\n      status: status\n    };\n    var component;\n\n    switch (status) {\n      case _Transition.ENTERING:\n        component = enterRenders[mode](data);\n        break;\n\n      case _Transition.EXITING:\n        component = leaveRenders[mode](data);\n        break;\n\n      case _Transition.ENTERED:\n        component = current;\n    }\n\n    return /*#__PURE__*/_react.default.createElement(_TransitionGroupContext.default.Provider, {\n      value: {\n        isMounting: !this.appeared\n      }\n    }, component);\n  };\n\n  return SwitchTransition;\n}(_react.default.Component);\n\nSwitchTransition.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /**\n   * Transition modes.\n   * `out-in`: Current element transitions out first, then when complete, the new element transitions in.\n   * `in-out`: New element transitions in first, then when complete, the current element transitions out.\n   *\n   * @type {'out-in'|'in-out'}\n   */\n  mode: _propTypes.default.oneOf([modes.in, modes.out]),\n\n  /**\n   * Any `Transition` or `CSSTransition` component.\n   */\n  children: _propTypes.default.oneOfType([_propTypes.default.element.isRequired])\n} : {};\nSwitchTransition.defaultProps = {\n  mode: modes.out\n};\nvar _default = SwitchTransition;\nexports.default = _default;"]}