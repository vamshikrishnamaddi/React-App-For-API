{"version":3,"sources":["AsyncGenerator.js"],"names":["OverloadYield","require","AsyncGenerator","gen","front","back","resume","key","arg","result","value","overloaded","Promise","resolve","v","then","nextKey","k","done","settle","err","type","reject","next","_invoke","request","prototype","Symbol","asyncIterator","module","exports","__esModule"],"mappings":"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","file":"AsyncGenerator.js","sourcesContent":["var OverloadYield = require(\"./OverloadYield.js\");\nfunction AsyncGenerator(gen) {\n  var front, back;\n  function resume(key, arg) {\n    try {\n      var result = gen[key](arg),\n        value = result.value,\n        overloaded = value instanceof OverloadYield;\n      Promise.resolve(overloaded ? value.v : value).then(function (arg) {\n        if (overloaded) {\n          var nextKey = \"return\" === key ? \"return\" : \"next\";\n          if (!value.k || arg.done) return resume(nextKey, arg);\n          arg = gen[nextKey](arg).value;\n        }\n        settle(result.done ? \"return\" : \"normal\", arg);\n      }, function (err) {\n        resume(\"throw\", err);\n      });\n    } catch (err) {\n      settle(\"throw\", err);\n    }\n  }\n  function settle(type, value) {\n    switch (type) {\n      case \"return\":\n        front.resolve({\n          value: value,\n          done: !0\n        });\n        break;\n      case \"throw\":\n        front.reject(value);\n        break;\n      default:\n        front.resolve({\n          value: value,\n          done: !1\n        });\n    }\n    (front = front.next) ? resume(front.key, front.arg) : back = null;\n  }\n  this._invoke = function (key, arg) {\n    return new Promise(function (resolve, reject) {\n      var request = {\n        key: key,\n        arg: arg,\n        resolve: resolve,\n        reject: reject,\n        next: null\n      };\n      back ? back = back.next = request : (front = back = request, resume(key, arg));\n    });\n  }, \"function\" != typeof gen[\"return\"] && (this[\"return\"] = void 0);\n}\nAsyncGenerator.prototype[\"function\" == typeof Symbol && Symbol.asyncIterator || \"@@asyncIterator\"] = function () {\n  return this;\n}, AsyncGenerator.prototype.next = function (arg) {\n  return this._invoke(\"next\", arg);\n}, AsyncGenerator.prototype[\"throw\"] = function (arg) {\n  return this._invoke(\"throw\", arg);\n}, AsyncGenerator.prototype[\"return\"] = function (arg) {\n  return this._invoke(\"return\", arg);\n};\nmodule.exports = AsyncGenerator, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;"]}