{"version":3,"sources":["sync.js"],"names":["module","exports","globSync","GlobSync","rp","require","minimatch","Minimatch","Glob","util","path","assert","isAbsolute","common","setopts","ownProp","childrenIgnored","isIgnored","pattern","options","arguments","length","TypeError","found","Error","noprocess","n","set","matches","Array","i","_process","_finish","prototype","ok","realpath","self","forEach","matchset","index","Object","create","p","_makeAbs","real","realpathSync","realpathCache","er","syscall","finish","inGlobStar","prefix","_processSimple","join","slice","remain","read","map","abs","isGlobStar","GLOBSTAR","_processGlobStar","_processReaddir","entries","_readdir","pn","negate","rawGlob","_glob","dotOk","dot","charAt","matchedEntries","e","m","match","push","len","mark","stat","nomount","root","_emitMatch","shift","newPattern","concat","_mark","absolute","nodir","c","cache","isArray","_stat","_readdirInGlobStar","follow","lstat","fs","lstatSync","code","isSym","isSymbolicLink","symlinks","isDirectory","_readdirEntries","readdirSync","_readdirError","f","cwdAbs","error","cwd","strict","silent","console","remainWithoutGlobStar","gspref","noGlobStar","instead","below","exists","trail","test","resolve","process","platform","replace","needDir","maxLength","statCache","statSync","makeAbs"],"mappings":"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","file":"sync.js","sourcesContent":["module.exports = globSync\nglobSync.GlobSync = GlobSync\n\nvar rp = require('fs.realpath')\nvar minimatch = require('minimatch')\nvar Minimatch = minimatch.Minimatch\nvar Glob = require('./glob.js').Glob\nvar util = require('util')\nvar path = require('path')\nvar assert = require('assert')\nvar isAbsolute = require('path-is-absolute')\nvar common = require('./common.js')\nvar setopts = common.setopts\nvar ownProp = common.ownProp\nvar childrenIgnored = common.childrenIgnored\nvar isIgnored = common.isIgnored\n\nfunction globSync (pattern, options) {\n  if (typeof options === 'function' || arguments.length === 3)\n    throw new TypeError('callback provided to sync glob\\n'+\n                        'See: https://github.com/isaacs/node-glob/issues/167')\n\n  return new GlobSync(pattern, options).found\n}\n\nfunction GlobSync (pattern, options) {\n  if (!pattern)\n    throw new Error('must provide pattern')\n\n  if (typeof options === 'function' || arguments.length === 3)\n    throw new TypeError('callback provided to sync glob\\n'+\n                        'See: https://github.com/isaacs/node-glob/issues/167')\n\n  if (!(this instanceof GlobSync))\n    return new GlobSync(pattern, options)\n\n  setopts(this, pattern, options)\n\n  if (this.noprocess)\n    return this\n\n  var n = this.minimatch.set.length\n  this.matches = new Array(n)\n  for (var i = 0; i < n; i ++) {\n    this._process(this.minimatch.set[i], i, false)\n  }\n  this._finish()\n}\n\nGlobSync.prototype._finish = function () {\n  assert.ok(this instanceof GlobSync)\n  if (this.realpath) {\n    var self = this\n    this.matches.forEach(function (matchset, index) {\n      var set = self.matches[index] = Object.create(null)\n      for (var p in matchset) {\n        try {\n          p = self._makeAbs(p)\n          var real = rp.realpathSync(p, self.realpathCache)\n          set[real] = true\n        } catch (er) {\n          if (er.syscall === 'stat')\n            set[self._makeAbs(p)] = true\n          else\n            throw er\n        }\n      }\n    })\n  }\n  common.finish(this)\n}\n\n\nGlobSync.prototype._process = function (pattern, index, inGlobStar) {\n  assert.ok(this instanceof GlobSync)\n\n  // Get the first [n] parts of pattern that are all strings.\n  var n = 0\n  while (typeof pattern[n] === 'string') {\n    n ++\n  }\n  // now n is the index of the first one that is *not* a string.\n\n  // See if there's anything else\n  var prefix\n  switch (n) {\n    // if not, then this is rather simple\n    case pattern.length:\n      this._processSimple(pattern.join('/'), index)\n      return\n\n    case 0:\n      // pattern *starts* with some non-trivial item.\n      // going to readdir(cwd), but not include the prefix in matches.\n      prefix = null\n      break\n\n    default:\n      // pattern has some string bits in the front.\n      // whatever it starts with, whether that's 'absolute' like /foo/bar,\n      // or 'relative' like '../baz'\n      prefix = pattern.slice(0, n).join('/')\n      break\n  }\n\n  var remain = pattern.slice(n)\n\n  // get the list of entries.\n  var read\n  if (prefix === null)\n    read = '.'\n  else if (isAbsolute(prefix) ||\n      isAbsolute(pattern.map(function (p) {\n        return typeof p === 'string' ? p : '[*]'\n      }).join('/'))) {\n    if (!prefix || !isAbsolute(prefix))\n      prefix = '/' + prefix\n    read = prefix\n  } else\n    read = prefix\n\n  var abs = this._makeAbs(read)\n\n  //if ignored, skip processing\n  if (childrenIgnored(this, read))\n    return\n\n  var isGlobStar = remain[0] === minimatch.GLOBSTAR\n  if (isGlobStar)\n    this._processGlobStar(prefix, read, abs, remain, index, inGlobStar)\n  else\n    this._processReaddir(prefix, read, abs, remain, index, inGlobStar)\n}\n\n\nGlobSync.prototype._processReaddir = function (prefix, read, abs, remain, index, inGlobStar) {\n  var entries = this._readdir(abs, inGlobStar)\n\n  // if the abs isn't a dir, then nothing can match!\n  if (!entries)\n    return\n\n  // It will only match dot entries if it starts with a dot, or if\n  // dot is set.  Stuff like @(.foo|.bar) isn't allowed.\n  var pn = remain[0]\n  var negate = !!this.minimatch.negate\n  var rawGlob = pn._glob\n  var dotOk = this.dot || rawGlob.charAt(0) === '.'\n\n  var matchedEntries = []\n  for (var i = 0; i < entries.length; i++) {\n    var e = entries[i]\n    if (e.charAt(0) !== '.' || dotOk) {\n      var m\n      if (negate && !prefix) {\n        m = !e.match(pn)\n      } else {\n        m = e.match(pn)\n      }\n      if (m)\n        matchedEntries.push(e)\n    }\n  }\n\n  var len = matchedEntries.length\n  // If there are no matched entries, then nothing matches.\n  if (len === 0)\n    return\n\n  // if this is the last remaining pattern bit, then no need for\n  // an additional stat *unless* the user has specified mark or\n  // stat explicitly.  We know they exist, since readdir returned\n  // them.\n\n  if (remain.length === 1 && !this.mark && !this.stat) {\n    if (!this.matches[index])\n      this.matches[index] = Object.create(null)\n\n    for (var i = 0; i < len; i ++) {\n      var e = matchedEntries[i]\n      if (prefix) {\n        if (prefix.slice(-1) !== '/')\n          e = prefix + '/' + e\n        else\n          e = prefix + e\n      }\n\n      if (e.charAt(0) === '/' && !this.nomount) {\n        e = path.join(this.root, e)\n      }\n      this._emitMatch(index, e)\n    }\n    // This was the last one, and no stats were needed\n    return\n  }\n\n  // now test all matched entries as stand-ins for that part\n  // of the pattern.\n  remain.shift()\n  for (var i = 0; i < len; i ++) {\n    var e = matchedEntries[i]\n    var newPattern\n    if (prefix)\n      newPattern = [prefix, e]\n    else\n      newPattern = [e]\n    this._process(newPattern.concat(remain), index, inGlobStar)\n  }\n}\n\n\nGlobSync.prototype._emitMatch = function (index, e) {\n  if (isIgnored(this, e))\n    return\n\n  var abs = this._makeAbs(e)\n\n  if (this.mark)\n    e = this._mark(e)\n\n  if (this.absolute) {\n    e = abs\n  }\n\n  if (this.matches[index][e])\n    return\n\n  if (this.nodir) {\n    var c = this.cache[abs]\n    if (c === 'DIR' || Array.isArray(c))\n      return\n  }\n\n  this.matches[index][e] = true\n\n  if (this.stat)\n    this._stat(e)\n}\n\n\nGlobSync.prototype._readdirInGlobStar = function (abs) {\n  // follow all symlinked directories forever\n  // just proceed as if this is a non-globstar situation\n  if (this.follow)\n    return this._readdir(abs, false)\n\n  var entries\n  var lstat\n  var stat\n  try {\n    lstat = this.fs.lstatSync(abs)\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      // lstat failed, doesn't exist\n      return null\n    }\n  }\n\n  var isSym = lstat && lstat.isSymbolicLink()\n  this.symlinks[abs] = isSym\n\n  // If it's not a symlink or a dir, then it's definitely a regular file.\n  // don't bother doing a readdir in that case.\n  if (!isSym && lstat && !lstat.isDirectory())\n    this.cache[abs] = 'FILE'\n  else\n    entries = this._readdir(abs, false)\n\n  return entries\n}\n\nGlobSync.prototype._readdir = function (abs, inGlobStar) {\n  var entries\n\n  if (inGlobStar && !ownProp(this.symlinks, abs))\n    return this._readdirInGlobStar(abs)\n\n  if (ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n    if (!c || c === 'FILE')\n      return null\n\n    if (Array.isArray(c))\n      return c\n  }\n\n  try {\n    return this._readdirEntries(abs, this.fs.readdirSync(abs))\n  } catch (er) {\n    this._readdirError(abs, er)\n    return null\n  }\n}\n\nGlobSync.prototype._readdirEntries = function (abs, entries) {\n  // if we haven't asked to stat everything, then just\n  // assume that everything in there exists, so we can avoid\n  // having to stat it a second time.\n  if (!this.mark && !this.stat) {\n    for (var i = 0; i < entries.length; i ++) {\n      var e = entries[i]\n      if (abs === '/')\n        e = abs + e\n      else\n        e = abs + '/' + e\n      this.cache[e] = true\n    }\n  }\n\n  this.cache[abs] = entries\n\n  // mark and cache dir-ness\n  return entries\n}\n\nGlobSync.prototype._readdirError = function (f, er) {\n  // handle errors, and cache the information\n  switch (er.code) {\n    case 'ENOTSUP': // https://github.com/isaacs/node-glob/issues/205\n    case 'ENOTDIR': // totally normal. means it *does* exist.\n      var abs = this._makeAbs(f)\n      this.cache[abs] = 'FILE'\n      if (abs === this.cwdAbs) {\n        var error = new Error(er.code + ' invalid cwd ' + this.cwd)\n        error.path = this.cwd\n        error.code = er.code\n        throw error\n      }\n      break\n\n    case 'ENOENT': // not terribly unusual\n    case 'ELOOP':\n    case 'ENAMETOOLONG':\n    case 'UNKNOWN':\n      this.cache[this._makeAbs(f)] = false\n      break\n\n    default: // some unusual error.  Treat as failure.\n      this.cache[this._makeAbs(f)] = false\n      if (this.strict)\n        throw er\n      if (!this.silent)\n        console.error('glob error', er)\n      break\n  }\n}\n\nGlobSync.prototype._processGlobStar = function (prefix, read, abs, remain, index, inGlobStar) {\n\n  var entries = this._readdir(abs, inGlobStar)\n\n  // no entries means not a dir, so it can never have matches\n  // foo.txt/** doesn't match foo.txt\n  if (!entries)\n    return\n\n  // test without the globstar, and with every child both below\n  // and replacing the globstar.\n  var remainWithoutGlobStar = remain.slice(1)\n  var gspref = prefix ? [ prefix ] : []\n  var noGlobStar = gspref.concat(remainWithoutGlobStar)\n\n  // the noGlobStar pattern exits the inGlobStar state\n  this._process(noGlobStar, index, false)\n\n  var len = entries.length\n  var isSym = this.symlinks[abs]\n\n  // If it's a symlink, and we're in a globstar, then stop\n  if (isSym && inGlobStar)\n    return\n\n  for (var i = 0; i < len; i++) {\n    var e = entries[i]\n    if (e.charAt(0) === '.' && !this.dot)\n      continue\n\n    // these two cases enter the inGlobStar state\n    var instead = gspref.concat(entries[i], remainWithoutGlobStar)\n    this._process(instead, index, true)\n\n    var below = gspref.concat(entries[i], remain)\n    this._process(below, index, true)\n  }\n}\n\nGlobSync.prototype._processSimple = function (prefix, index) {\n  // XXX review this.  Shouldn't it be doing the mounting etc\n  // before doing stat?  kinda weird?\n  var exists = this._stat(prefix)\n\n  if (!this.matches[index])\n    this.matches[index] = Object.create(null)\n\n  // If it doesn't exist, then just mark the lack of results\n  if (!exists)\n    return\n\n  if (prefix && isAbsolute(prefix) && !this.nomount) {\n    var trail = /[\\/\\\\]$/.test(prefix)\n    if (prefix.charAt(0) === '/') {\n      prefix = path.join(this.root, prefix)\n    } else {\n      prefix = path.resolve(this.root, prefix)\n      if (trail)\n        prefix += '/'\n    }\n  }\n\n  if (process.platform === 'win32')\n    prefix = prefix.replace(/\\\\/g, '/')\n\n  // Mark this as a match\n  this._emitMatch(index, prefix)\n}\n\n// Returns either 'DIR', 'FILE', or false\nGlobSync.prototype._stat = function (f) {\n  var abs = this._makeAbs(f)\n  var needDir = f.slice(-1) === '/'\n\n  if (f.length > this.maxLength)\n    return false\n\n  if (!this.stat && ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n\n    if (Array.isArray(c))\n      c = 'DIR'\n\n    // It exists, but maybe not how we need it\n    if (!needDir || c === 'DIR')\n      return c\n\n    if (needDir && c === 'FILE')\n      return false\n\n    // otherwise we have to stat, because maybe c=true\n    // if we know it exists, but not what it is.\n  }\n\n  var exists\n  var stat = this.statCache[abs]\n  if (!stat) {\n    var lstat\n    try {\n      lstat = this.fs.lstatSync(abs)\n    } catch (er) {\n      if (er && (er.code === 'ENOENT' || er.code === 'ENOTDIR')) {\n        this.statCache[abs] = false\n        return false\n      }\n    }\n\n    if (lstat && lstat.isSymbolicLink()) {\n      try {\n        stat = this.fs.statSync(abs)\n      } catch (er) {\n        stat = lstat\n      }\n    } else {\n      stat = lstat\n    }\n  }\n\n  this.statCache[abs] = stat\n\n  var c = true\n  if (stat)\n    c = stat.isDirectory() ? 'DIR' : 'FILE'\n\n  this.cache[abs] = this.cache[abs] || c\n\n  if (needDir && c === 'FILE')\n    return false\n\n  return c\n}\n\nGlobSync.prototype._mark = function (p) {\n  return common.mark(this, p)\n}\n\nGlobSync.prototype._makeAbs = function (f) {\n  return common.makeAbs(this, f)\n}\n"]}