{"version":3,"sources":["index.js"],"names":["module","exports","balanced","a","b","str","RegExp","maybeMatch","r","range","start","end","pre","slice","body","length","post","reg","m","match","begs","beg","left","right","result","ai","indexOf","bi","i","push","pop"],"mappings":"AAAA;;;;;;AACAA,WAAOC,OAAP,GAAiBC,QAAjB;AACA,aAASA,QAAT,CAAkBC,CAAlB,EAAqBC,CAArB,EAAwBC,GAAxB,EAA6B;AAC3B,UAAIF,aAAaG,MAAjB,EAAyBH,IAAII,WAAWJ,CAAX,EAAcE,GAAd,CAAJ;AACzB,UAAID,aAAaE,MAAjB,EAAyBF,IAAIG,WAAWH,CAAX,EAAcC,GAAd,CAAJ;;AAEzB,UAAIG,IAAIC,MAAMN,CAAN,EAASC,CAAT,EAAYC,GAAZ,CAAR;;AAEA,aAAOG,KAAK;AACVE,eAAOF,EAAE,CAAF,CADG;AAEVG,aAAKH,EAAE,CAAF,CAFK;AAGVI,aAAKP,IAAIQ,KAAJ,CAAU,CAAV,EAAaL,EAAE,CAAF,CAAb,CAHK;AAIVM,cAAMT,IAAIQ,KAAJ,CAAUL,EAAE,CAAF,IAAOL,EAAEY,MAAnB,EAA2BP,EAAE,CAAF,CAA3B,CAJI;AAKVQ,cAAMX,IAAIQ,KAAJ,CAAUL,EAAE,CAAF,IAAOJ,EAAEW,MAAnB;AALI,OAAZ;AAOD;;AAED,aAASR,UAAT,CAAoBU,GAApB,EAAyBZ,GAAzB,EAA8B;AAC5B,UAAIa,IAAIb,IAAIc,KAAJ,CAAUF,GAAV,CAAR;AACA,aAAOC,IAAIA,EAAE,CAAF,CAAJ,GAAW,IAAlB;AACD;;AAEDhB,aAASO,KAAT,GAAiBA,KAAjB;AACA,aAASA,KAAT,CAAeN,CAAf,EAAkBC,CAAlB,EAAqBC,GAArB,EAA0B;AACxB,UAAIe,IAAJ,EAAUC,GAAV,EAAeC,IAAf,EAAqBC,KAArB,EAA4BC,MAA5B;AACA,UAAIC,KAAKpB,IAAIqB,OAAJ,CAAYvB,CAAZ,CAAT;AACA,UAAIwB,KAAKtB,IAAIqB,OAAJ,CAAYtB,CAAZ,EAAeqB,KAAK,CAApB,CAAT;AACA,UAAIG,IAAIH,EAAR;;AAEA,UAAIA,MAAM,CAAN,IAAWE,KAAK,CAApB,EAAuB;AACrB,YAAGxB,MAAIC,CAAP,EAAU;AACR,iBAAO,CAACqB,EAAD,EAAKE,EAAL,CAAP;AACD;AACDP,eAAO,EAAP;AACAE,eAAOjB,IAAIU,MAAX;;AAEA,eAAOa,KAAK,CAAL,IAAU,CAACJ,MAAlB,EAA0B;AACxB,cAAII,KAAKH,EAAT,EAAa;AACXL,iBAAKS,IAAL,CAAUD,CAAV;AACAH,iBAAKpB,IAAIqB,OAAJ,CAAYvB,CAAZ,EAAeyB,IAAI,CAAnB,CAAL;AACD,WAHD,MAGO,IAAIR,KAAKL,MAAL,IAAe,CAAnB,EAAsB;AAC3BS,qBAAS,CAAEJ,KAAKU,GAAL,EAAF,EAAcH,EAAd,CAAT;AACD,WAFM,MAEA;AACLN,kBAAMD,KAAKU,GAAL,EAAN;AACA,gBAAIT,MAAMC,IAAV,EAAgB;AACdA,qBAAOD,GAAP;AACAE,sBAAQI,EAAR;AACD;;AAEDA,iBAAKtB,IAAIqB,OAAJ,CAAYtB,CAAZ,EAAewB,IAAI,CAAnB,CAAL;AACD;;AAEDA,cAAIH,KAAKE,EAAL,IAAWF,MAAM,CAAjB,GAAqBA,EAArB,GAA0BE,EAA9B;AACD;;AAED,YAAIP,KAAKL,MAAT,EAAiB;AACfS,mBAAS,CAAEF,IAAF,EAAQC,KAAR,CAAT;AACD;AACF;;AAED,aAAOC,MAAP;AACD","file":"index.js","sourcesContent":["'use strict';\nmodule.exports = balanced;\nfunction balanced(a, b, str) {\n  if (a instanceof RegExp) a = maybeMatch(a, str);\n  if (b instanceof RegExp) b = maybeMatch(b, str);\n\n  var r = range(a, b, str);\n\n  return r && {\n    start: r[0],\n    end: r[1],\n    pre: str.slice(0, r[0]),\n    body: str.slice(r[0] + a.length, r[1]),\n    post: str.slice(r[1] + b.length)\n  };\n}\n\nfunction maybeMatch(reg, str) {\n  var m = str.match(reg);\n  return m ? m[0] : null;\n}\n\nbalanced.range = range;\nfunction range(a, b, str) {\n  var begs, beg, left, right, result;\n  var ai = str.indexOf(a);\n  var bi = str.indexOf(b, ai + 1);\n  var i = ai;\n\n  if (ai >= 0 && bi > 0) {\n    if(a===b) {\n      return [ai, bi];\n    }\n    begs = [];\n    left = str.length;\n\n    while (i >= 0 && !result) {\n      if (i == ai) {\n        begs.push(i);\n        ai = str.indexOf(a, i + 1);\n      } else if (begs.length == 1) {\n        result = [ begs.pop(), bi ];\n      } else {\n        beg = begs.pop();\n        if (beg < left) {\n          left = beg;\n          right = bi;\n        }\n\n        bi = str.indexOf(b, i + 1);\n      }\n\n      i = ai < bi && ai >= 0 ? ai : bi;\n    }\n\n    if (begs.length) {\n      result = [ left, right ];\n    }\n  }\n\n  return result;\n}\n"]}