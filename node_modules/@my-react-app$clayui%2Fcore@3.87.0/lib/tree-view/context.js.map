{"version":3,"sources":["context.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","TreeViewContext","useAPI","useTreeViewContext","_react","_interopRequireWildcard","require","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","toString","slice","name","Array","from","test","iter","isArray","len","length","i","arr2","createContext","useContext","_useTreeViewContext","cursors","expandedKeys","insert","layout","onLoadMore","selection","toggle","loadMore","useCallback","id","item","willToggle","arguments","undefined","layoutItem","layoutKeys","current","cursor","then","items","concat","loc","catch","error","console","hasKey","selectedKeys","hasExpandedKey","getCursor","toggleSelection"],"mappings":"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","file":"context.js","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TreeViewContext = void 0;\nexports.useAPI = useAPI;\nexports.useTreeViewContext = useTreeViewContext;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar TreeViewContext = /*#__PURE__*/_react.default.createContext({});\n\nexports.TreeViewContext = TreeViewContext;\n\nfunction useTreeViewContext() {\n  return (0, _react.useContext)(TreeViewContext);\n}\n\nfunction useAPI() {\n  var _useTreeViewContext = useTreeViewContext(),\n      cursors = _useTreeViewContext.cursors,\n      expandedKeys = _useTreeViewContext.expandedKeys,\n      insert = _useTreeViewContext.insert,\n      layout = _useTreeViewContext.layout,\n      onLoadMore = _useTreeViewContext.onLoadMore,\n      selection = _useTreeViewContext.selection,\n      toggle = _useTreeViewContext.toggle;\n\n  var loadMore = (0, _react.useCallback)(function (id, item) {\n    var willToggle = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    if (!onLoadMore) {\n      return;\n    }\n\n    var layoutItem = layout.layoutKeys.current.get(id);\n\n    if (!layoutItem) {\n      return;\n    }\n\n    var cursor = cursors.current.get(id);\n    return onLoadMore(item, cursor).then(function (items) {\n      if (!items) {\n        return;\n      }\n\n      if (Array.isArray(items)) {\n        insert([].concat(_toConsumableArray(layoutItem.loc), [0]), items);\n\n        if (willToggle) {\n          toggle(id);\n        }\n      } else if (items.items) {\n        cursors.current.set(id, items.cursor);\n        insert([].concat(_toConsumableArray(layoutItem.loc), [0]), items.items);\n      }\n    }).catch(function (error) {\n      console.error(error);\n    });\n  }, [toggle, insert]);\n  var hasKey = (0, _react.useCallback)(function (key) {\n    return selection.selectedKeys.has(key);\n  }, [selection.selectedKeys]);\n  var hasExpandedKey = (0, _react.useCallback)(function (key) {\n    return expandedKeys.has(key);\n  }, [expandedKeys]);\n  var getCursor = (0, _react.useCallback)(function (key) {\n    return cursors.current.get(key);\n  }, [cursors]);\n  return [{\n    has: hasKey,\n    toggle: selection.toggleSelection\n  }, {\n    has: hasExpandedKey,\n    toggle: toggle\n  }, {\n    get: getCursor,\n    loadMore: loadMore\n  }];\n}"]}