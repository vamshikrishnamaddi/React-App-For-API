{"version":3,"sources":["loose-envify.js"],"names":["stream","require","util","replace","jsonExtRe","module","exports","rootEnv","process","env","file","trOpts","test","PassThrough","envs","LooseEnvify","Transform","call","_data","_envs","inherits","prototype","_transform","buf","enc","cb","_flush","replaced","push"],"mappings":"AAAA;;;;;;AAEA,QAAIA,SAASC,QAAQ,qBAAR,CAAb;AACA,QAAIC,OAAOD,QAAQ,mBAAR,CAAX;AACA,QAAIE,UAAUF,QAAQ,WAAR,CAAd;;AAEA,QAAIG,YAAY,SAAhB;;AAEAC,WAAOC,OAAP,GAAiB,UAASC,OAAT,EAAkB;AACjCA,gBAAUA,WAAWC,QAAQC,GAA7B;AACA,aAAO,UAAUC,IAAV,EAAgBC,MAAhB,EAAwB;AAC7B,YAAIP,UAAUQ,IAAV,CAAeF,IAAf,CAAJ,EAA0B;AACxB,iBAAOV,OAAOa,WAAP,EAAP;AACD;AACD,YAAIC,OAAOH,SAAS,CAACJ,OAAD,EAAUI,MAAV,CAAT,GAA6B,CAACJ,OAAD,CAAxC;AACA,eAAO,IAAIQ,WAAJ,CAAgBD,IAAhB,CAAP;AACD,OAND;AAOD,KATD;;AAWA,aAASC,WAAT,CAAqBD,IAArB,EAA2B;AACzBd,aAAOgB,SAAP,CAAiBC,IAAjB,CAAsB,IAAtB;AACA,WAAKC,KAAL,GAAa,EAAb;AACA,WAAKC,KAAL,GAAaL,IAAb;AACD;AACDZ,SAAKkB,QAAL,CAAcL,WAAd,EAA2Bf,OAAOgB,SAAlC;;AAEAD,gBAAYM,SAAZ,CAAsBC,UAAtB,GAAmC,UAASC,GAAT,EAAcC,GAAd,EAAmBC,EAAnB,EAAuB;AACxD,WAAKP,KAAL,IAAcK,GAAd;AACAE;AACD,KAHD;;AAKAV,gBAAYM,SAAZ,CAAsBK,MAAtB,GAA+B,UAASD,EAAT,EAAa;AAC1C,UAAIE,WAAWxB,QAAQ,KAAKe,KAAb,EAAoB,KAAKC,KAAzB,CAAf;AACA,WAAKS,IAAL,CAAUD,QAAV;AACAF;AACD,KAJD","file":"loose-envify.js","sourcesContent":["'use strict';\n\nvar stream = require('stream');\nvar util = require('util');\nvar replace = require('./replace');\n\nvar jsonExtRe = /\\.json$/;\n\nmodule.exports = function(rootEnv) {\n  rootEnv = rootEnv || process.env;\n  return function (file, trOpts) {\n    if (jsonExtRe.test(file)) {\n      return stream.PassThrough();\n    }\n    var envs = trOpts ? [rootEnv, trOpts] : [rootEnv];\n    return new LooseEnvify(envs);\n  };\n};\n\nfunction LooseEnvify(envs) {\n  stream.Transform.call(this);\n  this._data = '';\n  this._envs = envs;\n}\nutil.inherits(LooseEnvify, stream.Transform);\n\nLooseEnvify.prototype._transform = function(buf, enc, cb) {\n  this._data += buf;\n  cb();\n};\n\nLooseEnvify.prototype._flush = function(cb) {\n  var replaced = replace(this._data, this._envs);\n  this.push(replaced);\n  cb();\n};\n"]}